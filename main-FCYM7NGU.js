var Sx=Object.defineProperty,Ax=Object.defineProperties;var Rx=Object.getOwnPropertyDescriptors;var dl=Object.getOwnPropertySymbols;var ub=Object.prototype.hasOwnProperty,lb=Object.prototype.propertyIsEnumerable;var cb=(n,e,t)=>e in n?Sx(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,O=(n,e)=>{for(var t in e||={})ub.call(e,t)&&cb(n,t,e[t]);if(dl)for(var t of dl(e))lb.call(e,t)&&cb(n,t,e[t]);return n},Y=(n,e)=>Ax(n,Rx(e));var tg=(n,e)=>{var t={};for(var r in n)ub.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&dl)for(var r of dl(n))e.indexOf(r)<0&&lb.call(n,r)&&(t[r]=n[r]);return t};var vt=null,hl=!1,og=1,Mx=null,St=Symbol("SIGNAL");function K(n){let e=vt;return vt=n,e}function pl(){return vt}var $a={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qa(n){if(hl)throw new Error("");if(vt===null)return;vt.consumerOnSignalRead(n);let e=vt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=vt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:vt.producers,t!==void 0&&t.producer===n)){vt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===vt&&(!r||xx(i,vt)))return;let o=Wo(vt),s={producer:n,consumer:vt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};vt.producersTail=s,e!==void 0?e.nextProducer=s:vt.producers=s,o&&pb(n,s)}function db(){og++}function sg(n){if(!(Wo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===og)){if(!n.producerMustRecompute(n)&&!ml(n)){ig(n);return}n.producerRecomputeValue(n),ig(n)}}function ag(n){if(n.consumers===void 0)return;let e=hl;hl=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Nx(r)}}finally{hl=e}}function cg(){return vt?.consumerAllowSignalWrites!==!1}function Nx(n){n.dirty=!0,ag(n),n.consumerMarkedDirty?.(n)}function ig(n){n.dirty=!1,n.lastCleanEpoch=og}function za(n){return n&&hb(n),K(n)}function hb(n){n.producersTail=void 0,n.recomputing=!0}function gl(n,e){K(e),n&&fb(n)}function fb(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Wo(n))do t=ug(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function ml(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(sg(t),r!==t.version))return!0}return!1}function Ga(n){if(Wo(n)){let e=n.producers;for(;e!==void 0;)e=ug(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function pb(n,e){let t=n.consumersTail,r=Wo(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)pb(i.producer,i)}function ug(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Wo(e)){let o=e.producers;for(;o!==void 0;)o=ug(o)}return t}function Wo(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function lg(n){Mx?.(n)}function xx(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function dg(n,e){return Object.is(n,e)}function yl(n,e){let t=Object.create(Px);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(sg(t),qa(t),t.value===fl)throw t.error;return t.value};return r[St]=t,lg(t),r}var ng=Symbol("UNSET"),rg=Symbol("COMPUTING"),fl=Symbol("ERRORED"),Px=Y(O({},$a),{value:ng,dirty:!0,error:null,equal:dg,kind:"computed",producerMustRecompute(n){return n.value===ng||n.value===rg},producerRecomputeValue(n){if(n.value===rg)throw new Error("");let e=n.value;n.value=rg;let t=za(n),r,i=!1;try{r=n.computation(),K(null),i=e!==ng&&e!==fl&&r!==fl&&n.equal(e,r)}catch(o){r=fl,n.error=o}finally{gl(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Ox(){throw new Error}var gb=Ox;function mb(n){gb(n)}function hg(n){gb=n}var kx=null;function fg(n,e){let t=Object.create(vl);t.value=n,e!==void 0&&(t.equal=e);let r=()=>yb(t);return r[St]=t,lg(t),[r,s=>Wa(t,s),s=>vb(t,s)]}function yb(n){return qa(n),n.value}function Wa(n,e){cg()||mb(n),n.equal(n.value,e)||(n.value=e,Fx(n))}function vb(n,e){cg()||mb(n),Wa(n,e(n.value))}var vl=Y(O({},$a),{equal:dg,value:void 0,kind:"signal"});function Fx(n){n.version++,db(),ag(n),kx?.(n)}function pg(n){let e=K(null);try{return n()}finally{K(e)}}function re(n){return typeof n=="function"}function Ko(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var _l=Ko(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ka(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var dt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof _l?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_b(o)}catch(s){e=e??[],s instanceof _l?e=[...e,...s.errors]:e.push(s)}}if(e)throw new _l(e)}}add(e){var t;if(e&&e!==this)if(this.closed)_b(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ka(t,e)}remove(e){let{_finalizers:t}=this;t&&Ka(t,e),e instanceof n&&e._removeParent(this)}};dt.EMPTY=(()=>{let n=new dt;return n.closed=!0,n})();var gg=dt.EMPTY;function El(n){return n instanceof dt||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function _b(n){re(n)?n():n.unsubscribe()}var Dn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qo={setTimeout(n,e,...t){let{delegate:r}=Qo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Qo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Il(n){Qo.setTimeout(()=>{let{onUnhandledError:e}=Dn;if(e)e(n);else throw n})}function Qa(){}var Eb=mg("C",void 0,void 0);function Ib(n){return mg("E",void 0,n)}function wb(n){return mg("N",n,void 0)}function mg(n,e,t){return{kind:n,value:e,error:t}}var $i=null;function Yo(n){if(Dn.useDeprecatedSynchronousErrorHandling){let e=!$i;if(e&&($i={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=$i;if($i=null,t)throw r}}else n()}function bb(n){Dn.useDeprecatedSynchronousErrorHandling&&$i&&($i.errorThrown=!0,$i.error=n)}var qi=class extends dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,El(e)&&e.add(this)):this.destination=jx}static create(e,t,r){return new Jo(e,t,r)}next(e){this.isStopped?vg(wb(e),this):this._next(e)}error(e){this.isStopped?vg(Ib(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?vg(Eb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Lx=Function.prototype.bind;function yg(n,e){return Lx.call(n,e)}var _g=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){wl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){wl(r)}else wl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){wl(t)}}},Jo=class extends qi{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Dn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&yg(e.next,o),error:e.error&&yg(e.error,o),complete:e.complete&&yg(e.complete,o)}):i=e}this.destination=new _g(i)}};function wl(n){Dn.useDeprecatedSynchronousErrorHandling?bb(n):Il(n)}function Vx(n){throw n}function vg(n,e){let{onStoppedNotification:t}=Dn;t&&Qo.setTimeout(()=>t(n,e))}var jx={closed:!0,next:Qa,error:Vx,complete:Qa};var Zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Cn(n){return n}function Eg(...n){return Ig(n)}function Ig(n){return n.length===0?Cn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var me=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Bx(t)?t:new Jo(t,r,i);return Yo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Db(r),new r((i,o)=>{let s=new Jo({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Zo](){return this}pipe(...t){return Ig(t)(this)}toPromise(t){return t=Db(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Db(n){var e;return(e=n??Dn.Promise)!==null&&e!==void 0?e:Promise}function Ux(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function Bx(n){return n&&n instanceof qi||Ux(n)&&El(n)}function Hx(n){return re(n?.lift)}function Ee(n){return e=>{if(Hx(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ie(n,e,t,r,i){return new wg(n,e,t,r,i)}var wg=class extends qi{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Cb=Ko(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class n extends me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Cb}next(t){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?gg:(this.currentObservers=null,o.push(t),new dt(()=>{this.currentObservers=null,Ka(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new me;return t.source=this,t}}return n.create=(e,t)=>new bl(e,t),n})(),bl=class extends et{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:gg}};var Pe=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ut=new me(n=>n.complete());function Tb(n){return n&&re(n.schedule)}function Sb(n){return n[n.length-1]}function Dl(n){return re(Sb(n))?n.pop():void 0}function Jr(n){return Tb(Sb(n))?n.pop():void 0}function Rb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function Ab(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zi(n){return this instanceof zi?(this.v=n,this):new zi(n)}function Mb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(R){return Promise.resolve(R).then(y,p)}}function a(y,R){r[y]&&(i[y]=function(P){return new Promise(function(N,V){o.push([y,P,N,V])>1||u(y,P)})},R&&(i[y]=R(i[y])))}function u(y,R){try{l(r[y](R))}catch(P){m(o[0][3],P)}}function l(y){y.value instanceof zi?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,R){y(R),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Nb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ab=="function"?Ab(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Cl=n=>n&&typeof n.length=="number"&&typeof n!="function";function Tl(n){return re(n?.then)}function Sl(n){return re(n[Zo])}function Al(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Rl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function $x(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=$x();function Nl(n){return re(n?.[Ml])}function xl(n){return Mb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield zi(t.read());if(i)return yield zi(void 0);yield yield zi(r)}}finally{t.releaseLock()}})}function Pl(n){return re(n?.getReader)}function ze(n){if(n instanceof me)return n;if(n!=null){if(Sl(n))return qx(n);if(Cl(n))return zx(n);if(Tl(n))return Gx(n);if(Al(n))return xb(n);if(Nl(n))return Wx(n);if(Pl(n))return Kx(n)}throw Rl(n)}function qx(n){return new me(e=>{let t=n[Zo]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zx(n){return new me(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Gx(n){return new me(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Il)})}function Wx(n){return new me(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function xb(n){return new me(e=>{Qx(n,e).catch(t=>e.error(t))})}function Kx(n){return xb(xl(n))}function Qx(n,e){var t,r,i,o;return Rb(this,void 0,void 0,function*(){try{for(t=Nb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Bt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ol(n,e=0){return Ee((t,r)=>{t.subscribe(Ie(r,i=>Bt(r,n,()=>r.next(i),e),()=>Bt(r,n,()=>r.complete(),e),i=>Bt(r,n,()=>r.error(i),e)))})}function kl(n,e=0){return Ee((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Pb(n,e){return ze(n).pipe(kl(e),Ol(e))}function Ob(n,e){return ze(n).pipe(kl(e),Ol(e))}function kb(n,e){return new me(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Fb(n,e){return new me(t=>{let r;return Bt(t,e,()=>{r=n[Ml](),Bt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Fl(n,e){if(!n)throw new Error("Iterable cannot be null");return new me(t=>{Bt(t,e,()=>{let r=n[Symbol.asyncIterator]();Bt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function Lb(n,e){return Fl(xl(n),e)}function Vb(n,e){if(n!=null){if(Sl(n))return Pb(n,e);if(Cl(n))return kb(n,e);if(Tl(n))return Ob(n,e);if(Al(n))return Fl(n,e);if(Nl(n))return Fb(n,e);if(Pl(n))return Lb(n,e)}throw Rl(n)}function Ge(n,e){return e?Vb(n,e):ze(n)}function fe(...n){let e=Jr(n);return Ge(n,e)}function bg(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new me(e?i=>e.schedule(r,0,i):r)}function Ll(n){return!!n&&(n instanceof me||re(n.lift)&&re(n.subscribe))}var Gi=Ko(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ye(n,e){return Ee((t,r)=>{let i=0;t.subscribe(Ie(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Yx}=Array;function Jx(n,e){return Yx(e)?n(...e):n(e)}function Vl(n){return ye(e=>Jx(n,e))}var{isArray:Zx}=Array,{getPrototypeOf:Xx,prototype:eP,keys:tP}=Object;function jl(n){if(n.length===1){let e=n[0];if(Zx(e))return{args:e,keys:null};if(nP(e)){let t=tP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function nP(n){return n&&typeof n=="object"&&Xx(n)===eP}function Ul(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Dg(...n){let e=Jr(n),t=Dl(n),{args:r,keys:i}=jl(n);if(r.length===0)return Ge([],e);let o=new me(rP(r,e,i?s=>Ul(i,s):Cn));return t?o.pipe(Vl(t)):o}function rP(n,e,t=Cn){return r=>{jb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)jb(e,()=>{let l=Ge(n[u],e),h=!1;l.subscribe(Ie(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function jb(n,e,t){n?Bt(t,n,e):e()}function Ub(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=P=>l<r?R(P):u.push(P),R=P=>{o&&e.next(P),l++;let N=!1;ze(t(P,h++)).subscribe(Ie(e,V=>{i?.(V),o?y(V):e.next(V)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let V=u.shift();s?Bt(e,s,()=>R(V)):R(V)}m()}catch(V){e.error(V)}}))};return n.subscribe(Ie(e,y,()=>{p=!0,m()})),()=>{a?.()}}function At(n,e,t=1/0){return re(e)?At((r,i)=>ye((o,s)=>e(r,o,i,s))(ze(n(r,i))),t):(typeof e=="number"&&(t=e),Ee((r,i)=>Ub(r,i,n,t)))}function Bb(n=1/0){return At(Cn,n)}function Hb(){return Bb(1)}function Xo(...n){return Hb()(Ge(n,Jr(n)))}function Ya(n){return new me(e=>{ze(n()).subscribe(e)})}function Cg(...n){let e=Dl(n),{args:t,keys:r}=jl(n),i=new me(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;ze(t[h]).subscribe(Ie(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Ul(r,a):a),o.complete())}))}});return e?i.pipe(Vl(e)):i}function Ht(n,e){return Ee((t,r)=>{let i=0;t.subscribe(Ie(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Ja(n){return Ee((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Ie(t,void 0,void 0,s=>{o=ze(n(s,Ja(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Bl(n,e){return re(e)?At(n,e,1):At(n,1)}function Tg(n){return Ee((e,t)=>{let r=!1;e.subscribe(Ie(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Jt(n){return n<=0?()=>Ut:Ee((e,t)=>{let r=0;e.subscribe(Ie(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function $b(n=iP){return Ee((e,t)=>{let r=!1;e.subscribe(Ie(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function iP(){return new Gi}function Sg(n){return Ee((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function vr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ht((i,o)=>n(i,o,r)):Cn,Jt(1),t?Tg(e):$b(()=>new Gi))}function Hl(n){return n<=0?()=>Ut:Ee((e,t)=>{let r=[];e.subscribe(Ie(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ag(...n){let e=Jr(n);return Ee((t,r)=>{(e?Xo(n,t,e):Xo(n,t)).subscribe(r)})}function Hn(n,e){return Ee((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Ie(r,u=>{i?.unsubscribe();let l=0,h=o++;ze(n(u,h)).subscribe(i=Ie(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Za(n){return Ee((e,t)=>{ze(n).subscribe(Ie(t,()=>t.complete(),Qa)),!t.closed&&e.subscribe(t)})}function Rt(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ie(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Cn}var Rg;function $l(){return Rg}function $n(n){let e=Rg;return Rg=n,e}var qb=Symbol("NotFound");function es(n){return n===qb||n?.name==="\u0275NotFound"}var Kl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,t){super(ns(e,t)),this.code=e}};function aP(n){return`NG0${Math.abs(n)}`}function ns(n,e){return`${aP(n)}${e?": "+e:""}`}var ic=globalThis;function we(n){for(let e in n)if(n[e]===we)return e;throw Error("")}function Qb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Er(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Er).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function qg(n,e){return n?e?`${n} ${e}`:n:e||""}var cP=we({__forward_ref__:we});function un(n){return n.__forward_ref__=un,n.toString=function(){return Er(this())},n}function ht(n){return zg(n)?n():n}function zg(n){return typeof n=="function"&&n.hasOwnProperty(cP)&&n.__forward_ref__===un}function q(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tn(n){return{providers:n.providers||[],imports:n.imports||[]}}function oc(n){return uP(n,Ql)}function Gg(n){return oc(n)!==null}function uP(n,e){return n.hasOwnProperty(e)&&n[e]||null}function lP(n){let e=n?.[Ql]??null;return e||null}function Ng(n){return n&&n.hasOwnProperty(zl)?n[zl]:null}var Ql=we({\u0275prov:we}),zl=we({\u0275inj:we}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Wg(n){return n&&!!n.\u0275providers}var Kg=we({\u0275cmp:we}),Qg=we({\u0275dir:we}),Yg=we({\u0275pipe:we}),Jg=we({\u0275mod:we}),ec=we({\u0275fac:we}),Zi=we({__NG_ELEMENT_ID__:we}),zb=we({__NG_ENV_ID__:we});function _t(n){return typeof n=="string"?n:n==null?"":String(n)}function Yb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():_t(n)}var Jb=we({ngErrorCode:we}),dP=we({ngErrorMessage:we}),hP=we({ngTokenPath:we});function Zg(n,e){return Zb("",-200,e)}function Yl(n,e){throw new $(-201,!1)}function Zb(n,e,t){let r=new $(e,n);return r[Jb]=e,r[dP]=n,t&&(r[hP]=t),r}function fP(n){return n[Jb]}var xg;function Xb(){return xg}function Mt(n){let e=xg;return xg=n,e}function Xg(n,e,t){let r=oc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Yl(n,"Injector")}var pP={},Wi=pP,gP="__NG_DI_FLAG__",Pg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Ki(t)||0;try{return this.injector.get(e,r&8?null:Wi,r)}catch(i){if(es(i))return i;throw i}}};function mP(n,e=0){let t=$l();if(t===void 0)throw new $(-203,!1);if(t===null)return Xg(n,void 0,e);{let r=yP(e),i=t.retrieve(n,r);if(es(i)){if(r.optional)return null;throw i}return i}}function J(n,e=0){return(Xb()||mP)(ht(n),e)}function L(n,e){return J(n,Ki(e))}function Ki(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function yP(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Og(n){let e=[];for(let t=0;t<n.length;t++){let r=ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=vP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(J(i,o))}else e.push(J(r))}return e}function vP(n){return n[gP]}function Zr(n,e){let t=n.hasOwnProperty(ec);return t?n[ec]:null}function Jl(n,e){n.forEach(t=>Array.isArray(t)?Jl(t,e):e(t))}function em(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function eD(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function tD(n,e,t){let r=rs(n,e);return r>=0?n[r|1]=t:(r=~r,eD(n,r,e,t)),r}function Zl(n,e){let t=rs(n,e);if(t>=0)return n[t|1]}function rs(n,e){return _P(n,e,1)}function _P(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var ei={},Zt=[],is=new z(""),tm=new z("",-1),nm=new z(""),tc=class{get(e,t=Wi){if(t===Wi){let i=Zb("",-201);throw i.name="\u0275NotFound",i}return t}};function rm(n){return n[Jg]||null}function ti(n){return n[Kg]||null}function im(n){return n[Qg]||null}function nD(n){return n[Yg]||null}function ac(n){return{\u0275providers:n}}function rD(...n){return{\u0275providers:om(!0,n),\u0275fromNgModule:!0}}function om(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Jl(e,s=>{let a=s;Gl(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&iD(i,o),t}function iD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];sm(i,o=>{e(o,r)})}}function Gl(n,e,t,r){if(n=ht(n),!n)return!1;let i=null,o=Ng(n),s=!o&&ti(n);if(!o&&!s){let u=n.ngModule;if(o=Ng(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Gl(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Jl(o.imports,h=>{Gl(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&iD(l,e)}if(!a){let l=Zr(i)||(()=>new i);e({provide:i,useFactory:l,deps:Zt},i),e({provide:nm,useValue:i,multi:!0},i),e({provide:is,useValue:()=>J(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;sm(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function sm(n,e){for(let t of n)Wg(t)&&(t=t.\u0275providers),Array.isArray(t)?sm(t,e):e(t)}var EP=we({provide:String,useValue:we});function oD(n){return n!==null&&typeof n=="object"&&EP in n}function IP(n){return!!(n&&n.useExisting)}function wP(n){return!!(n&&n.useFactory)}function Qi(n){return typeof n=="function"}function sD(n){return!!n.useClass}var cc=new z(""),ql={},Gb={},Mg;function uc(){return Mg===void 0&&(Mg=new tc),Mg}var ft=class{},Yi=class extends ft{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Fg(e,s=>this.processProvider(s)),this.records.set(tm,ts(void 0,this)),i.has("environment")&&this.records.set(ft,ts(void 0,this));let o=this.records.get(cc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nm,Zt,{self:!0}))}retrieve(e,t){let r=Ki(t)||0;try{return this.get(e,Wi,r)}catch(i){if(es(i))return i;throw i}}destroy(){Xa(this),this._destroyed=!0;let e=K(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),K(e)}}onDestroy(e){return Xa(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Xa(this);let t=$n(this),r=Mt(void 0),i;try{return e()}finally{$n(t),Mt(r)}}get(e,t=Wi,r){if(Xa(this),e.hasOwnProperty(zb))return e[zb](this);let i=Ki(r),o,s=$n(this),a=Mt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=SP(e)&&oc(e);h&&this.injectableDefInScope(h)?l=ts(kg(e),ql):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?uc():this.parent;return t=i&8&&t===Wi?null:t,u.get(e,t)}catch(u){let l=fP(u);throw l===-200||l===-201?new $(l,null):u}finally{Mt(a),$n(s)}}resolveInjectorInitializers(){let e=K(null),t=$n(this),r=Mt(void 0),i;try{let o=this.get(is,Zt,{self:!0});for(let s of o)s()}finally{$n(t),Mt(r),K(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Er(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ht(e);let t=Qi(e)?e:ht(e&&e.provide),r=DP(e);if(!Qi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ts(void 0,ql,!0),i.factory=()=>Og(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=K(null);try{if(t.value===Gb)throw Zg(Er(e));return t.value===ql&&(t.value=Gb,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&TP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{K(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function kg(n){let e=oc(n),t=e!==null?e.factory:Zr(n);if(t!==null)return t;if(n instanceof z)throw new $(204,!1);if(n instanceof Function)return bP(n);throw new $(204,!1)}function bP(n){if(n.length>0)throw new $(204,!1);let t=lP(n);return t!==null?()=>t.factory(n):()=>new n}function DP(n){if(oD(n))return ts(void 0,n.useValue);{let e=am(n);return ts(e,ql)}}function am(n,e,t){let r;if(Qi(n)){let i=ht(n);return Zr(i)||kg(i)}else if(oD(n))r=()=>ht(n.useValue);else if(wP(n))r=()=>n.useFactory(...Og(n.deps||[]));else if(IP(n))r=(i,o)=>J(ht(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=ht(n&&(n.useClass||n.provide));if(CP(n))r=()=>new i(...Og(n.deps));else return Zr(i)||kg(i)}return r}function Xa(n){if(n.destroyed)throw new $(205,!1)}function ts(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function CP(n){return!!n.deps}function TP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function SP(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Fg(n,e){for(let t of n)Array.isArray(t)?Fg(t,e):t&&Wg(t)?Fg(t.\u0275providers,e):e(t)}function Nt(n,e){let t;n instanceof Yi?(Xa(n),t=n):t=new Pg(n);let r,i=$n(t),o=Mt(void 0);try{return e()}finally{$n(i),Mt(o)}}function aD(){return Xb()!==void 0||$l()!=null}var Sn=0,Z=1,ee=2,ot=3,ln=4,dn=5,os=6,ss=7,Ue=8,Ir=9,zn=10,Oe=11,as=12,cm=13,Xi=14,Xt=15,eo=16,to=17,no=18,lc=19,um=20,_r=21,Xl=22,dc=23,en=24,ro=25,io=26,tt=27,cD=1,lm=6,ni=7,hc=8,fc=9,Be=10;function Gn(n){return Array.isArray(n)&&typeof n[cD]=="object"}function An(n){return Array.isArray(n)&&n[cD]===!0}function dm(n){return(n.flags&4)!==0}function ri(n){return n.componentOffset>-1}function pc(n){return(n.flags&1)===1}function Wn(n){return!!n.template}function cs(n){return(n[ee]&512)!==0}function oo(n){return(n[ee]&256)===256}var uD="svg",lD="math";function hn(n){for(;Array.isArray(n);)n=n[Sn];return n}function hm(n,e){return hn(e[n])}function Rn(n,e){return hn(e[n.index])}function gc(n,e){return n.data[e]}function dD(n,e){return n[e]}function fm(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function fn(n,e){let t=e[n];return Gn(t)?t:t[Sn]}function ed(n){return(n[ee]&128)===128}function hD(n){return An(n[ot])}function Kn(n,e){return e==null?null:n[e]}function pm(n){n[to]=0}function gm(n){n[ee]&1024||(n[ee]|=1024,ed(n)&&us(n))}function fD(n,e){for(;n>0;)e=e[Xi],n--;return e}function mc(n){return!!(n[ee]&9216||n[en]?.dirty)}function td(n){n[zn].changeDetectionScheduler?.notify(8),n[ee]&64&&(n[ee]|=1024),mc(n)&&us(n)}function us(n){n[zn].changeDetectionScheduler?.notify(0);let e=Xr(n);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!ed(e)));)e=Xr(e)}function mm(n,e){if(oo(n))throw new $(911,!1);n[_r]===null&&(n[_r]=[]),n[_r].push(e)}function pD(n,e){if(n[_r]===null)return;let t=n[_r].indexOf(e);t!==-1&&n[_r].splice(t,1)}function Xr(n){let e=n[ot];return An(e)?e[ot]:e}function gD(n){return n[ss]??=[]}function mD(n){return n.cleanup??=[]}var ue={lFrame:ND(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lg=!1;function yD(){return ue.lFrame.elementDepthCount}function vD(){ue.lFrame.elementDepthCount++}function _D(){ue.lFrame.elementDepthCount--}function ym(){return ue.bindingsEnabled}function ED(){return ue.skipHydrationRootTNode!==null}function ID(n){return ue.skipHydrationRootTNode===n}function wD(){ue.skipHydrationRootTNode=null}function ae(){return ue.lFrame.lView}function pt(){return ue.lFrame.tView}function Qn(n){return ue.lFrame.contextLView=n,n[Ue]}function Yn(n){return ue.lFrame.contextLView=null,n}function xt(){let n=vm();for(;n!==null&&n.type===64;)n=n.parent;return n}function vm(){return ue.lFrame.currentTNode}function bD(){let n=ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ls(n,e){let t=ue.lFrame;t.currentTNode=n,t.isParent=e}function _m(){return ue.lFrame.isParent}function DD(){ue.lFrame.isParent=!1}function Em(){return Lg}function Im(n){let e=Lg;return Lg=n,e}function nd(){let n=ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function rd(){return ue.lFrame.bindingIndex}function CD(n){return ue.lFrame.bindingIndex=n}function so(){return ue.lFrame.bindingIndex++}function yc(n){let e=ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function TD(){return ue.lFrame.inI18n}function SD(n,e){let t=ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,id(e)}function AD(){return ue.lFrame.currentDirectiveIndex}function id(n){ue.lFrame.currentDirectiveIndex=n}function RD(n){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function wm(n){ue.lFrame.currentQueryIndex=n}function AP(n){let e=n[Z];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function bm(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=AP(o),i===null||(o=o[Xi],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ue.lFrame=MD();return r.currentTNode=e,r.lView=n,!0}function od(n){let e=MD(),t=n[Z];ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function MD(){let n=ue.lFrame,e=n===null?null:n.child;return e===null?ND(n):e}function ND(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xD(){let n=ue.lFrame;return ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Dm=xD;function sd(){let n=xD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function PD(n){return(ue.lFrame.contextLView=fD(n,ue.lFrame.contextLView))[Ue]}function Mn(){return ue.lFrame.selectedIndex}function ii(n){ue.lFrame.selectedIndex=n}function ad(){let n=ue.lFrame;return gc(n.tView,n.selectedIndex)}function OD(){return ue.lFrame.currentNamespace}var kD=!0;function cd(){return kD}function ud(n){kD=n}function Vg(n,e=null,t=null,r){let i=Cm(n,e,t,r);return i.resolveInjectorInitializers(),i}function Cm(n,e=null,t=null,r,i=new Set){let o=[t||Zt,rD(n)];return r=r||(typeof n=="object"?void 0:Er(n)),new Yi(o,e||uc(),r||null,i)}var cn=class n{static THROW_IF_NOT_FOUND=Wi;static NULL=new tc;static create(e,t){if(Array.isArray(e))return Vg({name:""},t,e,"");{let r=e.name??"";return Vg({name:r},e.parent,e.providers,r)}}static \u0275prov=q({token:n,providedIn:"any",factory:()=>J(tm)});static __NG_ELEMENT_ID__=-1},gt=new z(""),wr=(()=>{class n{static __NG_ELEMENT_ID__=RP;static __NG_ENV_ID__=t=>t}return n})(),jg=class extends wr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return oo(this._lView)}onDestroy(e){let t=this._lView;return mm(t,e),()=>pD(t,e)}};function RP(){return new jg(ae())}var FD=!1,oi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Pe(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new me(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ug=class extends et{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,aD()&&(this.destroyRef=L(wr,{optional:!0})??void 0,this.pendingTasks=L(oi,{optional:!0})??void 0)}emit(e){let t=K(null);try{super.next(e)}finally{K(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof dt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},je=Ug;function Wl(...n){}function Tm(n){let e,t;function r(){n=Wl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Sm(n){return queueMicrotask(()=>n()),()=>{n=Wl}}var Am="isAngularZone",nc=Am+"_ID",MP=0,$t=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new je(!1);onMicrotaskEmpty=new je(!1);onStable=new je(!1);onError=new je(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=FD}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,PP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Am)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new $(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,NP,Wl,Wl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},NP={};function Rm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xP(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Tm(()=>{n.callbackScheduled=!1,Bg(n),n.isCheckStableRunning=!0,Rm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Bg(n)}function PP(n){let e=()=>{xP(n)},t=MP++;n._inner=n._inner.fork({name:"angular",properties:{[Am]:!0,[nc]:t,[nc+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(OP(u))return r.invokeTask(o,s,a,u);try{return Wb(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Kb(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Wb(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!kP(u)&&e(),Kb(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Bg(n),Rm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Bg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Wb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Kb(n){n._nesting--,Rm(n)}var rc=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new je;onMicrotaskEmpty=new je;onStable=new je;onError=new je;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function OP(n){return LD(n,"__ignore_ng_zone__")}function kP(n){return LD(n,"__scheduler_tick__")}function LD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var qn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},pn=new z("",{factory:()=>{let n=L($t),e=L(ft),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(qn),t.handleError(r))})}}}),VD={provide:is,useValue:()=>{let n=L(qn,{optional:!0})},multi:!0};function qt(n,e){let[t,r,i]=fg(n,e?.equal),o=t,s=o[St];return o.set=r,o.update=i,o.asReadonly=jD.bind(o),o}function jD(){let n=this[St];if(n.readonlyFn===void 0){let e=()=>this();e[St]=n,n.readonlyFn=e}return n.readonlyFn}var ld=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=FP}return n})();function FP(){return new ld(ae(),xt())}var Ji=class{},vc=new z("",{factory:()=>!0});var Mm=new z("");var Nm=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>new Hg})}return n})(),Hg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},$g=class{[St];constructor(e){this[St]=e}destroy(){this[St].destroy()}};function He(n){return pg(n)}function Sc(n){return{toString:n}.toString()}function zP(n){return typeof n=="function"}function pC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var md=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Xn=(()=>{let n=()=>gC;return n.ngInherit=!0,n})();function gC(n){return n.type.prototype.ngOnChanges&&(n.setInput=WP),GP}function GP(){let n=yC(this),e=n?.current;if(e){let t=n.previous;if(t===ei)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function WP(n,e,t,r,i){let o=this.declaredInputs[r],s=yC(n)||KP(n,{previous:ei,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new md(l&&l.currentValue,t,u===ei),pC(n,e,i,t)}var mC="__ngSimpleChanges__";function yC(n){return n[mC]||null}function KP(n,e){return n[mC]=e}var UD=[];var be=function(n,e=null,t){for(let r=0;r<UD.length;r++){let i=UD[r];i(n,e,t)}},ve=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(ve||{});function QP(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=gC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function vC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function fd(n,e,t){_C(n,e,3,t)}function pd(n,e,t,r){(n[ee]&3)===t&&_C(n,e,t,r)}function xm(n,e){let t=n[ee];(t&3)===e&&(t&=16383,t+=1,n[ee]=t)}function _C(n,e,t,r){let i=r!==void 0?n[to]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[to]+=65536),(a<o||o==-1)&&(YP(n,t,e,u),n[to]=(n[to]&4294901760)+u+2),u++}function BD(n,e){be(ve.LifecycleHookStart,n,e);let t=K(null);try{e.call(n)}finally{K(t),be(ve.LifecycleHookEnd,n,e)}}function YP(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ee]>>14<n[to]>>16&&(n[ee]&3)===e&&(n[ee]+=16384,BD(a,o)):BD(a,o)}var hs=-1,co=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function JP(n){return(n.flags&8)!==0}function ZP(n){return(n.flags&16)!==0}function XP(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];e1(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function EC(n){return n===3||n===4||n===6}function e1(n){return n.charCodeAt(0)===64}function Ic(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?HD(n,t,i,null,e[++r]):HD(n,t,i,null,null))}}return n}function HD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function IC(n){return n!==hs}function yd(n){return n&32767}function t1(n){return n>>16}function vd(n,e){let t=t1(n),r=e;for(;t>0;)r=r[Xi],t--;return r}var $m=!0;function _d(n){let e=$m;return $m=n,e}var n1=256,wC=n1-1,bC=5,r1=0,Jn={};function i1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Zi)&&(r=t[Zi]),r==null&&(r=t[Zi]=r1++);let i=r&wC,o=1<<i;e.data[n+(i>>bC)]|=o}function Ed(n,e){let t=DC(n,e);if(t!==-1)return t;let r=e[Z];r.firstCreatePass&&(n.injectorIndex=e.length,Pm(r.data,n),Pm(e,null),Pm(r.blueprint,null));let i=hy(n,e),o=n.injectorIndex;if(IC(i)){let s=yd(i),a=vd(i,e),u=a[Z].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Pm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function DC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function hy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=RC(i),r===null)return hs;if(t++,i=i[Xi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return hs}function qm(n,e,t){i1(n,e,t)}function o1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(EC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function CC(n,e,t){if(t&8||n!==void 0)return n;Yl(e,"NodeInjector")}function TC(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ir],o=Mt(void 0);try{return i?i.get(e,r,t&8):Xg(e,r,t&8)}finally{Mt(o)}}return CC(r,e,t)}function SC(n,e,t,r=0,i){if(n!==null){if(e[ee]&2048&&!(r&2)){let s=l1(n,e,t,r,Jn);if(s!==Jn)return s}let o=AC(n,e,t,r,Jn);if(o!==Jn)return o}return TC(e,t,r,i)}function AC(n,e,t,r,i){let o=c1(t);if(typeof o=="function"){if(!bm(e,n,r))return r&1?CC(i,t,r):TC(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Yl(t);else return s}finally{Dm()}}else if(typeof o=="number"){let s=null,a=DC(n,e),u=hs,l=r&1?e[Xt][dn]:null;for((a===-1||r&4)&&(u=a===-1?hy(n,e):e[a+8],u===hs||!qD(r,!1)?a=-1:(s=e[Z],a=yd(u),e=vd(u,e)));a!==-1;){let h=e[Z];if($D(o,a,h.data)){let p=s1(a,e,t,s,r,l);if(p!==Jn)return p}u=e[a+8],u!==hs&&qD(r,e[Z].data[a+8]===l)&&$D(o,a,e)?(s=h,a=yd(u),e=vd(u,e)):a=-1}}return i}function s1(n,e,t,r,i,o){let s=e[Z],a=s.data[n+8],u=r==null?ri(a)&&$m:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=a1(a,s,t,u,l);return h!==null?Id(e,s,h,a,i):Jn}function a1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let R=s[y];if(y<u&&t===R||y>=u&&R.type===t)return y}if(i){let y=s[u];if(y&&Wn(y)&&y.type===t)return u}return null}function Id(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof co){let a=o;if(a.resolving){let y=Yb(s[t]);throw Zg(y)}let u=_d(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?Mt(a.injectImpl):null,m=bm(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&QP(t,s[t],e)}finally{p!==null&&Mt(p),_d(u),a.resolving=!1,Dm()}}return o}function c1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Zi)?n[Zi]:void 0;return typeof e=="number"?e>=0?e&wC:u1:e}function $D(n,e,t){let r=1<<n;return!!(t[e+(n>>bC)]&r)}function qD(n,e){return!(n&2)&&!(n&1&&e)}var ao=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return SC(this._tNode,this._lView,e,Ki(r),t)}};function u1(){return new ao(xt(),ae())}function On(n){return Sc(()=>{let e=n.prototype.constructor,t=e[ec]||zm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ec]||zm(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function zm(n){return zg(n)?()=>{let e=zm(ht(n));return e&&e()}:Zr(n)}function l1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ee]&2048&&!cs(s);){let a=AC(o,s,t,r|2,Jn);if(a!==Jn)return a;let u=o.parent;if(!u){let l=s[um];if(l){let h=l.get(t,Jn,r);if(h!==Jn)return h}u=RC(s),s=s[Xi]}o=u}return i}function RC(n){let e=n[Z],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function Ac(n){return o1(xt(),n)}function d1(){return Od(xt(),ae())}function Od(n,e){return new er(Rn(n,e))}var er=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=d1}return n})();function MC(n){return(n.flags&128)===128}var fy=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(fy||{}),NC=new Map,h1=0;function f1(){return h1++}function p1(n){NC.set(n[lc],n)}function Gm(n){NC.delete(n[lc])}var zD="__ngContext__";function fs(n,e){Gn(e)?(n[zD]=e[lc],p1(e)):n[zD]=e}function xC(n){return OC(n[as])}function PC(n){return OC(n[ln])}function OC(n){for(;n!==null&&!An(n);)n=n[ln];return n}var g1;function py(n){g1=n}var kd=new z("",{factory:()=>m1}),m1="ng";var Fd=new z(""),Rc=new z("",{providedIn:"platform",factory:()=>"unknown"});var Ld=new z("",{factory:()=>L(gt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var kC="r";var FC="di";var LC=!1,VC=new z("",{factory:()=>LC});var y1=(n,e,t,r)=>{};function v1(n,e,t,r){y1(n,e,t,r)}function gy(n){return(n.flags&32)===32}var _1=()=>null;function jC(n,e,t=!1){return _1(n,e,t)}function UC(n,e){let t=n.contentQueries;if(t!==null){let r=K(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];wm(o),a.contentQueries(2,e[s],s)}}}finally{K(r)}}}function Wm(n,e,t){wm(0);let r=K(null);try{e(n,t)}finally{K(r)}}function BC(n,e,t){if(dm(e)){let r=K(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{K(r)}}}var xn=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(xn||{});var dd;function E1(){if(dd===void 0&&(dd=null,ic.trustedTypes))try{dd=ic.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return dd}function GD(n){return E1()?.createScriptURL(n)||n}var wd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Kl})`}};function Vd(n){return n instanceof wd?n.changingThisBreaksApplicationSecurity:n}function my(n,e){let t=HC(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Kl})`)}return t===e}function HC(n){return n instanceof wd&&n.getTypeName()||null}var I1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function $C(n){return n=String(n),n.match(I1)?n:"unsafe:"+n}function w1(n,e){return n.createText(e)}function b1(n,e,t){n.setValue(e,t)}function qC(n,e,t){return n.createElement(e,t)}function bd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function zC(n,e,t){n.appendChild(e,t)}function WD(n,e,t,r,i){r!==null?bd(n,e,t,r,i):zC(n,e,t)}function GC(n,e,t,r){n.removeChild(null,e,t,r)}function D1(n,e,t){n.setAttribute(e,"style",t)}function C1(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function WC(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&XP(n,e,r),i!==null&&C1(n,e,i),o!==null&&D1(n,e,o)}var jd=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(jd||{});function KC(n){let e=YC();return e?e.sanitize(jd.URL,n)||"":my(n,"URL")?Vd(n):$C(_t(n))}function QC(n){let e=YC();if(e)return GD(e.sanitize(jd.RESOURCE_URL,n)||"");if(my(n,"ResourceURL"))return GD(Vd(n));throw new $(904,!1)}function T1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?QC:KC}function yy(n,e,t){return T1(e,t)(n)}function YC(){let n=ae();return n&&n[zn].sanitizer}function JC(n){return n instanceof Function?n():n}function S1(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var ZC="ng-template";function A1(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&S1(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(vy(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function vy(n){return n.type===4&&n.value!==ZC}function R1(n,e,t){let r=n.type===4&&!t?ZC:n.value;return e===r}function M1(n,e,t){let r=4,i=n.attrs,o=i!==null?P1(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Nn(r)&&!Nn(u))return!1;if(s&&Nn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!R1(n,u,t)||u===""&&e.length===1){if(Nn(r))return!1;s=!0}}else if(r&8){if(i===null||!A1(n,i,u,t)){if(Nn(r))return!1;s=!0}}else{let l=e[++a],h=N1(u,i,vy(n),t);if(h===-1){if(Nn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Nn(r))return!1;s=!0}}}}return Nn(r)||s}function Nn(n){return(n&1)===0}function N1(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return O1(e,n)}function x1(n,e,t=!1){for(let r=0;r<e.length;r++)if(M1(n,e[r],t))return!0;return!1}function P1(n){for(let e=0;e<n.length;e++){let t=n[e];if(EC(t))return e}return n.length}function O1(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function KD(n,e){return n?":not("+e.trim()+")":e}function k1(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Nn(s)&&(e+=KD(o,i),i=""),r=s,o=o||!Nn(r);t++}return i!==""&&(e+=KD(o,i)),e}function F1(n){return n.map(k1).join(",")}function L1(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Nn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var mt={};function _y(n,e,t,r,i,o,s,a,u,l,h){let p=tt+r,m=p+i,y=V1(p,m),R=typeof l=="function"?l():l;return y[Z]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:R,incompleteFirstPass:!1,ssrId:h}}function V1(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:mt);return t}function j1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=_y(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ey(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Sn]=i,p[ee]=r|4|128|8|64|1024,(l!==null||n&&n[ee]&2048)&&(p[ee]|=2048),pm(p),p[ot]=p[Xi]=n,p[Ue]=t,p[zn]=s||n&&n[zn],p[Oe]=a||n&&n[Oe],p[Ir]=u||n&&n[Ir]||null,p[dn]=o,p[lc]=f1(),p[os]=h,p[um]=l,p[Xt]=e.type==2?n[Xt]:p,p}function U1(n,e,t){let r=Rn(e,n),i=j1(t),o=n[zn].rendererFactory,s=Iy(n,Ey(n,i,null,XC(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function XC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function e0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Iy(n,e){return n[as]?n[cm][ln]=e:n[as]=e,n[cm]=e,e}function x(n=1){t0(pt(),ae(),Mn()+n,!1)}function t0(n,e,t,r){if(!r)if((e[ee]&3)===3){let o=n.preOrderCheckHooks;o!==null&&fd(e,o,t)}else{let o=n.preOrderHooks;o!==null&&pd(e,o,0,t)}ii(t)}var Ud=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Ud||{});function Km(n,e,t,r){let i=K(null);try{let[o,s,a]=n.inputs[t],u=null;(s&Ud.SignalBased)!==0&&(u=e[o][St]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):pC(e,u,o,r)}finally{K(i)}}var Zn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Zn||{}),B1;function wy(n,e){return B1(n,e)}var uo=new Set,Bd=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Bd||{}),po=new z(""),QD=new Set;function ai(n){QD.has(n)||(QD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var by=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),n0=[0,1,2,3],r0=(()=>{class n{ngZone=L($t);scheduler=L(Ji);errorHandler=L(qn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){L(po,{optional:!0})}execute(){let t=this.sequences.size>0;t&&be(ve.AfterRenderHooksStart),this.executing=!0;for(let r of n0)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&be(ve.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[ro]??=[]).push(t),us(r),r[ee]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Bd.AFTER_NEXT_RENDER,t):t()}static \u0275prov=q({token:n,providedIn:"root",factory:()=>new n})}return n})(),Dd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[ro];e&&(this.view[ro]=e.filter(t=>t!==this))}};function Hd(n,e){let t=e?.injector??L(cn);return ai("NgAfterNextRender"),$1(n,t,e,!0)}function H1(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function $1(n,e,t,r){let i=e.get(by);i.impl??=e.get(r0);let o=e.get(po,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(wr):null,a=e.get(ld,null,{optional:!0}),u=new Dd(i.impl,H1(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var i0=new z("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function o0(n,e,t){let r=n.get(i0);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function q1(n,e){let t=n.get(i0);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function z1(n,e){for(let[t,r]of e)o0(n,r.animateFns)}function YD(n,e,t,r){let i=n?.[io]?.enter;e!==null&&i&&i.has(t.index)&&z1(r,i)}function ds(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;An(i)?u=i:Gn(i)&&(l=!0,i=i[Sn]);let h=hn(i);n===0&&r!==null?(YD(a,r,o,t),s==null?zC(e,r,h):bd(e,r,h,s||null,!0)):n===1&&r!==null?(YD(a,r,o,t),bd(e,r,h,s||null,!0)):n===2?JD(a,o,t,p=>{GC(e,h,l,p)}):n===3&&JD(a,o,t,()=>{e.destroyNode(h)}),u!=null&&iO(e,n,t,u,o,r,s)}}function G1(n,e){s0(n,e),e[Sn]=null,e[dn]=null}function W1(n,e,t,r,i,o){r[Sn]=i,r[dn]=e,qd(n,r,t,1,i,o)}function s0(n,e){e[zn].changeDetectionScheduler?.notify(9),qd(n,e,e[Oe],2,null,null)}function K1(n){let e=n[as];if(!e)return Om(n[Z],n);for(;e;){let t=null;if(Gn(e))t=e[as];else{let r=e[Be];r&&(t=r)}if(!t){for(;e&&!e[ln]&&e!==n;)Gn(e)&&Om(e[Z],e),e=e[ot];e===null&&(e=n),Gn(e)&&Om(e[Z],e),t=e&&e[ln]}e=t}}function Dy(n,e){let t=n[fc],r=t.indexOf(e);t.splice(r,1)}function $d(n,e){if(oo(e))return;let t=e[Oe];t.destroyNode&&qd(n,e,t,3,null,null),K1(e)}function Om(n,e){if(oo(e))return;let t=K(null);try{e[ee]&=-129,e[ee]|=256,e[en]&&Ga(e[en]),J1(n,e),Y1(n,e),e[Z].type===1&&e[Oe].destroy();let r=e[eo];if(r!==null&&An(e[ot])){r!==e[ot]&&Dy(r,e);let i=e[no];i!==null&&i.detachView(n)}Gm(e)}finally{K(t)}}function JD(n,e,t,r){let i=n?.[io];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&uo.add(n),o0(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),Q1(n,r)}else n&&uo.delete(n),r(!1)},i)}function Q1(n,e){let t=n[io]?.running;if(t){t.then(()=>{n[io].running=void 0,uo.delete(n),e(!0)});return}e(!1)}function Y1(n,e){let t=n.cleanup,r=e[ss];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[ss]=null);let i=e[_r];if(i!==null){e[_r]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[dc];if(o!==null){e[dc]=null;for(let s of o)s.destroy()}}function J1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof co)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];be(ve.LifecycleHookStart,a,u);try{u.call(a)}finally{be(ve.LifecycleHookEnd,a,u)}}else{be(ve.LifecycleHookStart,i,o);try{o.call(i)}finally{be(ve.LifecycleHookEnd,i,o)}}}}}function Z1(n,e,t){return X1(n,e.parent,t)}function X1(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Sn];if(ri(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===xn.None||i===xn.Emulated)return null}return Rn(r,t)}function eO(n,e,t){return nO(n,e,t)}function tO(n,e,t){return n.type&40?Rn(n,t):null}var nO=tO,ZD;function Cy(n,e,t,r){let i=Z1(n,r,e),o=e[Oe],s=r.parent||e[dn],a=eO(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)WD(o,i,t[u],a,!1);else WD(o,i,t,a,!1);ZD!==void 0&&ZD(o,r,e,t,i)}function _c(n,e){if(e!==null){let t=e.type;if(t&3)return Rn(e,n);if(t&4)return Qm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return _c(n,r);{let i=n[e.index];return An(i)?Qm(-1,i):hn(i)}}else{if(t&128)return _c(n,e.next);if(t&32)return wy(e,n)()||hn(n[e.index]);{let r=a0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Xr(n[Xt]);return _c(i,r)}else return _c(n,e.next)}}}return null}function a0(n,e){if(e!==null){let r=n[Xt][dn],i=e.projection;return r.projection[i]}return null}function Qm(n,e){let t=Be+n+1;if(t<e.length){let r=e[t],i=r[Z].firstChild;if(i!==null)return _c(r,i)}return e[ni]}function Ty(n,e,t,r,i,o,s){for(;t!=null;){let a=r[Ir];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&fs(hn(u),r),t.flags|=2),!gy(t))if(l&8)Ty(n,e,t.child,r,i,o,!1),ds(e,n,a,i,u,t,o,r);else if(l&32){let h=wy(t,r),p;for(;p=h();)ds(e,n,a,i,p,t,o,r);ds(e,n,a,i,u,t,o,r)}else l&16?rO(n,e,r,t,i,o):ds(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function qd(n,e,t,r,i,o){Ty(t,r,n.firstChild,e,i,o,!1)}function rO(n,e,t,r,i,o){let s=t[Xt],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ds(e,n,t[Ir],i,h,r,o,t)}else{let l=u,h=s[ot];MC(r)&&(l.flags|=128),Ty(n,e,l,h,i,o,!0)}}function iO(n,e,t,r,i,o,s){let a=r[ni],u=hn(r);a!==u&&ds(e,n,t,o,a,i,s);for(let l=Be;l<r.length;l++){let h=r[l];qd(h[Z],h,n,e,o,a)}}function oO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Zn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Zn.Important),n.setStyle(t,r,i,o))}}function c0(n,e,t,r,i){let o=Mn(),s=r&2;try{ii(-1),s&&e.length>tt&&t0(n,e,tt,!1);let a=s?ve.TemplateUpdateStart:ve.TemplateCreateStart;be(a,i,t),t(r,i)}finally{ii(o);let a=s?ve.TemplateUpdateEnd:ve.TemplateCreateEnd;be(a,i,t)}}function Sy(n,e,t){hO(n,e,t),(t.flags&64)===64&&fO(n,e,t)}function Ay(n,e,t=Rn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function sO(n,e,t,r){let o=r.get(VC,LC)||t===xn.ShadowDom||t===xn.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return aO(s),s}function aO(n){cO(n)}var cO=()=>null;function uO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function u0(n,e,t,r,i,o){let s=e[Z];if(Ry(n,s,e,t,r)){ri(n)&&dO(e,n.index);return}n.type&3&&(t=uO(t)),lO(n,e,t,r,i,o)}function lO(n,e,t,r,i,o){if(n.type&3){let s=Rn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function dO(n,e){let t=fn(e,n);t[ee]&16||(t[ee]|=64)}function hO(n,e,t){let r=t.directiveStart,i=t.directiveEnd;ri(t)&&U1(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||Ed(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=Id(e,n,s,t);if(fs(u,e),o!==null&&yO(e,s-r,u,a,t,o),Wn(a)){let l=fn(t.index,e);l[Ue]=Id(e,n,s,t)}}}function fO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=AD();try{ii(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];id(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&pO(u,l)}}finally{ii(-1),id(s)}}function pO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function l0(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];x1(e,o.selectors,!1)&&(r??=[],Wn(o)?r.unshift(o):r.push(o))}return r}function gO(n,e,t,r,i,o){let s=Rn(n,e);mO(e[Oe],s,o,n.value,t,r,i)}function mO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?_t(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function yO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Km(r,t,u,l)}}function vO(n,e,t,r,i){let o=tt+t,s=e[Z],a=i(s,e,n,r,t);e[o]=a,ls(n,!0);let u=n.type===2;return u?(WC(e[Oe],a,n),(yD()===0||pc(n))&&fs(a,e),vD()):fs(a,e),cd()&&(!u||!gy(n))&&Cy(s,e,a,n),n}function _O(n){let e=n;return _m()?DD():(e=e.parent,ls(e,!1)),e}function EO(n,e){let t=n[Ir];if(!t)return;let r;try{r=t.get(pn,null)}catch{r=null}r?.(e)}function Ry(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Km(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];Km(h,l,r,i),a=!0}return a}function IO(n,e){let t=fn(e,n),r=t[Z];wO(r,t);let i=t[Sn];i!==null&&t[os]===null&&(t[os]=jC(i,t[Ir])),be(ve.ComponentStart);try{My(r,t,t[Ue])}finally{be(ve.ComponentEnd,t[Ue])}}function wO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function My(n,e,t){od(e);try{let r=n.viewQuery;r!==null&&Wm(1,r,t);let i=n.template;i!==null&&c0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[no]?.finishViewCreation(n),n.staticContentQueries&&UC(n,e),n.staticViewQueries&&Wm(2,n.viewQuery,t);let o=n.components;o!==null&&bO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ee]&=-5,sd()}}function bO(n,e){for(let t=0;t<e.length;t++)IO(n,e[t])}function zd(n,e,t,r){let i=K(null);try{let o=e.tView,a=n[ee]&4096?4096:16,u=Ey(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[eo]=l;let h=n[no];return h!==null&&(u[no]=h.createEmbeddedView(o)),My(o,u,t),u}finally{K(i)}}function wc(n,e){return!e||e.firstChild===null||MC(n)}function bc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(hn(o)),An(o)&&d0(o,r);let s=t.type;if(s&8)bc(n,e,t.child,r);else if(s&32){let a=wy(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=a0(e,t);if(Array.isArray(a))r.push(...a);else{let u=Xr(e[Xt]);bc(u[Z],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function d0(n,e){for(let t=Be;t<n.length;t++){let r=n[t],i=r[Z].firstChild;i!==null&&bc(r[Z],r,i,e)}n[ni]!==n[Sn]&&e.push(n[ni])}function h0(n){if(n[ro]!==null){for(let e of n[ro])e.impl.addSequence(e);n[ro].length=0}}var f0=[];function DO(n){return n[en]??CO(n)}function CO(n){let e=f0.pop()??Object.create(SO);return e.lView=n,e}function TO(n){n.lView[en]!==n&&(n.lView=null,f0.push(n))}var SO=Y(O({},$a),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{us(n.lView)},consumerOnSignalRead(){this.lView[en]=this}});function AO(n){let e=n[en]??Object.create(RO);return e.lView=n,e}var RO=Y(O({},$a),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Xr(n.lView);for(;e&&!p0(e[Z]);)e=Xr(e);e&&gm(e)},consumerOnSignalRead(){this.lView[en]=this}});function p0(n){return n.type!==2}function g0(n){if(n[dc]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[dc])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ee]&8192)}}var MO=100;function m0(n,e=0){let r=n[zn].rendererFactory,i=!1;i||r.begin?.();try{NO(n,e)}finally{i||r.end?.()}}function NO(n,e){let t=Em();try{Im(!0),Ym(n,e);let r=0;for(;mc(n);){if(r===MO)throw new $(103,!1);r++,Ym(n,1)}}finally{Im(t)}}function xO(n,e,t,r){if(oo(e))return;let i=e[ee],o=!1,s=!1;od(e);let a=!0,u=null,l=null;o||(p0(n)?(l=DO(e),u=za(l)):pl()===null?(a=!1,l=AO(e),u=za(l)):e[en]&&(Ga(e[en]),e[en]=null));try{pm(e),CD(n.bindingStartIndex),t!==null&&c0(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&fd(e,y,null)}else{let y=n.preOrderHooks;y!==null&&pd(e,y,0,null),xm(e,0)}if(s||PO(e),g0(e),y0(e,0),n.contentQueries!==null&&UC(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&fd(e,y)}else{let y=n.contentHooks;y!==null&&pd(e,y,1),xm(e,1)}kO(n,e);let p=n.components;p!==null&&_0(e,p,0);let m=n.viewQuery;if(m!==null&&Wm(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&fd(e,y)}else{let y=n.viewHooks;y!==null&&pd(e,y,2),xm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Xl]){for(let y of e[Xl])y();e[Xl]=null}o||(h0(e),e[ee]&=-73)}catch(h){throw o||us(e),h}finally{l!==null&&(gl(l,u),a&&TO(l)),sd()}}function y0(n,e){for(let t=xC(n);t!==null;t=PC(t))for(let r=Be;r<t.length;r++){let i=t[r];v0(i,e)}}function PO(n){for(let e=xC(n);e!==null;e=PC(e)){if(!(e[ee]&2))continue;let t=e[fc];for(let r=0;r<t.length;r++){let i=t[r];gm(i)}}}function OO(n,e,t){be(ve.ComponentStart);let r=fn(e,n);try{v0(r,t)}finally{be(ve.ComponentEnd,r[Ue])}}function v0(n,e){ed(n)&&Ym(n,e)}function Ym(n,e){let r=n[Z],i=n[ee],o=n[en],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&ml(o)),s||=!1,o&&(o.dirty=!1),n[ee]&=-9217,s)xO(r,n,r.template,n[Ue]);else if(i&8192){let a=K(null);try{g0(n),y0(n,1);let u=r.components;u!==null&&_0(n,u,1),h0(n)}finally{K(a)}}}function _0(n,e,t){for(let r=0;r<e.length;r++)OO(n,e[r],t)}function kO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)ii(~i);else{let o=i,s=t[++r],a=t[++r];SD(s,o);let u=e[o];be(ve.HostBindingsUpdateStart,u);try{a(2,u)}finally{be(ve.HostBindingsUpdateEnd,u)}}}}finally{ii(-1)}}function Ny(n,e){let t=Em()?64:1088;for(n[zn].changeDetectionScheduler?.notify(e);n;){n[ee]|=t;let r=Xr(n);if(cs(n)&&!r)return n;n=r}return null}function E0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function I0(n,e){let t=Be+e;if(t<n.length)return n[t]}function Gd(n,e,t,r=!0){let i=e[Z];if(FO(i,e,n,t),r){let s=Qm(t,n),a=e[Oe],u=a.parentNode(n[ni]);u!==null&&W1(i,n[dn],a,e,u,s)}let o=e[os];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function w0(n,e){let t=Dc(n,e);return t!==void 0&&$d(t[Z],t),t}function Dc(n,e){if(n.length<=Be)return;let t=Be+e,r=n[t];if(r){let i=r[eo];i!==null&&i!==n&&Dy(i,r),e>0&&(n[t-1][ln]=r[ln]);let o=sc(n,Be+e);G1(r[Z],r);let s=o[no];s!==null&&s.detachView(o[Z]),r[ot]=null,r[ln]=null,r[ee]&=-129}return r}function FO(n,e,t,r){let i=Be+r,o=t.length;r>0&&(t[i-1][ln]=e),r<o-Be?(e[ln]=t[i],em(t,Be+r,e)):(t.push(e),e[ln]=null),e[ot]=t;let s=e[eo];s!==null&&t!==s&&b0(s,e);let a=e[no];a!==null&&a.insertView(n),td(e),e[ee]|=128}function b0(n,e){let t=n[fc],r=e[ot];if(Gn(r))n[ee]|=2;else{let i=r[ot][Xt];e[Xt]!==i&&(n[ee]|=2)}t===null?n[fc]=[e]:t.push(e)}var si=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[Z];return bc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ue]}set context(e){this._lView[Ue]=e}get destroyed(){return oo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ot];if(An(e)){let t=e[hc],r=t?t.indexOf(this):-1;r>-1&&(Dc(e,r),sc(t,r))}this._attachedToViewContainer=!1}$d(this._lView[Z],this._lView)}onDestroy(e){mm(this._lView,e)}markForCheck(){Ny(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ee]&=-129}reattach(){td(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,m0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=cs(this._lView),t=this._lView[eo];t!==null&&!e&&Dy(t,this._lView),s0(this._lView[Z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let t=cs(this._lView),r=this._lView[eo];r!==null&&!t&&b0(r,this._lView),td(this._lView)}};var Mc=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=LO;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=zd(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new si(o)}}return n})();function LO(){return VO(xt(),ae())}function VO(n,e){return n.type&4?new Mc(e,n,Od(n,e)):null}function Wd(n,e,t,r,i){let o=n.data[e];if(o===null)o=jO(n,e,t,r,i),TD()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=bD();o.injectorIndex=s===null?-1:s.injectorIndex}return ls(o,!0),o}function jO(n,e,t,r,i){let o=vm(),s=_m(),a=s?o:o&&o.parent,u=n.data[e]=BO(n,a,t,e,r,i);return UO(n,u,o,s),u}function UO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function BO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return ED()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function HO(n){let e=n[lm]??[],r=n[ot][Oe],i=[];for(let o of e)o.data[FC]!==void 0?i.push(o):$O(o,r);n[lm]=i}function $O(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[kC];for(;t<i;){let o=r.nextSibling;GC(e,r,!1),r=o,t++}}}var qO=()=>null,zO=()=>null;function Jm(n,e){return qO(n,e)}function D0(n,e,t){return zO(n,e,t)}var C0=class{},Kd=class{},Zm=class{resolveComponentFactory(e){throw new $(917,!1)}},Nc=class{static NULL=new Zm},lo=class{},br=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>GO()}return n})();function GO(){let n=ae(),e=xt(),t=fn(e.index,n);return(Gn(t)?t:n)[Oe]}var T0=(()=>{class n{static \u0275prov=q({token:n,providedIn:"root",factory:()=>null})}return n})();var gd={},Xm=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,gd,r);return i!==gd||t===gd?i:this.parentInjector.get(e,t,r)}};function XD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qg(i,a);else if(o==2){let u=a,l=e[++s];r=qg(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function U(n,e=0){let t=ae();if(t===null)return J(n,e);let r=xt();return SC(r,t,ht(n),e)}function S0(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}QO(n,e,t,a,o,u,l)}o!==null&&r!==null&&WO(t,r,o)}function WO(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function KO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function QO(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&Wn(y)&&(u=!0,KO(n,t,m)),qm(Ed(t,e),n,y.type)}tk(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=e0(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=Ic(t.mergedAttrs,y.hostAttrs),JO(n,t,e,p,y),ek(p,y,i),s!==null&&s.has(y)){let[P,N]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,N+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let R=y.type.prototype;!l&&(R.ngOnChanges||R.ngOnInit||R.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(R.ngOnChanges||R.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}YO(n,t,o)}function YO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))eC(0,e,i,r),eC(1,e,i,r),nC(e,r,!1);else{let o=t.get(i);tC(0,e,o,r),tC(1,e,o,r),nC(e,r,!0)}}}function eC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),A0(e,o)}}function tC(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),A0(e,s)}}function A0(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function nC(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||vy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function JO(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Zr(i.type,!0)),s=new co(o,Wn(i),U,null);n.blueprint[r]=s,t[r]=s,ZO(n,e,r,e0(n,t,i.hostVars,mt),i)}function ZO(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;XO(s)!=a&&s.push(a),s.push(t,r,o)}}function XO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ek(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Wn(e)&&(t[""]=n)}}function tk(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function R0(n,e,t,r,i,o,s,a){let u=e[Z],l=u.consts,h=Kn(l,s),p=Wd(u,n,t,r,h);return o&&S0(u,e,p,Kn(l,a),i),p.mergedAttrs=Ic(p.mergedAttrs,p.attrs),p.attrs!==null&&XD(p,p.attrs,!1),p.mergedAttrs!==null&&XD(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function M0(n,e){vC(n,e),dm(e)&&n.queries.elementEnd(e)}function xy(n){return x0(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function N0(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function x0(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function P0(n,e,t){return n[e]=t}function nk(n,e){return n[e]}function Pn(n,e,t){if(t===mt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function ey(n,e,t,r){let i=Pn(n,e,t);return Pn(n,e+1,r)||i}function O0(n,e,t,r,i,o){let s=ey(n,e,t,r);return ey(n,e+2,i,o)||s}function km(n,e,t){return function r(i){let o=ri(n)?fn(n.index,e):e;Ny(o,5);let s=e[Ue],a=rC(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=rC(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function rC(n,e,t,r){let i=K(null);try{return be(ve.OutputStart,e,t),t(r)!==!1}catch(o){return EO(n,o),!1}finally{be(ve.OutputEnd,e,t),K(i)}}function rk(n,e,t,r,i,o,s,a){let u=pc(n),l=!1,h=null;if(!r&&u&&(h=ok(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Rn(n,t),m=r?r(p):p;v1(t,m,o,a);let y=i.listen(m,o,a);if(!ik(o)){let R=r?P=>r(hn(P[n.index])):n.index;k0(R,e,t,o,a,y,!1)}}return l}function ik(n){return n.startsWith("animation")||n.startsWith("transition")}function ok(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[ss],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function k0(n,e,t,r,i,o,s){let a=e.firstCreatePass?mD(e):null,u=gD(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function iC(n,e,t,r,i,o){let s=e[t],a=e[Z],l=a.data[t].outputs[r],p=s[l].subscribe(o);k0(n.index,a,e,i,o,p,!0)}var ty=Symbol("BINDING");var Cd=class extends Nc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ti(e);return new ps(t,this.ngModule)}};function sk(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Ud.SignalBased)!==0};return i&&(o.transform=i),o})}function ak(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function ck(n,e,t){let r=e instanceof ft?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Xm(t,r):t}function uk(n){let e=n.get(lo,null);if(e===null)throw new $(407,!1);let t=n.get(T0,null),r=n.get(Ji,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function lk(n,e){let t=F0(n);return qC(e,t,t==="svg"?uD:t==="math"?lD:null)}function F0(n){return(n.selectors[0][0]||"div").toLowerCase()}var ps=class extends Kd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=sk(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=ak(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=F1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){be(ve.DynamicComponentStart);let a=K(null);try{let u=this.componentDef,l=dk(r,u,s,o),h=ck(u,i||this.ngModule,e),p=uk(h),m=p.rendererFactory.createRenderer(null,u),y=r?sO(m,r,u.encapsulation,h):lk(u,m),R=s?.some(oC)||o?.some(V=>typeof V!="function"&&V.bindings.some(oC)),P=Ey(null,l,null,512|XC(u),null,null,p,m,h,null,jC(y,h,!0));P[tt]=y,od(P);let N=null;try{let V=R0(tt,P,2,"#host",()=>l.directiveRegistry,!0,0);WC(m,y,V),fs(y,P),Sy(l,P,V),BC(l,V,P),M0(l,V),t!==void 0&&fk(V,this.ngContentSelectors,t),N=fn(V.index,P),P[Ue]=N[Ue],My(l,P,null)}catch(V){throw N!==null&&Gm(N),Gm(P),V}finally{be(ve.DynamicComponentEnd),sd()}return new Td(this.componentType,P,!!R)}finally{K(a)}}};function dk(n,e,t,r){let i=n?["ng-version","21.0.2"]:L1(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[ty].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[ty].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=im(p);u.push(m)}return _y(0,null,hk(o,s),1,a,u,null,null,null,[i],null)}function hk(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function oC(n){let e=n[ty].kind;return e==="input"||e==="twoWay"}var Td=class extends C0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=gc(t[Z],tt),this.location=Od(this._tNode,t),this.instance=fn(this._tNode.index,t)[Ue],this.hostView=this.changeDetectorRef=new si(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Ry(r,i[Z],i,e,t);this.previousInputValues.set(e,t);let s=fn(r.index,i);Ny(s,1)}get injector(){return new ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function fk(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var go=(()=>{class n{static __NG_ELEMENT_ID__=pk}return n})();function pk(){let n=xt();return mk(n,ae())}var gk=go,L0=class extends gk{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Od(this._hostTNode,this._hostLView)}get injector(){return new ao(this._hostTNode,this._hostLView)}get parentInjector(){let e=hy(this._hostTNode,this._hostLView);if(IC(e)){let t=vd(e,this._hostLView),r=yd(e),i=t[Z].data[r+8];return new ao(i,t)}else return new ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Be}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Jm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,wc(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!zP(e),l;if(u)l=t;else{let N=t||{};l=N.index,r=N.injector,i=N.projectableNodes,o=N.environmentInjector||N.ngModuleRef,s=N.directives,a=N.bindings}let h=u?e:new ps(ti(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let V=(u?p:this.parentInjector).get(ft,null);V&&(o=V)}let m=ti(h.componentType??{}),y=Jm(this._lContainer,m?.id??null),R=y?.firstChild??null,P=h.create(p,i,R,o,s,a);return this.insertImpl(P.hostView,l,wc(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(hD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[ot],l=new L0(u,u[dn],u[ot]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Gd(s,i,o,r),e.attachToViewContainerRef(),em(Fm(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Dc(this._lContainer,t);r&&(sc(Fm(this._lContainer),t),$d(r[Z],r))}detach(e){let t=this._adjustIndex(e,-1),r=Dc(this._lContainer,t);return r&&sc(Fm(this._lContainer),t)!=null?new si(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sC(n){return n[hc]}function Fm(n){return n[hc]||(n[hc]=[])}function mk(n,e){let t,r=e[n.index];return An(r)?t=r:(t=E0(r,e,null,n),e[n.index]=t,Iy(e,t)),vk(t,e,n,r),new L0(t,n,e)}function yk(n,e){let t=n[Oe],r=t.createComment(""),i=Rn(e,n),o=t.parentNode(i);return bd(t,o,r,t.nextSibling(i),!1),r}var vk=Ik,_k=()=>!1;function Ek(n,e,t){return _k(n,e,t)}function Ik(n,e,t,r){if(n[ni])return;let i;t.type&8?i=hn(r):i=yk(e,t),n[ni]=i}var ho=class{},Qd=class{};var Sd=class extends ho{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Cd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=rm(e);this._bootstrapComponents=JC(o.bootstrap),this._r3Injector=Cm(e,t,[{provide:ho,useValue:this},{provide:Nc,useValue:this.componentFactoryResolver},...r],Er(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ad=class extends Qd{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Sd(this.moduleType,e,[])}};var Cc=class extends ho{injector;componentFactoryResolver=new Cd(this);instance=null;constructor(e){super();let t=new Yi([...e.providers,{provide:ho,useValue:this},{provide:Nc,useValue:this.componentFactoryResolver}],e.parent||uc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function xc(n,e,t=null){return new Cc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var wk=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=om(!1,t.type),i=r.length>0?xc([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=q({token:n,providedIn:"environment",factory:()=>new n(J(ft))})}return n})();function $e(n){return Sc(()=>{let e=V0(n),t=Y(O({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===fy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(wk).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||xn.Emulated,styles:n.styles||Zt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&ai("NgStandalone"),j0(t);let r=n.dependencies;return t.directiveDefs=aC(r,bk),t.pipeDefs=aC(r,nD),t.id=Tk(t),t})}function bk(n){return ti(n)||im(n)}function tr(n){return Sc(()=>({type:n.type,bootstrap:n.bootstrap||Zt,declarations:n.declarations||Zt,imports:n.imports||Zt,exports:n.exports||Zt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Dk(n,e){if(n==null)return ei;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Ud.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function Ck(n){if(n==null)return ei;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ne(n){return Sc(()=>{let e=V0(n);return j0(e),e})}function Py(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function V0(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||ei,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Zt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Dk(n.inputs,e),outputs:Ck(n.outputs),debugInfo:null}}function j0(n){n.features?.forEach(e=>e(n))}function aC(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Tk(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Sk(n){return Object.getPrototypeOf(n.prototype).constructor}function zt(n){let e=Sk(n.type),t=!0,r=[n];for(;e;){let i;if(Wn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Lm(n.inputs),s.declaredInputs=Lm(n.declaredInputs),s.outputs=Lm(n.outputs);let a=i.hostBindings;a&&xk(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&Mk(n,u),l&&Nk(n,l),Ak(n,i),Qb(n.outputs,i.outputs),Wn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===zt&&(t=!1)}}e=Object.getPrototypeOf(e)}Rk(r)}function Ak(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Rk(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ic(i.hostAttrs,t=Ic(t,i.hostAttrs))}}function Lm(n){return n===ei?{}:n===Zt?[]:n}function Mk(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Nk(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function xk(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function U0(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ic(n.mergedAttrs,n.attrs);let h=n.tView=_y(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),ls(n,!1);let u=Ok(t,e,n,r);cd()&&Cy(t,e,u,n),fs(u,e);let l=E0(u,e,u,n);e[r+tt]=l,Iy(e,l),Ek(l,n,e)}function Pk(n,e,t,r,i,o,s,a,u,l,h){let p=t+tt,m;return e.firstCreatePass?(m=Wd(e,p,4,s||null,a||null),ym()&&S0(e,n,m,Kn(e.consts,l),l0),vC(e,m)):m=e.data[p],U0(m,n,e,t,r,i,o,u),pc(m)&&Sy(e,n,m),l!=null&&Ay(n,m,h),m}function Rd(n,e,t,r,i,o,s,a,u,l,h){let p=t+tt,m;if(e.firstCreatePass){if(m=Wd(e,p,4,s||null,a||null),l!=null){let y=Kn(e.consts,l);m.localNames=[];for(let R=0;R<y.length;R+=2)m.localNames.push(y[R],-1)}}else m=e.data[p];return U0(m,n,e,t,r,i,o,u),l!=null&&Ay(n,m,h),m}function Pt(n,e,t,r,i,o,s,a){let u=ae(),l=pt(),h=Kn(l.consts,o);return Pk(u,l,n,e,t,r,i,h,void 0,s,a),Pt}var Ok=kk;function kk(n,e,t,r){return ud(!0),e[Oe].createComment("")}var Oy=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function B0(n){return typeof n=="function"&&n[St]!==void 0}function ky(n){return B0(n)&&typeof n.set=="function"}var Fy=new z("");function Dr(n){return!!n&&typeof n.then=="function"}function Yd(n){return!!n&&typeof n.subscribe=="function"}var H0=new z("");var Ly=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=L(H0,{optional:!0})??[];injector=L(cn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Nt(this.injector,i);if(Dr(o))t.push(o);else if(Yd(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Jd=new z("");function $0(){hg(()=>{let n="";throw new $(600,n)})}function q0(n){return n.isBoundToModule}var Fk=10;var ci=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=L(pn);afterRenderManager=L(by);zonelessEnabled=L(vc);rootEffectScheduler=L(Nm);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new et;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=L(oi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ye(t=>!t))}constructor(){L(po,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=L(ft);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=cn.NULL){return this._injector.get($t).run(()=>{be(ve.BootstrapComponentStart);let s=t instanceof Kd;if(!this._injector.get(Ly).done){let R="";throw new $(405,R)}let u;s?u=t:u=this._injector.get(Nc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=q0(u)?void 0:this._injector.get(ho),h=r||u.selector,p=u.create(i,[],h,l),m=p.location.nativeElement,y=p.injector.get(Fy,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),Ec(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),be(ve.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){be(ve.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Bd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw be(ve.ChangeDetectionEnd),new $(101,!1);let t=K(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,K(t),this.afterTick.next(),be(ve.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(lo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<Fk;){be(ve.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{be(ve.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!mc(i))continue;let o=r&&!this.zonelessEnabled?0:1;m0(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>mc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ec(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Jd,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ec(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new $(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ec(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Pc(n,e,t,r){let i=ae(),o=so();if(Pn(i,o,e)){let s=pt(),a=ad();gO(a,i,n,e,t,r)}return Pc}var KG=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ny=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Vm(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function Lk(n,e,t,r){let i,o,s=0,a=n.length-1,u=void 0;if(Array.isArray(e)){K(r);let l=e.length-1;for(K(null);s<=a&&s<=l;){let h=n.at(s),p=e[s],m=Vm(s,h,s,p,t);if(m!==0){m<0&&n.updateValue(s,p),s++;continue}let y=n.at(a),R=e[l],P=Vm(a,y,l,R,t);if(P!==0){P<0&&n.updateValue(a,R),a--,l--;continue}let N=t(s,h),V=t(a,y),X=t(s,p);if(Object.is(X,V)){let ce=t(l,R);Object.is(ce,N)?(n.swap(s,a),n.updateValue(a,R),l--,a--):n.move(a,s),n.updateValue(s,p),s++;continue}if(i??=new Md,o??=uC(n,s,a,t),ry(n,i,s,X))n.updateValue(s,p),s++,a++;else if(o.has(X))i.set(N,n.detach(s)),a--;else{let ce=n.create(s,e[s]);n.attach(s,ce),s++,a++}}for(;s<=l;)cC(n,i,t,s,e[s]),s++}else if(e!=null){K(r);let l=e[Symbol.iterator]();K(null);let h=l.next();for(;!h.done&&s<=a;){let p=n.at(s),m=h.value,y=Vm(s,p,s,m,t);if(y!==0)y<0&&n.updateValue(s,m),s++,h=l.next();else{i??=new Md,o??=uC(n,s,a,t);let R=t(s,m);if(ry(n,i,s,R))n.updateValue(s,m),s++,a++,h=l.next();else if(!o.has(R))n.attach(s,n.create(s,m)),s++,a++,h=l.next();else{let P=t(s,p);i.set(P,n.detach(s)),a--}}}for(;!h.done;)cC(n,i,t,n.length,h.value),h=l.next()}for(;s<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function ry(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function cC(n,e,t,r,i){if(ry(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function uC(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Md=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function We(n,e,t,r,i,o,s,a){ai("NgControlFlow");let u=ae(),l=pt(),h=Kn(l.consts,o);return Rd(u,l,n,e,t,r,i,h,256,s,a),Vy}function Vy(n,e,t,r,i,o,s,a){ai("NgControlFlow");let u=ae(),l=pt(),h=Kn(l.consts,o);return Rd(u,l,n,e,t,r,i,h,512,s,a),Vy}function Ke(n,e){ai("NgControlFlow");let t=ae(),r=so(),i=t[r]!==mt?t[r]:-1,o=i!==-1?Nd(t,tt+i):void 0,s=0;if(Pn(t,r,n)){let a=K(null);try{if(o!==void 0&&w0(o,s),n!==-1){let u=tt+n,l=Nd(t,u),h=ay(t[Z],u),p=D0(l,h,t),m=zd(t,h,e,{dehydratedView:p});Gd(l,m,s,wc(h,p))}}finally{K(a)}}else if(o!==void 0){let a=I0(o,s);a!==void 0&&(a[Ue]=e)}}var iy=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Be}};var oy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function gn(n,e,t,r,i,o,s,a,u,l,h,p,m){ai("NgControlFlow");let y=ae(),R=pt(),P=u!==void 0,N=ae(),V=a?s.bind(N[Xt][Ue]):s,X=new oy(P,V);N[tt+n]=X,Rd(y,R,n+1,e,t,r,i,Kn(R.consts,o),256),P&&Rd(y,R,n+2,u,l,h,p,Kn(R.consts,m),512)}var sy=class extends ny{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Be}at(e){return this.getLView(e)[Ue].$implicit}attach(e,t){let r=t[os];this.needsIndexUpdate||=e!==this.length,Gd(this.lContainer,t,e,wc(this.templateTNode,r)),Vk(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,jk(this.lContainer,e),Uk(this.lContainer,e)}create(e,t){let r=Jm(this.lContainer,this.templateTNode.tView.ssrId),i=zd(this.hostLView,this.templateTNode,new iy(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){$d(e[Z],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Ue].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ue].$index=e}getLView(e){return Bk(this.lContainer,e)}};function mn(n){let e=K(null),t=Mn();try{let r=ae(),i=r[Z],o=r[t],s=t+1,a=Nd(r,s);if(o.liveCollection===void 0){let l=ay(i,s);o.liveCollection=new sy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(Lk(u,n,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=so(),h=u.length===0;if(Pn(r,l,h)){let p=t+2,m=Nd(r,p);if(h){let y=ay(i,p),R=D0(m,y,r),P=zd(r,y,void 0,{dehydratedView:R});Gd(m,P,0,wc(y,R))}else i.firstUpdatePass&&HO(m),w0(m,0)}}}finally{K(e)}}function Nd(n,e){return n[e]}function Vk(n,e){if(n.length<=Be)return;let t=Be+e,r=n[t],i=r?r[io]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Ir];q1(o,i),uo.delete(r),i.detachedLeaveAnimationFns=void 0}}function jk(n,e){if(n.length<=Be)return;let t=Be+e,r=n[t],i=r?r[io]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function Uk(n,e){return Dc(n,e)}function Bk(n,e){return I0(n,e)}function ay(n,e){return gc(n,e)}function ie(n,e,t){let r=ae(),i=so();if(Pn(r,i,e)){let o=pt(),s=ad();u0(s,r,n,e,r[Oe],t)}return ie}function lC(n,e,t,r,i){Ry(e,n,t,i?"class":"style",r)}function I(n,e,t,r){let i=ae(),o=i[Z],s=n+tt,a=o.firstCreatePass?R0(s,i,2,e,l0,ym(),t,r):o.data[s];if(vO(a,i,n,e,Hk),pc(a)){let u=i[Z];Sy(u,i,a),BC(u,a,i)}return r!=null&&Ay(i,a),I}function w(){let n=pt(),e=xt(),t=_O(e);return n.firstCreatePass&&M0(n,t),ID(t)&&wD(),_D(),t.classesWithoutHost!=null&&JP(t)&&lC(n,t,ae(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&ZP(t)&&lC(n,t,ae(),t.stylesWithoutHost,!1),w}function Ae(n,e,t,r){return I(n,e,t,r),w(),Ae}var Hk=(n,e,t,r,i)=>(ud(!0),qC(e[Oe],r,OD()));function Cr(){return ae()}var Oc="en-US";var $k=Oc;function z0(n){typeof n=="string"&&($k=n.toLowerCase().replace(/_/g,"-"))}function De(n,e,t){let r=ae(),i=pt(),o=xt();return G0(i,r,r[Oe],o,n,e,t),De}function G0(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=km(r,e,o),rk(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];u??=km(r,e,o),iC(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=km(r,e,o),iC(r,e,p,i,i,u)}}function Re(n=1){return PD(n)}function hd(n,e){return n<<17|e<<2}function fo(n){return n>>17&32767}function qk(n){return(n&2)==2}function zk(n,e){return n&131071|e<<17}function cy(n){return n|2}function gs(n){return(n&131068)>>2}function jm(n,e){return n&-131069|e<<2}function Gk(n){return(n&1)===1}function uy(n){return n|1}function Wk(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=fo(s),u=gs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||rs(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=fo(n[a+1]);n[r+1]=hd(m,a),m!==0&&(n[m+1]=jm(n[m+1],r)),n[a+1]=zk(n[a+1],r)}else n[r+1]=hd(a,0),a!==0&&(n[a+1]=jm(n[a+1],r)),a=r;else n[r+1]=hd(u,0),a===0?a=r:n[u+1]=jm(n[u+1],r),u=r;l&&(n[r+1]=cy(n[r+1])),dC(n,h,r,!0),dC(n,h,r,!1),Kk(e,h,n,r,o),s=hd(a,u),o?e.classBindings=s:e.styleBindings=s}function Kk(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&rs(o,e)>=0&&(t[r+1]=uy(t[r+1]))}function dC(n,e,t,r){let i=n[t+1],o=e===null,s=r?fo(i):gs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];Qk(u,e)&&(a=!0,n[s+1]=r?uy(l):cy(l)),s=r?fo(l):gs(l)}a&&(n[t+1]=r?cy(i):uy(i))}function Qk(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?rs(n,e)>=0:!1}function mo(n,e){return Yk(n,e,null,!0),mo}function Yk(n,e,t,r){let i=ae(),o=pt(),s=yc(2);if(o.firstUpdatePass&&Zk(o,n,s,r),e!==mt&&Pn(i,s,e)){let a=o.data[Mn()];rF(o,a,i,i[Oe],n,i[s+1]=iF(e,t),r,s)}}function Jk(n,e){return e>=n.expandoStartIndex}function Zk(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Mn()],s=Jk(n,t);oF(o,r)&&e===null&&!s&&(e=!1),e=Xk(i,o,e,r),Wk(i,o,e,t,s,r)}}function Xk(n,e,t,r){let i=RD(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Um(null,n,e,t,r),t=Tc(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Um(i,n,e,t,r),o===null){let u=eF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Um(null,n,e,u[1],r),u=Tc(u,e.attrs,r),tF(n,e,r,u))}else o=nF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function eF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(gs(r)!==0)return n[fo(r)]}function tF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[fo(i)]=r}function nF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Tc(r,s,t)}return Tc(r,e.attrs,t)}function Um(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Tc(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Tc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),tD(n,s,t?!0:e[++o]))}return n===void 0?null:n}function rF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=Gk(l)?hC(u,e,t,i,gs(l),s):void 0;if(!xd(h)){xd(o)||qk(l)&&(o=hC(u,null,t,i,a,s));let p=hm(Mn(),t);oO(r,s,p,i,o)}}function hC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===mt&&(m=p?Zt:void 0);let y=p?Zl(m,r):h===r?m:void 0;if(l&&!xd(y)&&(y=Zl(u,r)),xd(y)&&(a=y,s))return a;let R=n[i+1];i=s?fo(R):gs(R)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=Zl(u,r))}return a}function xd(n){return n!==void 0}function iF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Er(Vd(n)))),n}function oF(n,e){return(n.flags&(e?8:16))!==0}function C(n,e=""){let t=ae(),r=pt(),i=n+tt,o=r.firstCreatePass?Wd(r,i,1,e,null):r.data[i],s=sF(r,t,o,e,n);t[i]=s,cd()&&Cy(r,t,s,o),ls(o,!1)}var sF=(n,e,t,r,i)=>(ud(!0),w1(e[Oe],r));function aF(n,e,t,r=""){return Pn(n,so(),t)?e+_t(t)+r:mt}function cF(n,e,t,r,i,o=""){let s=rd(),a=ey(n,s,t,i);return yc(2),a?e+_t(t)+r+_t(i)+o:mt}function uF(n,e,t,r,i,o,s,a,u,l=""){let h=rd(),p=O0(n,h,t,i,s,u);return yc(4),p?e+_t(t)+r+_t(i)+o+_t(s)+a+_t(u)+l:mt}function lF(n,e,t,r,i,o,s,a,u,l,h,p=""){let m=rd(),y=O0(n,m,t,i,s,u);return y=Pn(n,m+4,h)||y,yc(5),y?e+_t(t)+r+_t(i)+o+_t(s)+a+_t(u)+l+_t(h)+p:mt}function pe(n){return Te("",n),pe}function Te(n,e,t){let r=ae(),i=aF(r,n,e,t);return i!==mt&&eh(r,Mn(),i),Te}function yn(n,e,t,r,i){let o=ae(),s=cF(o,n,e,t,r,i);return s!==mt&&eh(o,Mn(),s),yn}function Zd(n,e,t,r,i,o,s,a,u){let l=ae(),h=uF(l,n,e,t,r,i,o,s,a,u);return h!==mt&&eh(l,Mn(),h),Zd}function Xd(n,e,t,r,i,o,s,a,u,l,h){let p=ae(),m=lF(p,n,e,t,r,i,o,s,a,u,l,h);return m!==mt&&eh(p,Mn(),m),Xd}function eh(n,e,t){let r=hm(e,n);b1(n[Oe],r,t)}function tn(n,e,t){ky(e)&&(e=e());let r=ae(),i=so();if(Pn(r,i,e)){let o=pt(),s=ad();u0(s,r,n,e,r[Oe],t)}return tn}function vn(n,e){let t=ky(n);return t&&n.set(e),t}function nn(n,e){let t=ae(),r=pt(),i=xt();return G0(r,t,t[Oe],i,n,e),nn}function dF(n,e,t){let r=pt();if(r.firstCreatePass){let i=Wn(n);ly(t,r.data,r.blueprint,i,!0),ly(e,r.data,r.blueprint,i,!1)}}function ly(n,e,t,r,i){if(n=ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)ly(n[o],e,t,r,i);else{let o=pt(),s=ae(),a=xt(),u=Qi(n)?n:ht(n.provide),l=am(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Qi(n)||!n.multi){let y=new co(l,i,U,null),R=Hm(u,e,i?h:h+m,p);R===-1?(qm(Ed(a,s),o,u),Bm(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[R]=y,s[R]=y)}else{let y=Hm(u,e,h+m,p),R=Hm(u,e,h,h+m),P=y>=0&&t[y],N=R>=0&&t[R];if(i&&!N||!i&&!P){qm(Ed(a,s),o,u);let V=pF(i?fF:hF,t.length,i,r,l,n);!i&&N&&(t[R].providerFactory=V),Bm(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(V),s.push(V)}else{let V=W0(t[i?R:y],l,!i&&r);Bm(o,n,y>-1?y:R,V)}!i&&r&&N&&t[R].componentProviders++}}}function Bm(n,e,t,r){let i=Qi(e),o=sD(e);if(i||o){let u=(o?ht(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function W0(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Hm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function hF(n,e,t,r,i){return dy(this.multi,[])}function fF(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=Id(r,r[Z],this.providerFactory.index,i);s=u.slice(0,a),dy(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],dy(o,s);return s}function dy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function pF(n,e,t,r,i,o){let s=new co(n,t,U,null);return s.multi=[],s.index=e,s.componentProviders=0,W0(s,i,r&&!t),s}function Tr(n,e=[]){return t=>{t.providersResolver=(r,i)=>dF(r,i?i(n):n,e)}}function Sr(n,e,t){let r=nd()+n,i=ae();return i[r]===mt?P0(i,r,t?e.call(t):e()):nk(i,r)}function ui(n,e,t,r){return K0(ae(),nd(),n,e,t,r)}function gF(n,e){let t=n[e];return t===mt?void 0:t}function K0(n,e,t,r,i,o){let s=e+t;return Pn(n,s,i)?P0(n,s+1,o?r.call(o,i):r(i)):gF(n,s+1)}function jy(n,e){let t=pt(),r,i=n+tt;t.firstCreatePass?(r=mF(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Zr(r.type,!0)),s,a=Mt(U);try{let u=_d(!1),l=o();return _d(u),fm(t,ae(),i,l),l}finally{Mt(a)}}function mF(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Uy(n,e,t){let r=n+tt,i=ae(),o=dD(i,r);return yF(i,r)?K0(i,nd(),e,o.transform,t,o):o.transform(t)}function yF(n,e){return n[Z].data[e].pure}var Pd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},By=(()=>{class n{compileModuleSync(t){return new Ad(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=rm(t),o=JC(i.declarations).reduce((s,a)=>{let u=ti(a);return u&&s.push(new ps(u)),s},[]);return new Pd(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Q0=(()=>{class n{applicationErrorHandler=L(pn);appRef=L(ci);taskService=L(oi);ngZone=L($t);zonelessEnabled=L(vc);tracing=L(po,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new dt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nc):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(Mm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Sm:Tm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nc+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Sm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Y0(){return[{provide:Ji,useExisting:Q0},{provide:$t,useClass:rc},{provide:vc,useValue:!0}]}function vF(){return typeof $localize<"u"&&$localize.locale||Oc}var th=new z("",{factory:()=>L(th,{optional:!0,skipSelf:!0})||vF()});function ms(n,e){return yl(n,e?.equal)}var eT=Symbol("InputSignalNode#UNSET"),LF=Y(O({},vl),{transformFn:void 0,applyValueToInputSignal(n,e){Wa(n,e)}});function tT(n,e){let t=Object.create(LF);t.value=n,t.transformFn=e?.transform;function r(){if(qa(t),t.value===eT){let i=null;throw new $(-950,i)}return t.value}return r[St]=t,r}var rh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>Ac(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function J0(n,e){return tT(n,e)}function VF(n){return tT(eT,n)}var nT=(J0.required=VF,J0);var Hy=new z(""),jF=new z("");function kc(n){return!n.moduleRef}function UF(n){let e=kc(n)?n.r3Injector:n.moduleRef.injector,t=e.get($t);return t.run(()=>{kc(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(pn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),kc(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Hy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Hy);s.add(o),n.moduleRef.onDestroy(()=>{Ec(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return HF(r,t,()=>{let o=e.get(oi),s=o.add(),a=e.get(Ly);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(th,Oc);if(z0(u||Oc),!e.get(jF,!0))return kc(n)?e.get(ci):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(kc(n)){let h=e.get(ci);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return BF?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var BF;function HF(n,e,t){try{let r=t();return Dr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var nh=null;function $F(n=[],e){return cn.create({name:e,providers:[{provide:cc,useValue:"platform"},{provide:Hy,useValue:new Set([()=>nh=null])},...n]})}function qF(n=[]){if(nh)return nh;let e=$F(n);return nh=e,$0(),zF(e),e}function zF(n){let e=n.get(Fd,null);Nt(n,()=>{e?.forEach(t=>t())})}var Et=(()=>{class n{static __NG_ELEMENT_ID__=GF}return n})();function GF(n){return WF(xt(),ae(),(n&16)===16)}function WF(n,e,t){if(ri(n)&&!t){let r=fn(n.index,e);return new si(r,r)}else if(n.type&175){let r=e[Xt];return new si(r,e)}return null}var $y=class{constructor(){}supports(e){return xy(e)}create(e){return new qy(e)}},KF=(n,e)=>e,qy=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||KF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Z0(r,i,o)?t:r,a=Z0(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,R=y+m;h<=R&&R<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!xy(e))throw new $(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,N0(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new zy(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ih),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ih),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},zy=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Gy=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ih=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Gy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Z0(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function X0(){return new Wy([new $y])}var Wy=(()=>{class n{factories;static \u0275prov=q({token:n,providedIn:"root",factory:X0});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=L(n,{optional:!0,skipSelf:!0});return n.create(t,r||X0())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new $(901,!1)}}return n})();function rT(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;be(ve.BootstrapApplicationStart);try{let o=i?.injector??qF(r),s=[Y0(),VD,...t||[]],a=new Cc({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return UF({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{be(ve.BootstrapApplicationEnd)}}function ys(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var sT=null;function _n(){return sT}function Ky(n){sT??=n}var Fc=class{},Qy=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>L(aT),providedIn:"platform"})}return n})();var aT=(()=>{class n extends Qy{_location;_history;_doc=L(gt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _n().getBaseHref(this._doc)}onPopState(t){let r=_n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=_n().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function cT(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function iT(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function li(n){return n&&n[0]!=="?"?`?${n}`:n}var vs=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>L(lT),providedIn:"root"})}return n})(),uT=new z(""),lT=(()=>{class n extends vs{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return cT(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+li(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+li(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+li(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(J(Qy),J(uT,8))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),_s=(()=>{class n{_subject=new et;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=JF(iT(oT(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+li(r))}normalize(t){return n.stripTrailingSlash(YF(this._basePath,oT(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+li(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+li(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=li;static joinWithSlash=cT;static stripTrailingSlash=iT;static \u0275fac=function(r){return new(r||n)(J(vs))};static \u0275prov=q({token:n,factory:()=>QF(),providedIn:"root"})}return n})();function QF(){return new _s(J(vs))}function YF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function oT(n){return n.replace(/\/index.html$/,"")}function JF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var oh=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Es=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new oh(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),dT(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);dT(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(U(go),U(Mc),U(Wy))};static \u0275dir=Ne({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function dT(n,e){n.context.$implicit=e.item}var yo=(()=>{class n{_viewContainer;_context=new sh;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hT(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hT(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(U(go),U(Mc))};static \u0275dir=Ne({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),sh=class{$implicit=null;ngIf=null};function hT(n,e){if(n&&!n.createEmbeddedView)throw new $(2020,!1)}function ZF(n,e){return new $(2100,!1)}var Yy=class{createSubscription(e,t,r){return He(()=>e.subscribe({next:t,error:r}))}dispose(e){He(()=>e.unsubscribe())}},Jy=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},XF=new Jy,eL=new Yy,Zy=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=L(pn);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(Dr(t))return XF;if(Yd(t))return eL;throw ZF(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(U(Et,16))};static \u0275pipe=Py({name:"async",type:n,pure:!1})}return n})();var st=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=tr({type:n});static \u0275inj=Tn({})}return n})();function Xy(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Lc=class{};var fT="browser";var Vc=class{_doc;constructor(e){this._doc=e}manager},ch=(()=>{class n extends Vc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(J(gt))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),dh=new z(""),rv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof ch));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof ch);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(J(dh),J($t))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),ev="ng-app-id";function pT(n){for(let e of n)e.remove()}function gT(n,e){let t=e.createElement("style");return t.textContent=n,t}function tL(n,e,t,r){let i=n.head?.querySelectorAll(`style[${ev}="${e}"],link[${ev}="${e}"]`);if(i)for(let o of i)o.removeAttribute(ev),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function nv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var iv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,tL(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,gT);r?.forEach(i=>this.addUsage(i,this.external,nv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(pT(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])pT(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,gT(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,nv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(J(gt),J(kd),J(Ld,8),J(Rc))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),tv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ov=/%COMP%/g;var yT="%COMP%",nL=`_nghost-${yT}`,rL=`_ngcontent-${yT}`,iL=!0,oL=new z("",{factory:()=>iL});function sL(n){return rL.replace(ov,n)}function aL(n){return nL.replace(ov,n)}function vT(n,e){return e.map(t=>t.replace(ov,n))}var sv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new jc(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof lh?i.applyToHost(t):i instanceof Uc&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case xn.Emulated:o=new lh(u,l,r,this.appId,h,s,a,p,m);break;case xn.ShadowDom:return new uh(u,t,r,s,a,this.nonce,p,m,l);case xn.ExperimentalIsolatedShadowDom:return new uh(u,t,r,s,a,this.nonce,p,m);default:o=new Uc(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(J(rv),J(iv),J(kd),J(oL),J(gt),J($t),J(Ld),J(po,8))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),jc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(tv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(mT(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(mT(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=tv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=tv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Zn.DashCase|Zn.Important)?e.style.setProperty(t,r,i&Zn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Zn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=_n().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function mT(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var uh=class extends jc{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,i,o,a,u),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=vT(r.id,h);for(let m of h){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=nv(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Uc=class extends jc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?vT(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&uo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},lh=class extends Uc{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=sL(h),this.hostAttr=aL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var hh=class n extends Fc{supportsDOMEvents=!0;static makeCurrent(){Ky(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=cL();return t==null?null:uL(t)}resetBaseElement(){Bc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xy(document.cookie,e)}},Bc=null;function cL(){return Bc=Bc||document.head.querySelector("base"),Bc?Bc.getAttribute("href"):null}function uL(n){return new URL(n,document.baseURI).pathname}var lL=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})(),_T=["alt","control","meta","shift"],dL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hL={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},ET=(()=>{class n extends Vc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_n().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),_T.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=dL[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),_T.forEach(s=>{if(s!==i){let a=hL[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(J(gt))};static \u0275prov=q({token:n,factory:n.\u0275fac})}return n})();function av(n,e,t){let r=O({rootComponent:n,platformRef:t?.platformRef},fL(e));return rT(r)}function fL(n){return{appProviders:[...vL,...n?.providers??[]],platformProviders:yL}}function pL(){hh.makeCurrent()}function gL(){return new qn}function mL(){return py(document),document}var yL=[{provide:Rc,useValue:fT},{provide:Fd,useValue:pL,multi:!0},{provide:gt,useFactory:mL}];var vL=[{provide:cc,useValue:"root"},{provide:qn,useFactory:gL},{provide:dh,useClass:ch,multi:!0},{provide:dh,useClass:ET,multi:!0},sv,iv,rv,{provide:lo,useExisting:sv},{provide:Lc,useClass:lL},[]];var IT=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(J(gt))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var te="primary",eu=Symbol("RouteTitle"),hv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Io(n){return new hv(n)}function MT(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function vh(n){return new Promise((e,t)=>{n.pipe(vr()).subscribe({next:r=>e(r),error:r=>t(r)})})}function EL(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nr(n[t],e[t]))return!1;return!0}function nr(n,e){let t=n?fv(n):void 0,r=e?fv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!NT(n[i],e[i]))return!1;return!0}function fv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function NT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function xT(n){return n.length>0?n[n.length-1]:null}function bo(n){return Ll(n)?n:Dr(n)?Ge(Promise.resolve(n)):fe(n)}function PT(n){return Ll(n)?vh(n):Promise.resolve(n)}var IL={exact:kT,subset:FT},OT={exact:wL,subset:bL,ignored:()=>!0};function wT(n,e,t){return IL[t.paths](n.root,e.root,t.matrixParams)&&OT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function wL(n,e){return nr(n,e)}function kT(n,e,t){if(!_o(n.segments,e.segments)||!gh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!kT(n.children[r],e.children[r],t))return!1;return!0}function bL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>NT(n[t],e[t]))}function FT(n,e,t){return LT(n,e,e.segments,t)}function LT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!_o(i,t)||e.hasChildren()||!gh(i,t,r))}else if(n.segments.length===t.length){if(!_o(n.segments,t)||!gh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!FT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!_o(n.segments,i)||!gh(n.segments,i,r)||!n.children[te]?!1:LT(n.children[te],e,o,r)}}function gh(n,e,t){return e.every((r,i)=>OT[t](n[i].parameters,r.parameters))}var Fn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new _e([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Io(this.queryParams),this._queryParamMap}toString(){return TL.serialize(this)}},_e=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mh(this)}},di=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Io(this.parameters),this._parameterMap}toString(){return jT(this)}};function DL(n,e){return _o(n,e)&&n.every((t,r)=>nr(t.parameters,e[r].parameters))}function _o(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function CL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===te&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==te&&(t=t.concat(e(i,r)))}),t}var tu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>new hi,providedIn:"root"})}return n})(),hi=class{parse(e){let t=new gv(e);return new Fn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Hc(e.root,!0)}`,r=RL(e.queryParams),i=typeof e.fragment=="string"?`#${SL(e.fragment)}`:"";return`${t}${r}${i}`}},TL=new hi;function mh(n){return n.segments.map(e=>jT(e)).join("/")}function Hc(n,e){if(!n.hasChildren())return mh(n);if(e){let t=n.children[te]?Hc(n.children[te],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==te&&r.push(`${i}:${Hc(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=CL(n,(r,i)=>i===te?[Hc(n.children[te],!1)]:[`${i}:${Hc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[te]!=null?`${mh(n)}/${t[0]}`:`${mh(n)}/(${t.join("//")})`}}function VT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fh(n){return VT(n).replace(/%3B/gi,";")}function SL(n){return encodeURI(n)}function pv(n){return VT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yh(n){return decodeURIComponent(n)}function bT(n){return yh(n.replace(/\+/g,"%20"))}function jT(n){return`${pv(n.path)}${AL(n.parameters)}`}function AL(n){return Object.entries(n).map(([e,t])=>`;${pv(e)}=${pv(t)}`).join("")}function RL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${fh(t)}=${fh(i)}`).join("&"):`${fh(t)}=${fh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var ML=/^[^\/()?;#]+/;function cv(n){let e=n.match(ML);return e?e[0]:""}var NL=/^[^\/()?;=#]+/;function xL(n){let e=n.match(NL);return e?e[0]:""}var PL=/^[^=?&#]+/;function OL(n){let e=n.match(PL);return e?e[0]:""}var kL=/^[^&#]+/;function FL(n){let e=n.match(kL);return e?e[0]:""}var gv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[te]=new _e(e,t)),r}parseSegment(){let e=cv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new di(yh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=xL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=cv(this.remaining);i&&(r=i,this.capture(r))}e[yh(t)]=yh(r)}parseQueryParam(e){let t=OL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=FL(this.remaining);s&&(r=s,this.capture(r))}let i=bT(t),o=bT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=cv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=te);let s=this.parseChildren();t[o??te]=Object.keys(s).length===1&&s[te]?s[te]:new _e([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function UT(n){return n.segments.length>0?new _e([],{[te]:n}):n}function BT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=BT(i);if(r===te&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new _e(n.segments,e);return LL(t)}function LL(n){if(n.numberOfChildren===1&&n.children[te]){let e=n.children[te];return new _e(n.segments.concat(e.segments),e.children)}return n}function fi(n){return n instanceof Fn}function HT(n,e,t=null,r=null,i=new hi){let o=$T(n);return qT(o,e,t,r,i)}function $T(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new _e(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=UT(r);return e??i}function qT(n,e,t,r,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return uv(o,o,o,t,r,i);let s=VL(e);if(s.toRoot())return uv(o,o,new _e([],{}),t,r,i);let a=jL(s,o,n),u=a.processChildren?qc(a.segmentGroup,a.index,s.commands):GT(a.segmentGroup,a.index,s.commands);return uv(o,a.segmentGroup,u,t,r,i)}function _h(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Wc(n){return typeof n=="object"&&n!=null&&n.outlets}function DT(n,e,t){n||="\u0275";let r=new Fn;return r.queryParams={[n]:e},t.parse(t.serialize(r)).queryParams[n]}function uv(n,e,t,r,i,o){let s={};for(let[l,h]of Object.entries(r??{}))s[l]=Array.isArray(h)?h.map(p=>DT(l,p,o)):DT(l,h,o);let a;n===e?a=t:a=zT(n,e,t);let u=UT(BT(a));return new Fn(u,s,i)}function zT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=zT(o,e,t)}),new _e(n.segments,r)}var Eh=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&_h(r[0]))throw new $(4003,!1);let i=r.find(Wc);if(i&&i!==xT(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function VL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Eh(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Eh(t,e,r)}var ws=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function jL(n,e,t){if(n.isAbsolute)return new ws(e,!0,0);if(!t)return new ws(e,!1,NaN);if(t.parent===null)return new ws(t,!0,0);let r=_h(n.commands[0])?0:1,i=t.segments.length-1+r;return UL(t,i,n.numberOfDoubleDots)}function UL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new ws(r,!1,i-o)}function BL(n){return Wc(n[0])?n[0].outlets:{[te]:n}}function GT(n,e,t){if(n??=new _e([],{}),n.segments.length===0&&n.hasChildren())return qc(n,e,t);let r=HL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new _e(n.segments.slice(0,r.pathIndex),{});return o.children[te]=new _e(n.segments.slice(r.pathIndex),n.children),qc(o,0,i)}else return r.match&&i.length===0?new _e(n.segments,{}):r.match&&!n.hasChildren()?mv(n,e,t):r.match?qc(n,0,i):mv(n,e,t)}function qc(n,e,t){if(t.length===0)return new _e(n.segments,{});{let r=BL(t),i={};if(Object.keys(r).some(o=>o!==te)&&n.children[te]&&n.numberOfChildren===1&&n.children[te].segments.length===0){let o=qc(n.children[te],e,t);return new _e(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=GT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new _e(n.segments,i)}}function HL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Wc(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!TT(u,l,s))return o;r+=2}else{if(!TT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Wc(o)){let u=$L(o.outlets);return new _e(r,u)}if(i===0&&_h(t[0])){let u=n.segments[e];r.push(new di(u.path,CT(t[0]))),i++;continue}let s=Wc(o)?o.outlets[te]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&_h(a)?(r.push(new di(s,CT(a))),i+=2):(r.push(new di(s,{})),i++)}return new _e(r,{})}function $L(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=mv(new _e([],{}),0,r))}),e}function CT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function TT(n,e,t){return n==t.path&&nr(e,t.parameters)}var zc="imperative",at=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(at||{}),on=class{id;url;constructor(e,t){this.id=e,this.url=t}},wo=class extends on{type=at.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ir=class extends on{urlAfterRedirects;type=at.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ot=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Ot||{}),Kc=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Kc||{}),rr=class extends on{reason;code;type=at.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Rr=class extends on{reason;code;type=at.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Ds=class extends on{error;target;type=at.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qc=class extends on{urlAfterRedirects;state;type=at.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ih=class extends on{urlAfterRedirects;state;type=at.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wh=class extends on{urlAfterRedirects;state;shouldActivate;type=at.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},bh=class extends on{urlAfterRedirects;state;type=at.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dh=class extends on{urlAfterRedirects;state;type=at.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ch=class{route;type=at.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Th=class{route;type=at.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Sh=class{snapshot;type=at.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ah=class{snapshot;type=at.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rh=class{snapshot;type=at.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mh=class{snapshot;type=at.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Yc=class{},Cs=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function qL(n){return!(n instanceof Yc)&&!(n instanceof Cs)}function zL(n,e){return n.providers&&!n._injector&&(n._injector=xc(n.providers,e,`Route: ${n.path}`)),n._injector??e}function kn(n){return n.outlet||te}function GL(n,e){let t=n.filter(r=>kn(r)===e);return t.push(...n.filter(r=>kn(r)!==e)),t}function As(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Nh=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return As(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Rs(this.rootInjector)}},Rs=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Nh(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(J(ft))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xh=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=yv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=yv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=vv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return vv(e,this._root).map(t=>t.value)}};function yv(n,e){if(n===e.value)return e;for(let t of e.children){let r=yv(n,t);if(r)return r}return null}function vv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=vv(n,t);if(r.length)return r.unshift(e),r}return[]}var rn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Is(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Jc=class extends xh{snapshot;constructor(e,t){super(e),this.snapshot=t,Dv(this,e)}toString(){return this.snapshot.toString()}};function WT(n){let e=WL(n),t=new Pe([new di("",{})]),r=new Pe({}),i=new Pe({}),o=new Pe({}),s=new Pe(""),a=new kt(t,r,o,s,i,te,n,e.root);return a.snapshot=e.root,new Jc(new rn(a,[]),e)}function WL(n){let e={},t={},r={},o=new Eo([],e,r,"",t,te,n,null,{});return new Zc("",new rn(o,[]))}var kt=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ye(l=>l[eu]))??fe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>Io(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>Io(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ph(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&QT(i)&&(r.resolve[eu]=i.title),r}var Eo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[eu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Io(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Io(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Zc=class extends xh{url;constructor(e,t){super(t),this.url=e,Dv(this,t)}toString(){return KT(this._root)}};function Dv(n,e){e.value._routerState=n,e.children.forEach(t=>Dv(n,t))}function KT(n){let e=n.children.length>0?` { ${n.children.map(KT).join(", ")} } `:"";return`${n.value}${e}`}function lv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),nr(e.params,t.params)||n.paramsSubject.next(t.params),EL(e.url,t.url)||n.urlSubject.next(t.url),nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function _v(n,e){let t=nr(n.params,e.params)&&DL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||_v(n.parent,e.parent))}function QT(n){return typeof n.title=="string"||n.title===null}var YT=new z(""),nu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=te;activateEvents=new je;deactivateEvents=new je;attachEvents=new je;detachEvents=new je;routerOutletData=nT(void 0,{});parentContexts=L(Rs);location=L(go);changeDetector=L(Et);inputBinder=L(Lh,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Ev(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ne({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Xn]})}return n})(),Ev=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===kt?this.route:e===Rs?this.childContexts:e===YT?this.outletData:this.parent.get(e,t)}},Lh=new z("");var Cv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=$e({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Ae(0,"router-outlet")},dependencies:[nu],encapsulation:2})}return n})();function Tv(n){let e=n.children&&n.children.map(Tv),t=e?Y(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==te&&(t.component=Cv),t}function KL(n,e,t){let r=Xc(n,e._root,t?t._root:void 0);return new Jc(r,e)}function Xc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=QL(n,e,t);return new rn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xc(n,a)),s}}let r=YL(e.value),i=e.children.map(o=>Xc(n,o));return new rn(r,i)}}function QL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xc(n,r,i);return Xc(n,r)})}function YL(n){return new kt(new Pe(n.url),new Pe(n.params),new Pe(n.queryParams),new Pe(n.fragment),new Pe(n.data),n.outlet,n.component,n)}var Ts=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},JT="ngNavigationCancelingError";function Oh(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=fi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=ZT(!1,Ot.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function ZT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[JT]=!0,t.cancellationCode=e,t}function JL(n){return XT(n)&&fi(n.url)}function XT(n){return!!n&&n[JT]}var ZL=(n,e,t,r)=>ye(i=>(new Iv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Iv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Is(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Is(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Is(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Is(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Mh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ah(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(lv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),lv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},kh=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},bs=class{component;route;constructor(e,t){this.component=e,this.route=t}};function XL(n,e,t){let r=n._root,i=e?e._root:null;return $c(r,i,t,[r.value])}function eV(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ms(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Gg(n)?n:e.get(n):r}function $c(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Is(e);return n.children.forEach(s=>{tV(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Gc(a,t.getContext(s),i)),i}function tV(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=nV(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new kh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?$c(n,e,a?a.children:null,r,i):$c(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new bs(a.outlet.component,s))}else s&&Gc(e,a,i),i.canActivateChecks.push(new kh(r)),o.component?$c(n,null,a?a.children:null,r,i):$c(n,null,t,r,i);return i}function nV(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!_o(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_o(n.url,e.url)||!nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_v(n,e)||!nr(n.queryParams,e.queryParams);case"paramsChange":default:return!_v(n,e)}}function Gc(n,e,t){let r=Is(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Gc(s,e.children.getContext(o),t):Gc(s,null,t):Gc(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new bs(e.outlet.component,i)):t.canDeactivateChecks.push(new bs(null,i)):t.canDeactivateChecks.push(new bs(null,i))}function ru(n){return typeof n=="function"}function rV(n){return typeof n=="boolean"}function iV(n){return n&&ru(n.canLoad)}function oV(n){return n&&ru(n.canActivate)}function sV(n){return n&&ru(n.canActivateChild)}function aV(n){return n&&ru(n.canDeactivate)}function cV(n){return n&&ru(n.canMatch)}function eS(n){return n instanceof Gi||n?.name==="EmptyError"}var ph=Symbol("INITIAL_VALUE");function Ss(){return Hn(n=>Dg(n.map(e=>e.pipe(Jt(1),Ag(ph)))).pipe(ye(e=>{for(let t of e)if(t!==!0){if(t===ph)return ph;if(t===!1||uV(t))return t}return!0}),Ht(e=>e!==ph),Jt(1)))}function uV(n){return fi(n)||n instanceof Ts}function tS(n){return n.aborted?fe(void 0).pipe(Jt(1)):new me(e=>{let t=()=>{e.next(),e.complete()};return n.addEventListener("abort",t),()=>n.removeEventListener("abort",t)})}function nS(n){return Za(tS(n))}function lV(n,e){return At(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?fe(Y(O({},t),{guardsResult:!0})):dV(s,r,i,n).pipe(At(a=>a&&rV(a)?hV(r,o,n,e):fe(a)),ye(a=>Y(O({},t),{guardsResult:a})))})}function dV(n,e,t,r){return Ge(n).pipe(At(i=>yV(i.component,i.route,t,e,r)),vr(i=>i!==!0,!0))}function hV(n,e,t,r){return Ge(e).pipe(Bl(i=>Xo(pV(i.route.parent,r),fV(i.route,r),mV(n,i.path,t),gV(n,i.route,t))),vr(i=>i!==!0,!0))}function fV(n,e){return n!==null&&e&&e(new Rh(n)),fe(!0)}function pV(n,e){return n!==null&&e&&e(new Sh(n)),fe(!0)}function gV(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return fe(!0);let i=r.map(o=>Ya(()=>{let s=As(e)??t,a=Ms(o,s),u=oV(a)?a.canActivate(e,n):Nt(s,()=>a(e,n));return bo(u).pipe(vr())}));return fe(i).pipe(Ss())}function mV(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>eV(s)).filter(s=>s!==null).map(s=>Ya(()=>{let a=s.guards.map(u=>{let l=As(s.node)??t,h=Ms(u,l),p=sV(h)?h.canActivateChild(r,n):Nt(l,()=>h(r,n));return bo(p).pipe(vr())});return fe(a).pipe(Ss())}));return fe(o).pipe(Ss())}function yV(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return fe(!0);let s=o.map(a=>{let u=As(e)??i,l=Ms(a,u),h=aV(l)?l.canDeactivate(n,e,t,r):Nt(u,()=>l(n,e,t,r));return bo(h).pipe(vr())});return fe(s).pipe(Ss())}function vV(n,e,t,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return fe(!0);let s=o.map(a=>{let u=Ms(a,n),l=iV(u)?u.canLoad(e,t):Nt(n,()=>u(e,t)),h=bo(l);return i?h.pipe(nS(i)):h});return fe(s).pipe(Ss(),rS(r))}function rS(n){return Eg(Rt(e=>{if(typeof e!="boolean")throw Oh(n,e)}),ye(e=>e===!0))}function _V(n,e,t,r,i){let o=e.canMatch;if(!o||o.length===0)return fe(!0);let s=o.map(a=>{let u=Ms(a,n),l=cV(u)?u.canMatch(e,t):Nt(n,()=>u(e,t)),h=bo(l);return i?h.pipe(nS(i)):h});return fe(s).pipe(Ss(),rS(r))}var vo=class iS extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,iS.prototype)}},wv=class oS extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,oS.prototype)}};function EV(n){throw new $(4e3,!1)}function IV(n){throw ZT(!1,Ot.GuardRejected)}var wV=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}async lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[te])throw EV(`${e.redirectTo}`);i=i.children[te]}}async applyRedirectCommands(e,t,r,i,o){let s=await bV(t,i,o);if(s instanceof Fn)throw new wv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new wv(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Fn(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new _e(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function bV(n,e,t){if(typeof n=="string")return Promise.resolve(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return vh(bo(Nt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p}))))}var bv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function DV(n,e,t,r,i,o){let s=sS(n,e,t);return s.matched?(r=zL(e,r),_V(r,e,t,i,o).pipe(ye(a=>a===!0?s:O({},bv)))):fe(s)}function sS(n,e,t){if(e.path==="**")return CV(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},bv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||MT)(t,n,e);if(!i)return O({},bv);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function CV(n){return{matched:!0,parameters:n.length>0?xT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ST(n,e,t,r){return t.length>0&&AV(n,t,r)?{segmentGroup:new _e(e,SV(r,new _e(t,n.children))),slicedSegments:[]}:t.length===0&&RV(n,t,r)?{segmentGroup:new _e(n.segments,TV(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new _e(n.segments,n.children),slicedSegments:t}}function TV(n,e,t,r){let i={};for(let o of t)if(Vh(n,e,o)&&!r[kn(o)]){let s=new _e([],{});i[kn(o)]=s}return O(O({},r),i)}function SV(n,e){let t={};t[te]=e;for(let r of n)if(r.path===""&&kn(r)!==te){let i=new _e([],{});t[kn(r)]=i}return t}function AV(n,e,t){return t.some(r=>Vh(n,e,r)&&kn(r)!==te)}function RV(n,e,t){return t.some(r=>Vh(n,e,r))}function Vh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function MV(n,e,t){return e.length===0&&!n.children[t]}var NV=class{};async function xV(n,e,t,r,i,o,s="emptyOnly",a){return new OV(n,e,t,r,i,s,o,a).recognize()}var PV=31,OV=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=u,this.applyRedirects=new wV(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}async recognize(){let e=ST(this.urlTree.root,[],[],this.config).segmentGroup,{children:t,rootSnapshot:r}=await this.match(e),i=new rn(r,t),o=new Zc("",i),s=HT(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let t=new Eo([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),te,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,te,t),rootSnapshot:t}}catch(r){if(r instanceof wv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof vo?this.noMatchError(r):r}}async processSegmentGroup(e,t,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,t,r,o);let s=await this.processSegment(e,t,r,r.segments,i,!0,o);return s instanceof rn?[s]:[]}async processChildren(e,t,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],h=GL(t,u),p=await this.processSegmentGroup(e,h,l,u,i);s.push(...p)}let a=aS(s);return kV(a),a}async processSegment(e,t,r,i,o,s,a){for(let u of t)try{return await this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a)}catch(l){if(l instanceof vo||eS(l))continue;throw l}if(MV(r,i,o))return new NV;throw new vo(r)}async processSegmentAgainstRoute(e,t,r,i,o,s,a,u){if(kn(r)!==s&&(s===te||!Vh(i,o,r)))throw new vo(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u);throw new vo(i)}async expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=sS(t,i,o);if(!u)throw new vo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>PV&&(this.allowRedirects=!1));let y=new Eo(o,l,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,AT(i),kn(i),i.component??i._loadedComponent??null,i,RT(i)),R=Ph(y,a,this.paramsInheritanceStrategy);if(y.params=Object.freeze(R.params),y.data=Object.freeze(R.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let P=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e),N=await this.applyRedirects.lineralizeSegments(i,P);return this.processSegment(e,r,t,N.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,t,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await vh(DV(t,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(t.children={}),!a?.matched)throw new vo(t);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,y=new Eo(p,h,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,AT(r),kn(r),r.component??r._loadedComponent??null,r,RT(r)),R=Ph(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(R.params),y.data=Object.freeze(R.data);let{segmentGroup:P,slicedSegments:N}=ST(t,p,m,u);if(N.length===0&&P.hasChildren()){let ce=await this.processChildren(l,u,P,y);return new rn(y,ce)}if(u.length===0&&N.length===0)return new rn(y,[]);let V=kn(r)===o,X=await this.processSegment(l,u,P,N,V?te:o,!0,y);return new rn(y,X instanceof rn?[X]:[])}async getChildConfig(e,t,r){if(t.children)return{routes:t.children,injector:e};if(t.loadChildren){if(t._loadedRoutes!==void 0)return{routes:t._loadedRoutes,injector:t._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await vh(vV(e,t,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,t);return t._loadedRoutes=o.routes,t._loadedInjector=o.injector,o}throw IV(t)}return{routes:[],injector:e}}};function kV(n){n.sort((e,t)=>e.value.outlet===te?-1:t.value.outlet===te?1:e.value.outlet.localeCompare(t.value.outlet))}function FV(n){let e=n.value.routeConfig;return e&&e.path===""}function aS(n){let e=[],t=new Set;for(let r of n){if(!FV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=aS(r.children);e.push(new rn(r.value,i))}return e.filter(r=>!t.has(r))}function AT(n){return n.data||{}}function RT(n){return n.resolve||{}}var LV=new z("",{factory:()=>xV});function VV(n,e,t,r,i,o,s){let a=n.get(LV);return At(u=>fe(u).pipe(Hn(l=>a(n,e,t,r,l.extractedUrl,i,o,s)),ye(({state:l,tree:h})=>Y(O({},u),{targetSnapshot:l,urlAfterRedirects:h}))))}function jV(n,e){return At(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return fe(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of cS(u))s.add(l);let a=0;return Ge(s).pipe(Bl(u=>o.has(u)?UV(u,r,n,e):(u.data=Ph(u,u.parent,n).resolve,fe(void 0))),Rt(()=>a++),Hl(1),At(u=>a===s.size?fe(t):Ut))})}function cS(n){let e=n.children.map(t=>cS(t)).flat();return[n,...e]}function UV(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!QT(i)&&(o[eu]=i.title),Ya(()=>(n.data=Ph(n,n.parent,t).resolve,BV(o,n,e,r).pipe(ye(s=>(n._resolvedData=s,n.data=O(O({},n.data),s),null)))))}function BV(n,e,t,r){let i=fv(n);if(i.length===0)return fe({});let o={};return Ge(i).pipe(At(s=>HV(n[s],e,t,r).pipe(vr(),Rt(a=>{if(a instanceof Ts)throw Oh(new hi,a);o[s]=a}))),Hl(1),ye(()=>o),Ja(s=>eS(s)?Ut:bg(s)))}function HV(n,e,t,r){let i=As(e)??r,o=Ms(n,i),s=o.resolve?o.resolve(e,t):Nt(i,()=>o(e,t));return bo(s)}function dv(n){return Hn(e=>{let t=n(e);return t?Ge(t).pipe(ye(()=>e)):fe(e)})}var Sv=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===te);return r}getResolvedTitleForRoute(t){return t.data[eu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>L(uS),providedIn:"root"})}return n})(),uS=(()=>{class n extends Sv{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(J(IT))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ns=new z("",{factory:()=>({})}),iu=new z(""),lS=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=L(By);async loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await PT(Nt(t,()=>r.loadComponent())),s=await fS(hS(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await dS(r,this.compiler,t,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();async function dS(n,e,t,r){let i=await PT(Nt(t,()=>n.loadChildren())),o=await fS(hS(i)),s;o instanceof Qd||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(n);let a,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(a=s.create(t).injector,u=a.get(iu,[],{optional:!0,self:!0}).flat()),{routes:u.map(Tv),injector:a}}function $V(n){return n&&typeof n=="object"&&"default"in n}function hS(n){return $V(n)?n.default:n}async function fS(n){return n}var jh=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>L(qV),providedIn:"root"})}return n})(),qV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pS=new z("");var zV=()=>{},gS=new z(""),mS=(()=>{class n{currentNavigation=qt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=qt(null,{});events=new et;transitionAbortWithErrorSubject=new et;configLoader=L(lS);environmentInjector=L(ft);destroyRef=L(wr);urlSerializer=L(tu);rootContexts=L(Rs);location=L(_s);inputBindingEnabled=L(Lh,{optional:!0})!==null;titleStrategy=L(Sv);options=L(Ns,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=L(jh);createViewTransition=L(pS,{optional:!0});navigationErrorHandler=L(gS,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new Ch(i)),r=i=>this.events.next(new Th(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;He(()=>{this.transitions?.next(Y(O({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(t){return this.transitions=new Pe(null),this.transitions.pipe(Ht(r=>r!==null),Hn(r=>{let i=!1,o=new AbortController;return fe(r).pipe(Hn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ot.SupersededByNewNavigation),Ut;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?Y(O({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new Rr(s.id,this.urlSerializer.serialize(s.rawUrl),"",Kc.IgnoredSameUrlNavigation)),s.resolve(!1),Ut;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return fe(s).pipe(Hn(h=>(this.events.next(new wo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Ut:Promise.resolve(h))),VV(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Rt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new Qc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:y,extras:R}=s,P=new wo(h,this.urlSerializer.serialize(p),m,y);this.events.next(P);let N=WT(this.rootComponentType).snapshot;return this.currentTransition=r=Y(O({},s),{targetSnapshot:N,urlAfterRedirects:p,extras:Y(O({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(V=>(V.finalUrl=p,V)),fe(r)}else return this.events.next(new Rr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Kc.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Ut}),Rt(s=>{let a=new Ih(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ye(s=>(this.currentTransition=r=Y(O({},s),{guards:XL(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),lV(this.environmentInjector,s=>this.events.next(s)),Rt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Oh(this.urlSerializer,s.guardsResult);let a=new wh(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ht(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ot.GuardRejected),!1)),dv(s=>{if(s.guards.canActivateChecks.length!==0)return fe(s).pipe(Rt(a=>{let u=new bh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Hn(a=>{let u=!1;return fe(a).pipe(jV(this.paramsInheritanceStrategy,this.environmentInjector),Rt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",Ot.NoDataFromResolver)}}))}),Rt(a=>{let u=new Dh(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),dv(s=>{let a=l=>{let h=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=As(l)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)h.push(...a(p));return h},u=a(s.targetSnapshot.root);return u.length===0?fe(s):Ge(Promise.all(u).then(()=>s))}),dv(()=>this.afterPreactivation()),Hn(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Ge(u).pipe(ye(()=>r)):fe(r)}),ye(s=>{let a=KL(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=Y(O({},s),{targetRouterState:a}),this.currentNavigation.update(u=>(u.targetRouterState=a,u)),r}),Rt(()=>{this.events.next(new Yc)}),ZL(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Jt(1),Za(tS(o.signal).pipe(Ht(()=>!i&&!r.targetRouterState),Rt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Ot.Aborted)}))),Rt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=zV,a)),this.lastSuccessfulNavigation.set(He(this.currentNavigation)),this.events.next(new ir(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Za(this.transitionAbortWithErrorSubject.pipe(Rt(s=>{throw s}))),Sg(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Ot.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ja(s=>{if(this.destroyed)return r.resolve(!1),Ut;if(i=!0,XT(s))this.events.next(new rr(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),JL(s)?this.events.next(new Cs(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ds(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=Nt(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Ts){let{message:l,cancellationCode:h}=Oh(this.urlSerializer,u);this.events.next(new rr(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new Cs(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Ut}))}))}cancelNavigationTransition(t,r,i){let o=new rr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=He(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function GV(n){return n!==zc}var yS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>L(WV),providedIn:"root"})}return n})(),Fh=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},WV=(()=>{class n extends Fh{static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Av=(()=>{class n{urlSerializer=L(tu);options=L(Ns,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=L(_s);urlHandlingStrategy=L(jh);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Fn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof Fn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=WT(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:()=>L(vS),providedIn:"root"})}return n})(),vS=(()=>{class n extends Av{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof wo?this.updateStateMemento():t instanceof Rr?this.commitTransition(r):t instanceof Qc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Yc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof rr&&t.code!==Ot.SupersededByNewNavigation&&t.code!==Ot.Redirect?this.restoreHistory(r):t instanceof Ds?this.restoreHistory(r,!0):t instanceof ir&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=O(O({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=O(O({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Rv(n,e){n.events.pipe(Ht(t=>t instanceof ir||t instanceof rr||t instanceof Ds||t instanceof Rr),ye(t=>t instanceof ir||t instanceof Rr?0:(t instanceof rr?t.code===Ot.Redirect||t.code===Ot.SupersededByNewNavigation:!1)?2:1),Ht(t=>t!==2),Jt(1)).subscribe(()=>{e()})}var KV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ft=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=L(Oy);stateManager=L(Av);options=L(Ns,{optional:!0})||{};pendingTasks=L(oi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=L(mS);urlSerializer=L(tu);location=L(_s);urlHandlingStrategy=L(jh);injector=L(ft);_events=new et;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=L(yS);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=L(iu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!L(Lh,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new dt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=He(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof rr&&r.code!==Ot.Redirect&&r.code!==Ot.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ir)this.navigated=!0;else if(r instanceof Cs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||GV(i.source)},s);this.scheduleNavigation(a,zc,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}qL(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=O({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(pn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return He(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Tv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=$T(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return qT(p,t,h,l??null,this.urlSerializer)}navigateByUrl(t,r={skipLocationChange:!1}){let i=fi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,zc,null,r)}navigate(t,r={skipLocationChange:!1}){return YV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(ns(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},KV):r===!1?i=O({},QV):i=r,fi(t))return wT(this.currentUrlTree,t,i);let o=this.parseUrl(t);return wT(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Rv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function YV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new $(4008,!1)}var Gt=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=qt(null,{});get href(){return He(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new et;applicationErrorHandler=L(pn);options=L(Ns,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(L(new rh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof ir&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(fi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:fi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(U(Ft),U(kt),Ac("tabindex"),U(br),U(er),U(vs))};static \u0275dir=Ne({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&De("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Pc("href",i.reactiveHref(),yy)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ys],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ys],replaceUrl:[2,"replaceUrl","replaceUrl",ys],routerLink:"routerLink"},features:[Xn]})}return n})();var ZV=new z("");function Mv(n,...e){return ac([{provide:iu,multi:!0,useValue:n},[],{provide:kt,useFactory:XV},{provide:Jd,multi:!0,useFactory:e2},e.map(t=>t.\u0275providers)])}function XV(){return L(Ft).routerState.root}function e2(){let n=L(cn);return e=>{let t=n.get(ci);if(e!==t.components[0])return;let r=n.get(Ft),i=n.get(t2);n.get(n2)===1&&r.initialNavigation(),n.get(r2,null,{optional:!0})?.setUpPreloading(),n.get(ZV,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var t2=new z("",{factory:()=>new et}),n2=new z("",{factory:()=>1});var r2=new z("");var Bh=40,xs=class{constructor(e,t,r,i,o,s,a=null){this.id=e;this.name=t;this.attack=r;this.dodge=i;this.damage=o;this.hp=s;this.weaponId=a}get totalBasePoints(){return this.attack+this.dodge+this.damage+this.hp}isBaseValid(){return this.attack>=1&&this.dodge>=1&&this.damage>=1&&this.hp>=1&&this.totalBasePoints<=Bh}withWeapon(e){let t=this.totalAttack(e),r=this.totalDodge(e),i=this.totalDamage(e),o=this.totalHp(e);return{attack:t,dodge:r,damage:i,hp:o}}totalAttack(e){return this.attack+(e?.attack??0)}totalDodge(e){return this.dodge+(e?.dodge??0)}totalDamage(e){return this.damage+(e?.damage??0)}totalHp(e){return this.hp+(e?.hp??0)}canEquip(e){if(!e)return!0;let t=this.withWeapon(e);return t.attack>=1&&t.dodge>=1&&t.damage>=1&&t.hp>=1}};var _S=()=>{};var wS=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},i2=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},bS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):i2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new xv;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let R=l<<6&192|p;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},xv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},o2=function(n){let e=wS(n);return bS.encodeByteArray(e,!0)},su=function(n){return o2(n).replace(/\./g,"")},$h=function(n){try{return bS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function DS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var s2=()=>DS().__FIREBASE_DEFAULTS__,a2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},c2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&$h(n[1]);return e&&JSON.parse(e)},qh=()=>{try{return _S()||s2()||a2()||c2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ov=n=>qh()?.emulatorHosts?.[n],CS=n=>{let e=Ov(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},kv=()=>qh()?.config,Fv=n=>qh()?.[`_${n}`];var Hh=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function pi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zh(n){return(await fetch(n,{credentials:"include"})).ok}function TS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=O({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[su(JSON.stringify(t)),su(JSON.stringify(s)),""].join(".")}var ou={};function u2(){let n={prod:[],emulator:[]};for(let e of Object.keys(ou))ou[e]?n.emulator.push(e):n.prod.push(e);return n}function l2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var ES=!1;function Gh(n,e){if(typeof window>"u"||typeof document>"u"||!pi(window.location.host)||ou[n]===e||ou[n]||ES)return;ou[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=u2().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{ES=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=l2(r),y=t("text"),R=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),N=document.getElementById(P)||document.createElement("a"),V=t("preprendIcon"),X=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let ce=m.element;a(ce),h(N,P);let Dt=l();u(X,V),ce.append(X,R,N,Dt),document.body.appendChild(ce)}o?(R.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function ct(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function SS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ct())}function d2(){let n=qh()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function AS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RS(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function MS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NS(){let n=ct();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xS(){return!d2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lv(){try{return typeof indexedDB=="object"}catch{return!1}}function PS(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var h2="FirebaseError",sn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=h2,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mr.prototype.create)}},Mr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?f2(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new sn(i,a,r)}};function f2(n,e){return n.replace(p2,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var p2=/\{\$([^}]+)}/g;function OS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function or(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(IS(o)&&IS(s)){if(!or(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function IS(n){return n!==null&&typeof n=="object"}function au(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ps(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Os(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function kS(n,e){let t=new Pv(n,e);return t.subscribe.bind(t)}var Pv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");g2(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Nv),i.error===void 0&&(i.error=Nv),i.complete===void 0&&(i.complete=Nv);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function g2(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Nv(){}var Dee=14400*1e3;function It(n){return n&&n._delegate?n._delegate:n}var En=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Do="[DEFAULT]";var Vv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Hh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y2(e))try{this.getOrInitializeService({instanceIdentifier:Do})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Do){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Do){return this.instances.has(e)}getOptions(e=Do){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Do){return this.component?this.component.multipleInstances?e:Do:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function m2(n){return n===Do?void 0:n}function y2(n){return n.instantiationMode==="EAGER"}var Wh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Vv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var v2=[],le=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(le||{}),_2={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},E2=le.INFO,I2={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},w2=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=I2[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},gi=class{constructor(e){this.name=e,this._logLevel=E2,this._logHandler=w2,this._userLogHandler=null,v2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var b2=(n,e)=>e.some(t=>n instanceof t),FS,LS;function D2(){return FS||(FS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function C2(){return LS||(LS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var VS=new WeakMap,Uv=new WeakMap,jS=new WeakMap,jv=new WeakMap,Hv=new WeakMap;function T2(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(sr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&VS.set(t,n)}).catch(()=>{}),Hv.set(e,n),e}function S2(n){if(Uv.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Uv.set(n,e)}var Bv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Uv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||jS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function US(n){Bv=n(Bv)}function A2(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Kh(this),e,...t);return jS.set(r,e.sort?e.sort():[e]),sr(r)}:C2().includes(n)?function(...e){return n.apply(Kh(this),e),sr(VS.get(this))}:function(...e){return sr(n.apply(Kh(this),e))}}function R2(n){return typeof n=="function"?A2(n):(n instanceof IDBTransaction&&S2(n),b2(n,D2())?new Proxy(n,Bv):n)}function sr(n){if(n instanceof IDBRequest)return T2(n);if(jv.has(n))return jv.get(n);let e=R2(n);return e!==n&&(jv.set(n,e),Hv.set(e,n)),e}var Kh=n=>Hv.get(n);function HS(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=sr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(sr(s.result),u.oldVersion,u.newVersion,sr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var M2=["get","getKey","getAll","getAllKeys","count"],N2=["put","add","delete","clear"],$v=new Map;function BS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($v.get(e))return $v.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=N2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||M2.includes(t)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return $v.set(e,o),o}US(n=>Y(O({},n),{get:(e,t,r)=>BS(e,t)||n.get(e,t,r),has:(e,t)=>!!BS(e,t)||n.has(e,t)}));var zv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(x2(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function x2(n){return n.getComponent()?.type==="VERSION"}var Gv="@firebase/app",$S="0.14.6";var Nr=new gi("@firebase/app"),P2="@firebase/app-compat",O2="@firebase/analytics-compat",k2="@firebase/analytics",F2="@firebase/app-check-compat",L2="@firebase/app-check",V2="@firebase/auth",j2="@firebase/auth-compat",U2="@firebase/database",B2="@firebase/data-connect",H2="@firebase/database-compat",$2="@firebase/functions",q2="@firebase/functions-compat",z2="@firebase/installations",G2="@firebase/installations-compat",W2="@firebase/messaging",K2="@firebase/messaging-compat",Q2="@firebase/performance",Y2="@firebase/performance-compat",J2="@firebase/remote-config",Z2="@firebase/remote-config-compat",X2="@firebase/storage",ej="@firebase/storage-compat",tj="@firebase/firestore",nj="@firebase/ai",rj="@firebase/firestore-compat",ij="firebase",oj="12.6.0";var Wv="[DEFAULT]",sj={[Gv]:"fire-core",[P2]:"fire-core-compat",[k2]:"fire-analytics",[O2]:"fire-analytics-compat",[L2]:"fire-app-check",[F2]:"fire-app-check-compat",[V2]:"fire-auth",[j2]:"fire-auth-compat",[U2]:"fire-rtdb",[B2]:"fire-data-connect",[H2]:"fire-rtdb-compat",[$2]:"fire-fn",[q2]:"fire-fn-compat",[z2]:"fire-iid",[G2]:"fire-iid-compat",[W2]:"fire-fcm",[K2]:"fire-fcm-compat",[Q2]:"fire-perf",[Y2]:"fire-perf-compat",[J2]:"fire-rc",[Z2]:"fire-rc-compat",[X2]:"fire-gcs",[ej]:"fire-gcs-compat",[tj]:"fire-fst",[rj]:"fire-fst-compat",[nj]:"fire-vertex","fire-js":"fire-js",[ij]:"fire-js-all"};var Qh=new Map,aj=new Map,Kv=new Map;function qS(n,e){try{n.container.addComponent(e)}catch(t){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function yi(n){let e=n.name;if(Kv.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;Kv.set(e,n);for(let t of Qh.values())qS(t,n);for(let t of aj.values())qS(t,n);return!0}function uu(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Wt(n){return n==null?!1:n.settings!==void 0}var cj={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mi=new Mr("app","Firebase",cj);var Qv=class{constructor(e,t,r){this._isDeleted=!1,this._options=O({},e),this._config=O({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new En("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mi.create("app-deleted",{appName:this._name})}};var vi=oj;function Zv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=O({name:Wv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw mi.create("bad-app-name",{appName:String(i)});if(t||(t=kv()),!t)throw mi.create("no-options");let o=Qh.get(i);if(o){if(or(t,o.options)&&or(r,o.config))return o;throw mi.create("duplicate-app",{appName:i})}let s=new Wh(i);for(let u of Kv.values())s.addComponent(u);let a=new Qv(t,r,s);return Qh.set(i,a),a}function Yh(n=Wv){let e=Qh.get(n);if(!e&&n===Wv&&kv())return Zv();if(!e)throw mi.create("no-app",{appName:n});return e}function Ln(n,e,t){let r=sj[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(s.join(" "));return}yi(new En(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var uj="firebase-heartbeat-database",lj=1,cu="firebase-heartbeat-store",qv=null;function KS(){return qv||(qv=HS(uj,lj,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cu)}catch(t){console.warn(t)}}}}).catch(n=>{throw mi.create("idb-open",{originalErrorMessage:n.message})})),qv}async function dj(n){try{let t=(await KS()).transaction(cu),r=await t.objectStore(cu).get(QS(n));return await t.done,r}catch(e){if(e instanceof sn)Nr.warn(e.message);else{let t=mi.create("idb-get",{originalErrorMessage:e?.message});Nr.warn(t.message)}}}async function zS(n,e){try{let r=(await KS()).transaction(cu,"readwrite");await r.objectStore(cu).put(e,QS(n)),await r.done}catch(t){if(t instanceof sn)Nr.warn(t.message);else{let r=mi.create("idb-set",{originalErrorMessage:t?.message});Nr.warn(r.message)}}}function QS(n){return`${n.name}!${n.options.appId}`}var hj=1024,fj=30,Yv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Jv(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=GS();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>fj){let i=gj(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=GS(),{heartbeatsToSend:t,unsentEntries:r}=pj(this._heartbeatsCache.heartbeats),i=su(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Nr.warn(e),""}}};function GS(){return new Date().toISOString().substring(0,10)}function pj(n,e=hj){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),WS(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),WS(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Jv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lv()?PS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await dj(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return zS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return zS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function WS(n){return su(JSON.stringify({version:2,heartbeats:n})).length}function gj(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function mj(n){yi(new En("platform-logger",e=>new zv(e),"PRIVATE")),yi(new En("heartbeat",e=>new Yv(e),"PRIVATE")),Ln(Gv,$S,n),Ln(Gv,$S,"esm2020"),Ln("fire-js","")}mj("");var yj="firebase",vj="12.6.0";Ln(yj,vj,"app");var YS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},JS={};var xr,Xv;(function(){var n;function e(D,v){function E(){}E.prototype=v.prototype,D.F=v.prototype,D.prototype=new E,D.prototype.constructor=D,D.D=function(T,b,A){for(var _=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)_[jt-2]=arguments[jt];return v.prototype[b].apply(T,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,E){E||(E=0);let T=Array(16);if(typeof v=="string")for(var b=0;b<16;++b)T[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;b<16;++b)T[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=D.g[0],E=D.g[1],b=D.g[2];let A=D.g[3],_;_=v+(A^E&(b^A))+T[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(b^v&(E^b))+T[1]+3905402710&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(E^A&(v^E))+T[2]+606105819&4294967295,b=A+(_<<17&4294967295|_>>>15),_=E+(v^b&(A^v))+T[3]+3250441966&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(A^E&(b^A))+T[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(b^v&(E^b))+T[5]+1200080426&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(E^A&(v^E))+T[6]+2821735955&4294967295,b=A+(_<<17&4294967295|_>>>15),_=E+(v^b&(A^v))+T[7]+4249261313&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(A^E&(b^A))+T[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(b^v&(E^b))+T[9]+2336552879&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(E^A&(v^E))+T[10]+4294925233&4294967295,b=A+(_<<17&4294967295|_>>>15),_=E+(v^b&(A^v))+T[11]+2304563134&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(A^E&(b^A))+T[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=A+(b^v&(E^b))+T[13]+4254626195&4294967295,A=v+(_<<12&4294967295|_>>>20),_=b+(E^A&(v^E))+T[14]+2792965006&4294967295,b=A+(_<<17&4294967295|_>>>15),_=E+(v^b&(A^v))+T[15]+1236535329&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(b^A&(E^b))+T[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^b&(v^E))+T[6]+3225465664&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(A^v))+T[11]+643717713&4294967295,b=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(b^A))+T[0]+3921069994&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(E^b))+T[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^b&(v^E))+T[10]+38016083&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(A^v))+T[15]+3634488961&4294967295,b=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(b^A))+T[4]+3889429448&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(E^b))+T[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^b&(v^E))+T[14]+3275163606&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(A^v))+T[3]+4107603335&4294967295,b=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(b^A))+T[8]+1163531501&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^A&(E^b))+T[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=A+(E^b&(v^E))+T[2]+4243563512&4294967295,A=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(A^v))+T[7]+1735328473&4294967295,b=A+(_<<14&4294967295|_>>>18),_=E+(A^v&(b^A))+T[12]+2368359562&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(E^b^A)+T[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^b)+T[8]+2272392833&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^E)+T[11]+1839030562&4294967295,b=A+(_<<16&4294967295|_>>>16),_=E+(b^A^v)+T[14]+4259657740&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^A)+T[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^b)+T[4]+1272893353&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^E)+T[7]+4139469664&4294967295,b=A+(_<<16&4294967295|_>>>16),_=E+(b^A^v)+T[10]+3200236656&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^A)+T[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^b)+T[0]+3936430074&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^E)+T[3]+3572445317&4294967295,b=A+(_<<16&4294967295|_>>>16),_=E+(b^A^v)+T[6]+76029189&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^A)+T[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=A+(v^E^b)+T[12]+3873151461&4294967295,A=v+(_<<11&4294967295|_>>>21),_=b+(A^v^E)+T[15]+530742520&4294967295,b=A+(_<<16&4294967295|_>>>16),_=E+(b^A^v)+T[2]+3299628645&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(b^(E|~A))+T[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~b))+T[7]+1126891415&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~E))+T[14]+2878612391&4294967295,b=A+(_<<15&4294967295|_>>>17),_=E+(A^(b|~v))+T[5]+4237533241&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~A))+T[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~b))+T[3]+2399980690&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~E))+T[10]+4293915773&4294967295,b=A+(_<<15&4294967295|_>>>17),_=E+(A^(b|~v))+T[1]+2240044497&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~A))+T[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~b))+T[15]+4264355552&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~E))+T[6]+2734768916&4294967295,b=A+(_<<15&4294967295|_>>>17),_=E+(A^(b|~v))+T[13]+1309151649&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~A))+T[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=A+(E^(v|~b))+T[11]+3174756917&4294967295,A=v+(_<<10&4294967295|_>>>22),_=b+(v^(A|~E))+T[2]+718787259&4294967295,b=A+(_<<15&4294967295|_>>>17),_=E+(A^(b|~v))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+A&4294967295}r.prototype.v=function(D,v){v===void 0&&(v=D.length);let E=v-this.blockSize,T=this.C,b=this.h,A=0;for(;A<v;){if(b==0)for(;A<=E;)i(this,D,A),A+=this.blockSize;if(typeof D=="string"){for(;A<v;)if(T[b++]=D.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=D[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;v=this.o*8;for(var E=D.length-8;E<D.length;++E)D[E]=v&255,v/=256;for(this.v(D),D=Array(16),v=0,E=0;E<4;++E)for(let T=0;T<32;T+=8)D[v++]=this.g[E]>>>T&255;return D};function o(D,v){var E=a;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=v(D)}function s(D,v){this.h=v;let E=[],T=!0;for(let b=D.length-1;b>=0;b--){let A=D[b]|0;T&&A==v||(E[b]=A,T=!1)}this.g=E}var a={};function u(D){return-128<=D&&D<128?o(D,function(v){return new s([v|0],v<0?-1:0)}):new s([D|0],D<0?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(D<0)return N(l(-D));let v=[],E=1;for(let T=0;D>=E;T++)v[T]=D/E|0,E*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return N(h(D.substring(1),v));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),T=p;for(let A=0;A<D.length;A+=8){var b=Math.min(8,D.length-A);let _=parseInt(D.substring(A,A+b),v);b<8?(b=l(Math.pow(v,b)),T=T.j(b).add(l(_))):(T=T.j(E),T=T.add(l(_)))}return T}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(P(this))return-N(this).m();let D=0,v=1;for(let E=0;E<this.g.length;E++){let T=this.i(E);D+=(T>=0?T:4294967296+T)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(R(this))return"0";if(P(this))return"-"+N(this).toString(D);let v=l(Math.pow(D,6));var E=this;let T="";for(;;){let b=Dt(E,v).g;E=V(E,b.j(v));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(D);if(E=b,R(E))return A+T;for(;A.length<6;)A="0"+A;T=A+T}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function R(D){if(D.h!=0)return!1;for(let v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function P(D){return D.h==-1}n.l=function(D){return D=V(this,D),P(D)?-1:R(D)?0:1};function N(D){let v=D.g.length,E=[];for(let T=0;T<v;T++)E[T]=~D.g[T];return new s(E,~D.h).add(m)}n.abs=function(){return P(this)?N(this):this},n.add=function(D){let v=Math.max(this.g.length,D.g.length),E=[],T=0;for(let b=0;b<=v;b++){let A=T+(this.i(b)&65535)+(D.i(b)&65535),_=(A>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);T=_>>>16,A&=65535,_&=65535,E[b]=_<<16|A}return new s(E,E[E.length-1]&-2147483648?-1:0)};function V(D,v){return D.add(N(v))}n.j=function(D){if(R(this)||R(D))return p;if(P(this))return P(D)?N(this).j(N(D)):N(N(this).j(D));if(P(D))return N(this.j(N(D)));if(this.l(y)<0&&D.l(y)<0)return l(this.m()*D.m());let v=this.g.length+D.g.length,E=[];for(var T=0;T<2*v;T++)E[T]=0;for(T=0;T<this.g.length;T++)for(let b=0;b<D.g.length;b++){let A=this.i(T)>>>16,_=this.i(T)&65535,jt=D.i(b)>>>16,qr=D.i(b)&65535;E[2*T+2*b]+=_*qr,X(E,2*T+2*b),E[2*T+2*b+1]+=A*qr,X(E,2*T+2*b+1),E[2*T+2*b+1]+=_*jt,X(E,2*T+2*b+1),E[2*T+2*b+2]+=A*jt,X(E,2*T+2*b+2)}for(D=0;D<v;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=v;D<2*v;D++)E[D]=0;return new s(E,0)};function X(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function ce(D,v){this.g=D,this.h=v}function Dt(D,v){if(R(v))throw Error("division by zero");if(R(D))return new ce(p,p);if(P(D))return v=Dt(N(D),v),new ce(N(v.g),N(v.h));if(P(v))return v=Dt(D,N(v)),new ce(N(v.g),v.h);if(D.g.length>30){if(P(D)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,T=v;T.l(D)<=0;)E=Vt(E),T=Vt(T);var b=rt(E,1),A=rt(T,1);for(T=rt(T,2),E=rt(E,2);!R(T);){var _=A.add(T);_.l(D)<=0&&(b=b.add(E),A=_),T=rt(T,1),E=rt(E,1)}return v=V(D,b.j(v)),new ce(b,v)}for(b=p;D.l(v)>=0;){for(E=Math.max(1,Math.floor(D.m()/v.m())),T=Math.ceil(Math.log(E)/Math.LN2),T=T<=48?1:Math.pow(2,T-48),A=l(E),_=A.j(v);P(_)||_.l(D)>0;)E-=T,A=l(E),_=A.j(v);R(A)&&(A=m),b=b.add(A),D=V(D,_)}return new ce(b,D)}n.B=function(D){return Dt(this,D).h},n.and=function(D){let v=Math.max(this.g.length,D.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)&D.i(T);return new s(E,this.h&D.h)},n.or=function(D){let v=Math.max(this.g.length,D.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)|D.i(T);return new s(E,this.h|D.h)},n.xor=function(D){let v=Math.max(this.g.length,D.g.length),E=[];for(let T=0;T<v;T++)E[T]=this.i(T)^D.i(T);return new s(E,this.h^D.h)};function Vt(D){let v=D.g.length+1,E=[];for(let T=0;T<v;T++)E[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(E,D.h)}function rt(D,v){let E=v>>5;v%=32;let T=D.g.length-E,b=[];for(let A=0;A<T;A++)b[A]=v>0?D.i(A+E)>>>v|D.i(A+E+1)<<32-v:D.i(A+E);return new s(b,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Xv=JS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,xr=JS.Integer=s}).apply(typeof YS<"u"?YS:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pr={};var e_,_j,ks,t_,lu,Zh,n_,r_,i_;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var S=c[g];if(!(S in f))break e;f=f[S]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var o=o||{},s=this||self;function a(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function u(c,d,f){return c.call.apply(c.bind,arguments)}function l(c,d,f){return l=u,l.apply(null,arguments)}function h(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function p(c,d){function f(){}f.prototype=d.prototype,c.Z=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Ob=function(g,S,M){for(var j=Array(arguments.length-2),se=2;se<arguments.length;se++)j[se-2]=arguments[se];return d.prototype[S].apply(g,j)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function y(c){let d=c.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let g=1;g<arguments.length;g++){let S=arguments[g];var f=typeof S;if(f=f!="object"?f:S?Array.isArray(S)?"array":f:"null",f=="array"||f=="object"&&typeof S.length=="number"){f=c.length||0;let M=S.length||0;c.length=f+M;for(let j=0;j<M;j++)c[f+j]=S[j]}else c.push(S)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function N(c){s.setTimeout(()=>{throw c},0)}function V(){var c=D;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class X{constructor(){this.h=this.g=null}add(d,f){let g=ce.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ce=new P(()=>new Dt,c=>c.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Vt,rt=!1,D=new X,v=()=>{let c=Promise.resolve(void 0);Vt=()=>{c.then(E)}};function E(){for(var c;c=V();){try{c.h.call(c.g)}catch(f){N(f)}var d=ce;d.j(c),d.h<100&&(d.h++,c.next=d.g,d.g=c)}rt=!1}function T(){this.u=this.u,this.C=this.C}T.prototype.u=!1,T.prototype.dispose=function(){this.u||(this.u=!0,this.N())},T.prototype[Symbol.dispose]=function(){this.dispose()},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var A=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return c})();function _(c){return/^[\s\xa0]*$/.test(c)}function jt(c,d){b.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,d)}p(jt,b),jt.prototype.init=function(c,d){let f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget,d||(f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&jt.Z.h.call(this)},jt.prototype.h=function(){jt.Z.h.call(this);let c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var qr="closure_listenable_"+(Math.random()*1e6|0),YN=0;function JN(c,d,f,g,S){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=S,this.key=++YN,this.da=this.fa=!1}function Qu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Yu(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function ZN(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function sw(c){let d={};for(let f in c)d[f]=c[f];return d}let aw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function cw(c,d){let f,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(f in g)c[f]=g[f];for(let M=0;M<aw.length;M++)f=aw[M],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function Ju(c){this.src=c,this.g={},this.h=0}Ju.prototype.add=function(c,d,f,g,S){let M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);let j=xp(c,d,g,S);return j>-1?(d=c[j],f||(d.fa=!1)):(d=new JN(d,this.src,M,!!g,S),d.fa=f,c.push(d)),d};function Np(c,d){let f=d.type;if(f in c.g){var g=c.g[f],S=Array.prototype.indexOf.call(g,d,void 0),M;(M=S>=0)&&Array.prototype.splice.call(g,S,1),M&&(Qu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function xp(c,d,f,g){for(let S=0;S<c.length;++S){let M=c[S];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==g)return S}return-1}var Pp="closure_lm_"+(Math.random()*1e6|0),Op={};function uw(c,d,f,g,S){if(g&&g.once)return dw(c,d,f,g,S);if(Array.isArray(d)){for(let M=0;M<d.length;M++)uw(c,d[M],f,g,S);return null}return f=Vp(f),c&&c[qr]?c.J(d,f,a(g)?!!g.capture:!!g,S):lw(c,d,f,!1,g,S)}function lw(c,d,f,g,S,M){if(!d)throw Error("Invalid event type");let j=a(S)?!!S.capture:!!S,se=Fp(c);if(se||(c[Pp]=se=new Ju(c)),f=se.add(d,f,g,j,M),f.proxy)return f;if(g=XN(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)A||(S=j),S===void 0&&(S=!1),c.addEventListener(d.toString(),g,S);else if(c.attachEvent)c.attachEvent(fw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function XN(){function c(f){return d.call(c.src,c.listener,f)}let d=ex;return c}function dw(c,d,f,g,S){if(Array.isArray(d)){for(let M=0;M<d.length;M++)dw(c,d[M],f,g,S);return null}return f=Vp(f),c&&c[qr]?c.K(d,f,a(g)?!!g.capture:!!g,S):lw(c,d,f,!0,g,S)}function hw(c,d,f,g,S){if(Array.isArray(d))for(var M=0;M<d.length;M++)hw(c,d[M],f,g,S);else g=a(g)?!!g.capture:!!g,f=Vp(f),c&&c[qr]?(c=c.i,M=String(d).toString(),M in c.g&&(d=c.g[M],f=xp(d,f,g,S),f>-1&&(Qu(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete c.g[M],c.h--)))):c&&(c=Fp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=xp(d,f,g,S)),(f=c>-1?d[c]:null)&&kp(f))}function kp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[qr])Np(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(fw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Fp(d))?(Np(f,c),f.h==0&&(f.src=null,d[Pp]=null)):Qu(c)}}}function fw(c){return c in Op?Op[c]:Op[c]="on"+c}function ex(c,d){if(c.da)c=!0;else{d=new jt(d,this);let f=c.listener,g=c.ha||c.src;c.fa&&kp(c),c=f.call(g,d)}return c}function Fp(c){return c=c[Pp],c instanceof Ju?c:null}var Lp="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vp(c){return typeof c=="function"?c:(c[Lp]||(c[Lp]=function(d){return c.handleEvent(d)}),c[Lp])}function yt(){T.call(this),this.i=new Ju(this),this.M=this,this.G=null}p(yt,T),yt.prototype[qr]=!0,yt.prototype.removeEventListener=function(c,d,f,g){hw(this,c,d,f,g)};function Ct(c,d){var f,g=c.G;if(g)for(f=[];g;g=g.G)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new b(d,c);else if(d instanceof b)d.target=d.target||c;else{var S=d;d=new b(g,c),cw(d,S)}S=!0;let M,j;if(f)for(j=f.length-1;j>=0;j--)M=d.g=f[j],S=Zu(M,g,!0,d)&&S;if(M=d.g=c,S=Zu(M,g,!0,d)&&S,S=Zu(M,g,!1,d)&&S,f)for(j=0;j<f.length;j++)M=d.g=f[j],S=Zu(M,g,!1,d)&&S}yt.prototype.N=function(){if(yt.Z.N.call(this),this.i){var c=this.i;for(let d in c.g){let f=c.g[d];for(let g=0;g<f.length;g++)Qu(f[g]);delete c.g[d],c.h--}}this.G=null},yt.prototype.J=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},yt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Zu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();let S=!0;for(let M=0;M<d.length;++M){let j=d[M];if(j&&!j.da&&j.capture==f){let se=j.listener,Xe=j.ha||j.src;j.fa&&Np(c.i,j),S=se.call(Xe,g)!==!1&&S}}return S&&!g.defaultPrevented}function tx(c,d){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=l(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(c,d||0)}function pw(c){c.g=tx(()=>{c.g=null,c.i&&(c.i=!1,pw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class nx extends T{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:pw(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(c){T.call(this),this.h=c,this.g={}}p(Sa,T);var gw=[];function mw(c){Yu(c.g,function(d,f){this.g.hasOwnProperty(f)&&kp(d)},c),c.g={}}Sa.prototype.N=function(){Sa.Z.N.call(this),mw(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jp=s.JSON.stringify,rx=s.JSON.parse,ix=class{stringify(c){return s.JSON.stringify(c,void 0)}parse(c){return s.JSON.parse(c,void 0)}};function yw(){}function vw(){}var Aa={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Up(){b.call(this,"d")}p(Up,b);function Bp(){b.call(this,"c")}p(Bp,b);var Vi={},_w=null;function Xu(){return _w=_w||new yt}Vi.Ia="serverreachability";function Ew(c){b.call(this,Vi.Ia,c)}p(Ew,b);function Ra(c){let d=Xu();Ct(d,new Ew(d))}Vi.STAT_EVENT="statevent";function Iw(c,d){b.call(this,Vi.STAT_EVENT,c),this.stat=d}p(Iw,b);function Tt(c){let d=Xu();Ct(d,new Iw(d,c))}Vi.Ja="timingevent";function ww(c,d){b.call(this,Vi.Ja,c),this.size=d}p(ww,b);function Ma(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){c()},d)}function Na(){this.g=!0}Na.prototype.ua=function(){this.g=!1};function ox(c,d,f,g,S,M){c.info(function(){if(c.g)if(M){var j="",se=M.split("&");for(let Se=0;Se<se.length;Se++){var Xe=se[Se].split("=");if(Xe.length>1){let it=Xe[0];Xe=Xe[1];let Bn=it.split("_");j=Bn.length>=2&&Bn[1]=="type"?j+(it+"="+Xe+"&"):j+(it+"=redacted&")}}}else j=null;else j=M;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+d+`
`+f+`
`+j})}function sx(c,d,f,g,S,M,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+d+`
`+f+`
`+M+" "+j})}function qo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+cx(c,f)+(g?" "+g:"")})}function ax(c,d){c.info(function(){return"TIMEOUT: "+d})}Na.prototype.info=function(){};function cx(c,d){if(!c.g)return d;if(!d)return null;try{let M=JSON.parse(d);if(M){for(c=0;c<M.length;c++)if(Array.isArray(M[c])){var f=M[c];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var S=g[0];if(S!="noop"&&S!="stop"&&S!="close")for(let j=1;j<g.length;j++)g[j]=""}}}}return jp(M)}catch{return d}}var el={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bw={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Dw;function Hp(){}p(Hp,yw),Hp.prototype.g=function(){return new XMLHttpRequest},Dw=new Hp;function xa(c){return encodeURIComponent(String(c))}function ux(c){var d=1;c=c.split(":");let f=[];for(;d>0&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function zr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.S=g||1,this.V=new Sa(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cw}function Cw(){this.i=null,this.g="",this.h=!1}var Tw={},$p={};function qp(c,d,f){c.M=1,c.A=nl(Un(d)),c.u=f,c.R=!0,Sw(c,null)}function Sw(c,d){c.F=Date.now(),tl(c),c.B=Un(c.A);var f=c.B,g=c.S;Array.isArray(g)||(g=[String(g)]),Uw(f.i,"t",g),c.C=0,f=c.j.L,c.h=new Cw,c.g=ib(c.j,f?d:null,!c.u),c.P>0&&(c.O=new nx(l(c.Y,c,c.g),c.P)),d=c.V,f=c.g,g=c.ba;var S="readystatechange";Array.isArray(S)||(S&&(gw[0]=S.toString()),S=gw);for(let M=0;M<S.length;M++){let j=uw(f,S[M],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.J?sw(c.J):{},c.u?(c.v||(c.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,d)):(c.v="GET",c.g.ea(c.B,c.v,null,d)),Ra(),ox(c.i,c.v,c.B,c.l,c.S,c.u)}zr.prototype.ba=function(c){c=c.target;let d=this.O;d&&Kr(c)==3?d.j():this.Y(c)},zr.prototype.Y=function(c){try{if(c==this.g)e:{let se=Kr(this.g),Xe=this.g.ya(),Se=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||Ww(this.g)))){this.K||se!=4||Xe==7||(Xe==8||Se<=0?Ra(3):Ra(2)),zp(this);var d=this.g.ca();this.X=d;var f=lx(this);if(this.o=d==200,sx(this.i,this.v,this.B,this.l,this.S,se,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,S=this.g;if((g=S.g?S.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var M=g;break t}}M=null}if(c=M)qo(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Gp(this,c);else{this.o=!1,this.m=3,Tt(12),ji(this),Pa(this);break e}}if(this.R){c=!0;let it;for(;!this.K&&this.C<f.length;)if(it=dx(this,f),it==$p){se==4&&(this.m=4,Tt(14),c=!1),qo(this.i,this.l,null,"[Incomplete Response]");break}else if(it==Tw){this.m=4,Tt(15),qo(this.i,this.l,f,"[Invalid Chunk]"),c=!1;break}else qo(this.i,this.l,it,null),Gp(this,it);if(Aw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||f.length!=0||this.h.h||(this.m=1,Tt(16),c=!1),this.o=this.o&&c,!c)qo(this.i,this.l,f,"[Invalid Chunked Response]"),ji(this),Pa(this);else if(f.length>0&&!this.W){this.W=!0;var j=this.j;j.g==this&&j.aa&&!j.P&&(j.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Xp(j),j.P=!0,Tt(11))}}else qo(this.i,this.l,f,null),Gp(this,f);se==4&&ji(this),this.o&&!this.K&&(se==4?eb(this.j,this):(this.o=!1,tl(this)))}else Cx(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,Tt(12)):(this.m=0,Tt(13)),ji(this),Pa(this)}}}catch{}finally{}};function lx(c){if(!Aw(c))return c.g.la();let d=Ww(c.g);if(d==="")return"";let f="",g=d.length,S=Kr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ji(c),Pa(c),"";c.h.i=new s.TextDecoder}for(let M=0;M<g;M++)c.h.h=!0,f+=c.h.i.decode(d[M],{stream:!(S&&M==g-1)});return d.length=0,c.h.g+=f,c.C=0,c.h.g}function Aw(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function dx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?$p:(f=Number(d.substring(f,g)),isNaN(f)?Tw:(g+=1,g+f>d.length?$p:(d=d.slice(g,g+f),c.C=g+f,d)))}zr.prototype.cancel=function(){this.K=!0,ji(this)};function tl(c){c.T=Date.now()+c.H,Rw(c,c.H)}function Rw(c,d){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ma(l(c.aa,c),d)}function zp(c){c.D&&(s.clearTimeout(c.D),c.D=null)}zr.prototype.aa=function(){this.D=null;let c=Date.now();c-this.T>=0?(ax(this.i,this.B),this.M!=2&&(Ra(),Tt(17)),ji(this),this.m=2,Pa(this)):Rw(this,this.T-c)};function Pa(c){c.j.I==0||c.K||eb(c.j,c)}function ji(c){zp(c);var d=c.O;d&&typeof d.dispose=="function"&&d.dispose(),c.O=null,mw(c.V),c.g&&(d=c.g,c.g=null,d.abort(),d.dispose())}function Gp(c,d){try{var f=c.j;if(f.I!=0&&(f.g==c||Wp(f.h,c))){if(!c.L&&Wp(f.h,c)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<c.F)cl(f),sl(f);else break e;Zp(f),Tt(18)}}else f.xa=S[1],0<f.xa-f.K&&S[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Ma(l(f.Va,f),6e3));xw(f.h)<=1&&f.ta&&(f.ta=void 0)}else Bi(f,11)}else if((c.L||f.g==c)&&cl(f),!_(d))for(S=f.Ba.g.parse(d),d=0;d<S.length;d++){let Se=S[d],it=Se[0];if(!(it<=f.K))if(f.K=it,Se=Se[1],f.I==2)if(Se[0]=="c"){f.M=Se[1],f.ba=Se[2];let Bn=Se[3];Bn!=null&&(f.ka=Bn,f.j.info("VER="+f.ka));let Hi=Se[4];Hi!=null&&(f.za=Hi,f.j.info("SVER="+f.za));let Qr=Se[5];Qr!=null&&typeof Qr=="number"&&Qr>0&&(g=1.5*Qr,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Yr=c.g;if(Yr){let ll=Yr.g?Yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var M=g.h;M.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Kp(M,M.h),M.h=null))}if(g.G){let eg=Yr.g?Yr.g.getResponseHeader("X-HTTP-Session-Id"):null;eg&&(g.wa=eg,Me(g.J,g.G,eg))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-c.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var j=c;if(g.na=rb(g,g.L?g.ba:null,g.W),j.L){Pw(g.h,j);var se=j,Xe=g.O;Xe&&(se.H=Xe),se.D&&(zp(se),tl(se)),g.g=j}else Zw(g);f.i.length>0&&al(f)}else Se[0]!="stop"&&Se[0]!="close"||Bi(f,7);else f.I==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Bi(f,7):Jp(f):Se[0]!="noop"&&f.l&&f.l.qa(Se),f.A=0)}}Ra(4)}catch{}}var hx=class{constructor(c,d){this.g=c,this.map=d}};function Mw(c){this.l=c||10,s.PerformanceNavigationTiming?(c=s.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Nw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xw(c){return c.h?1:c.g?c.g.size:0}function Wp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Kp(c,d){c.g?c.g.add(d):c.h=d}function Pw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Mw.prototype.cancel=function(){if(this.i=Ow(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Ow(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.G);return d}return y(c.i)}var kw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fx(c,d){if(c){c=c.split("&");for(let f=0;f<c.length;f++){let g=c[f].indexOf("="),S,M=null;g>=0?(S=c[f].substring(0,g),M=c[f].substring(g+1)):S=c[f],d(S,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Gr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;c instanceof Gr?(this.l=c.l,Oa(this,c.j),this.o=c.o,this.g=c.g,ka(this,c.u),this.h=c.h,Qp(this,Bw(c.i)),this.m=c.m):c&&(d=String(c).match(kw))?(this.l=!1,Oa(this,d[1]||"",!0),this.o=Fa(d[2]||""),this.g=Fa(d[3]||"",!0),ka(this,d[4]),this.h=Fa(d[5]||"",!0),Qp(this,d[6]||"",!0),this.m=Fa(d[7]||"")):(this.l=!1,this.i=new Va(null,this.l))}Gr.prototype.toString=function(){let c=[];var d=this.j;d&&c.push(La(d,Fw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(La(d,Fw,!0),"@"),c.push(xa(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&c.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(La(f,f.charAt(0)=="/"?mx:gx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",La(f,vx)),c.join("")},Gr.prototype.resolve=function(c){let d=Un(this),f=!!c.j;f?Oa(d,c.j):f=!!c.o,f?d.o=c.o:f=!!c.g,f?d.g=c.g:f=c.u!=null;var g=c.h;if(f)ka(d,c.u);else if(f=!!c.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var S=d.h.lastIndexOf("/");S!=-1&&(g=d.h.slice(0,S+1)+g)}if(S=g,S==".."||S==".")g="";else if(S.indexOf("./")!=-1||S.indexOf("/.")!=-1){g=S.lastIndexOf("/",0)==0,S=S.split("/");let M=[];for(let j=0;j<S.length;){let se=S[j++];se=="."?g&&j==S.length&&M.push(""):se==".."?((M.length>1||M.length==1&&M[0]!="")&&M.pop(),g&&j==S.length&&M.push("")):(M.push(se),g=!0)}g=M.join("/")}else g=S}return f?d.h=g:f=c.i.toString()!=="",f?Qp(d,Bw(c.i)):f=!!c.m,f&&(d.m=c.m),d};function Un(c){return new Gr(c)}function Oa(c,d,f){c.j=f?Fa(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ka(c,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);c.u=d}else c.u=null}function Qp(c,d,f){d instanceof Va?(c.i=d,_x(c.i,c.l)):(f||(d=La(d,yx)),c.i=new Va(d,c.l))}function Me(c,d,f){c.i.set(d,f)}function nl(c){return Me(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Fa(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function La(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,px),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function px(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Fw=/[#\/\?@]/g,gx=/[#\?:]/g,mx=/[#\?]/g,yx=/[#\?@]/g,vx=/#/g;function Va(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ui(c){c.g||(c.g=new Map,c.h=0,c.i&&fx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Va.prototype,n.add=function(c,d){Ui(this),this.i=null,c=zo(this,c);let f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function Lw(c,d){Ui(c),d=zo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Vw(c,d){return Ui(c),d=zo(c,d),c.g.has(d)}n.forEach=function(c,d){Ui(this),this.g.forEach(function(f,g){f.forEach(function(S){c.call(d,S,g,this)},this)},this)};function jw(c,d){Ui(c);let f=[];if(typeof d=="string")Vw(c,d)&&(f=f.concat(c.g.get(zo(c,d))));else for(c=Array.from(c.g.values()),d=0;d<c.length;d++)f=f.concat(c[d]);return f}n.set=function(c,d){return Ui(this),this.i=null,c=zo(this,c),Vw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=jw(this,c),c.length>0?String(c[0]):d):d};function Uw(c,d,f){Lw(c,d),f.length>0&&(c.i=null,c.g.set(zo(c,d),y(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let S=xa(f);f=jw(this,f);for(let M=0;M<f.length;M++){let j=S;f[M]!==""&&(j+="="+xa(f[M])),c.push(j)}}return this.i=c.join("&")};function Bw(c){let d=new Va;return d.i=c.i,c.g&&(d.g=new Map(c.g),d.h=c.h),d}function zo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function _x(c,d){d&&!c.j&&(Ui(c),c.i=null,c.g.forEach(function(f,g){let S=g.toLowerCase();g!=S&&(Lw(this,g),Uw(this,S,f))},c)),c.j=d}function Ex(c,d){let f=new Na;if(s.Image){let g=new Image;g.onload=h(Wr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(Wr,f,"TestLoadImage: error",!1,d,g),g.onabort=h(Wr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(Wr,f,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function Ix(c,d){let f=new Na,g=new AbortController,S=setTimeout(()=>{g.abort(),Wr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(M=>{clearTimeout(S),M.ok?Wr(f,"TestPingServer: ok",!0,d):Wr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(S),Wr(f,"TestPingServer: error",!1,d)})}function Wr(c,d,f,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(f)}catch{}}function wx(){this.g=new ix}function rl(c){this.i=c.Sb||null,this.h=c.ab||!1}p(rl,yw),rl.prototype.g=function(){return new il(this.i,this.h)};function il(c,d){yt.call(this),this.H=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(il,yt),n=il.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=d,this.readyState=1,Ua(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(d.body=c),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ja(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ua(this)),this.g&&(this.readyState=3,Ua(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Hw(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Hw(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ja(this):Ua(this),this.readyState==3&&Hw(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,ja(this))},n.Na=function(c){this.g&&(this.response=c,ja(this))},n.ga=function(){this.g&&ja(this)};function ja(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ua(c)}n.setRequestHeader=function(c,d){this.A.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ua(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function $w(c){let d="";return Yu(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Yp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=$w(f),typeof c=="string"?f!=null&&xa(f):Me(c,d,f))}function Le(c){yt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Le,yt);var bx=/^https?$/i,Dx=["POST","PUT"];n=Le.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Dw.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){qw(this,M);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)f.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let M of g.keys())f.set(M,g.get(M));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),S=s.FormData&&c instanceof s.FormData,!(Array.prototype.indexOf.call(Dx,d,void 0)>=0)||g||S||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,j]of f)this.g.setRequestHeader(M,j);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(M){qw(this,M)}};function qw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.o=5,zw(c),ol(c)}function zw(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Ct(this,"complete"),Ct(this,"abort"),ol(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ol(this,!0)),Le.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Gw(this):this.Xa())},n.Xa=function(){Gw(this)};function Gw(c){if(c.h&&typeof o<"u"){if(c.v&&Kr(c)==4)setTimeout(c.Ca.bind(c),0);else if(Ct(c,"readystatechange"),Kr(c)==4){c.h=!1;try{let M=c.ca();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=M===0){let j=String(c.D).match(kw)[1]||null;!j&&s.self&&s.self.location&&(j=s.self.location.protocol.slice(0,-1)),g=!bx.test(j?j.toLowerCase():"")}f=g}if(f)Ct(c,"complete"),Ct(c,"success");else{c.o=6;try{var S=Kr(c)>2?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.ca()+"]",zw(c)}}finally{ol(c)}}}}function ol(c,d){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);let f=c.g;c.g=null,d||Ct(c,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Kr(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Kr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),rx(d)}};function Ww(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Cx(c){let d={};c=(c.g&&Kr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(_(c[g]))continue;var f=ux(c[g]);let S=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=d[S]||[];d[S]=M,M.push(f)}ZN(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ba(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Kw(c){this.za=0,this.i=[],this.j=new Na,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ba("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ba("baseRetryDelayMs",5e3,c),this.Za=Ba("retryDelaySeedMs",1e4,c),this.Ta=Ba("forwardChannelMaxRetries",2,c),this.va=Ba("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Mw(c&&c.concurrentRequestLimit),this.Ba=new wx,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Kw.prototype,n.ka=8,n.I=1,n.connect=function(c,d,f,g){Tt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=rb(this,null,this.W),al(this)};function Jp(c){if(Qw(c),c.I==3){var d=c.V++,f=Un(c.J);if(Me(f,"SID",c.M),Me(f,"RID",d),Me(f,"TYPE","terminate"),Ha(c,f),d=new zr(c,c.j,d),d.M=2,d.A=nl(Un(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=ib(d.j,null),d.g.ea(d.A)),d.F=Date.now(),tl(d)}nb(c)}function sl(c){c.g&&(Xp(c),c.g.cancel(),c.g=null)}function Qw(c){sl(c),c.v&&(s.clearTimeout(c.v),c.v=null),cl(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&s.clearTimeout(c.m),c.m=null)}function al(c){if(!Nw(c.h)&&!c.m){c.m=!0;var d=c.Ea;Vt||v(),rt||(Vt(),rt=!0),D.add(d,c),c.D=0}}function Tx(c,d){return xw(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=d.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ma(l(c.Ea,c,d),tb(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;let S=new zr(this,this.j,c),M=this.o;if(this.U&&(M?(M=sw(M),cw(M,this.U)):M=this.U),this.u!==null||this.R||(S.J=M,M=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Jw(this,S,d),f=Un(this.J),Me(f,"RID",c),Me(f,"CVER",22),this.G&&Me(f,"X-HTTP-Session-Id",this.G),Ha(this,f),M&&(this.R?d="headers="+xa($w(M))+"&"+d:this.u&&Yp(f,this.u,M)),Kp(this.h,S),this.Ra&&Me(f,"TYPE","init"),this.S?(Me(f,"$req",d),Me(f,"SID","null"),S.U=!0,qp(S,f,null)):qp(S,f,d),this.I=2}}else this.I==3&&(c?Yw(this,c):this.i.length==0||Nw(this.h)||Yw(this))};function Yw(c,d){var f;d?f=d.l:f=c.V++;let g=Un(c.J);Me(g,"SID",c.M),Me(g,"RID",f),Me(g,"AID",c.K),Ha(c,g),c.u&&c.o&&Yp(g,c.u,c.o),f=new zr(c,c.j,f,c.D+1),c.u===null&&(f.J=c.o),d&&(c.i=d.G.concat(c.i)),d=Jw(c,f,1e3),f.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Kp(c.h,f),qp(f,g,d)}function Ha(c,d){c.H&&Yu(c.H,function(f,g){Me(d,g,f)}),c.l&&Yu({},function(f,g){Me(d,g,f)})}function Jw(c,d,f){f=Math.min(c.i.length,f);let g=c.l?l(c.l.Ka,c.l,c):null;e:{var S=c.i;let se=-1;for(;;){let Xe=["count="+f];se==-1?f>0?(se=S[0].g,Xe.push("ofs="+se)):se=0:Xe.push("ofs="+se);let Se=!0;for(let it=0;it<f;it++){var M=S[it].g;let Bn=S[it].map;if(M-=se,M<0)se=Math.max(0,S[it].g-100),Se=!1;else try{M="req"+M+"_"||"";try{var j=Bn instanceof Map?Bn:Object.entries(Bn);for(let[Hi,Qr]of j){let Yr=Qr;a(Qr)&&(Yr=jp(Qr)),Xe.push(M+Hi+"="+encodeURIComponent(Yr))}}catch(Hi){throw Xe.push(M+"type="+encodeURIComponent("_badmap")),Hi}}catch{g&&g(Bn)}}if(Se){j=Xe.join("&");break e}}j=void 0}return c=c.i.splice(0,f),d.G=c,j}function Zw(c){if(!c.g&&!c.v){c.Y=1;var d=c.Da;Vt||v(),rt||(Vt(),rt=!0),D.add(d,c),c.A=0}}function Zp(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ma(l(c.Da,c),tb(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,Xw(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ma(l(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Tt(10),sl(this),Xw(this))};function Xp(c){c.B!=null&&(s.clearTimeout(c.B),c.B=null)}function Xw(c){c.g=new zr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var d=Un(c.na);Me(d,"RID","rpc"),Me(d,"SID",c.M),Me(d,"AID",c.K),Me(d,"CI",c.F?"0":"1"),!c.F&&c.ia&&Me(d,"TO",c.ia),Me(d,"TYPE","xmlhttp"),Ha(c,d),c.u&&c.o&&Yp(d,c.u,c.o),c.O&&(c.g.H=c.O);var f=c.g;c=c.ba,f.M=1,f.A=nl(Un(d)),f.u=null,f.R=!0,Sw(f,c)}n.Va=function(){this.C!=null&&(this.C=null,sl(this),Zp(this),Tt(19))};function cl(c){c.C!=null&&(s.clearTimeout(c.C),c.C=null)}function eb(c,d){var f=null;if(c.g==d){cl(c),Xp(c),c.g=null;var g=2}else if(Wp(c.h,d))f=d.G,Pw(c.h,d),g=1;else return;if(c.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var S=c.D;g=Xu(),Ct(g,new ww(g,f)),al(c)}else Zw(c);else if(S=d.m,S==3||S==0&&d.X>0||!(g==1&&Tx(c,d)||g==2&&Zp(c)))switch(f&&f.length>0&&(d=c.h,d.i=d.i.concat(f)),S){case 1:Bi(c,5);break;case 4:Bi(c,10);break;case 3:Bi(c,6);break;default:Bi(c,2)}}}function tb(c,d){let f=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(f*=2),f*d}function Bi(c,d){if(c.j.info("Error code "+d),d==2){var f=l(c.bb,c),g=c.Ua;let S=!g;g=new Gr(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Oa(g,"https"),nl(g),S?Ex(g.toString(),f):Ix(g.toString(),f)}else Tt(2);c.I=0,c.l&&c.l.pa(d),nb(c),Qw(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function nb(c){if(c.I=0,c.ja=[],c.l){let d=Ow(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ja,d),R(c.ja,c.i),c.h.i.length=0,y(c.i),c.i.length=0),c.l.oa()}}function rb(c,d,f){var g=f instanceof Gr?Un(f):new Gr(f);if(g.g!="")d&&(g.g=d+"."+g.g),ka(g,g.u);else{var S=s.location;g=S.protocol,d=d?d+"."+S.hostname:S.hostname,S=+S.port;let M=new Gr(null);g&&Oa(M,g),d&&(M.g=d),S&&ka(M,S),f&&(M.h=f),g=M}return f=c.G,d=c.wa,f&&d&&Me(g,f,d),Me(g,"VER",c.ka),Ha(c,g),g}function ib(c,d,f){if(d&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Aa&&!c.ma?new Le(new rl({ab:f})):new Le(c.ma),d.Fa(c.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ob(){}n=ob.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ul(){}ul.prototype.g=function(c,d){return new Yt(c,d)};function Yt(c,d){yt.call(this),this.g=new Kw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(c?c["X-WebChannel-Client-Profile"]=d.sa:c={"X-WebChannel-Client-Profile":d.sa}),this.g.U=c,(c=d&&d.Qb)&&!_(c)&&(this.g.u=c),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Go(this)}p(Yt,yt),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Jp(this.g)},Yt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.v&&(f={},f.__data__=jp(c),c=f);d.i.push(new hx(d.Ya++,c)),d.I==3&&al(d)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Jp(this.g),delete this.g,Yt.Z.N.call(this)};function sb(c){Up.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}p(sb,Up);function ab(){Bp.call(this),this.status=1}p(ab,Bp);function Go(c){this.g=c}p(Go,ob),Go.prototype.ra=function(){Ct(this.g,"a")},Go.prototype.qa=function(c){Ct(this.g,new sb(c))},Go.prototype.pa=function(c){Ct(this.g,new ab)},Go.prototype.oa=function(){Ct(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,i_=Pr.createWebChannelTransport=function(){return new ul},r_=Pr.getStatEventTarget=function(){return Xu()},n_=Pr.Event=Vi,Zh=Pr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},el.NO_ERROR=0,el.TIMEOUT=8,el.HTTP_ERROR=6,lu=Pr.ErrorCode=el,bw.COMPLETE="complete",t_=Pr.EventType=bw,vw.EventType=Aa,Aa.OPEN="a",Aa.CLOSE="b",Aa.ERROR="c",Aa.MESSAGE="d",yt.prototype.listen=yt.prototype.J,ks=Pr.WebChannel=vw,_j=Pr.FetchXmlHttpFactory=rl,Le.prototype.listenOnce=Le.prototype.K,Le.prototype.getLastError=Le.prototype.Ha,Le.prototype.getLastErrorCode=Le.prototype.ya,Le.prototype.getStatus=Le.prototype.ca,Le.prototype.getResponseJson=Le.prototype.La,Le.prototype.getResponseText=Le.prototype.la,Le.prototype.send=Le.prototype.ea,Le.prototype.setWithCredentials=Le.prototype.Fa,e_=Pr.XhrIo=Le}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});var ZS="@firebase/firestore",XS="4.9.2";var ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");var ca="12.3.0";var So=new gi("@firebase/firestore");function Fs(){return So.logLevel}function B(n,...e){if(So.logLevel<=le.DEBUG){let t=e.map(GE);So.debug(`Firestore (${ca}): ${n}`,...t)}}function Or(n,...e){if(So.logLevel<=le.ERROR){let t=e.map(GE);So.error(`Firestore (${ca}): ${n}`,...t)}}function Gs(n,...e){if(So.logLevel<=le.WARN){let t=e.map(GE);So.warn(`Firestore (${ca}): ${n}`,...t)}}function GE(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function W(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jA(n,r,t)}function jA(n,e,t){let r=`FIRESTORE (${ca}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Or(r),new Error(r)}function Ce(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||jA(e,i,r)}function ne(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends sn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var cr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var sf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},l_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ut.UNAUTHENTICATED))}shutdown(){}},d_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},h_=class{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new sf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new ut(e)}},f_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},p_=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new f_(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}},af=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},g_=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Wt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new af(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new af(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Ej(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var mu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=Ej(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function de(n,e){return n<e?-1:n>e?1:0}function m_(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return o_(i)===o_(o)?de(i,o):o_(i)?1:-1}return de(n.length,e.length)}var Ij=55296,wj=57343;function o_(n){let e=n.charCodeAt(0);return e>=Ij&&e<=wj}function Ws(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var eA="__name__",cf=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&W(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&W(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return de(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):m_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xr.fromString(e.substring(4,e.length-2))}},ke=class n extends cf{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new H(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},bj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,an=class n extends cf{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return bj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===eA}static keyField(){return new n([eA])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new H(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new H(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var G=class n{constructor(e){this.path=e}static fromPath(e){return new n(ke.fromString(e))}static fromName(e){return new n(ke.fromString(e).popFirst(5))}static empty(){return new n(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ke(e.slice()))}};function UA(n,e,t){if(!t)throw new H(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Dj(n,e,t,r){if(e===!0&&r===!0)throw new H(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tA(n){if(!G.isDocumentKey(n))throw new H(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nA(n){if(G.isDocumentKey(n))throw new H(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function WE(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":W(12329,{type:typeof n})}function Ks(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new H(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=WE(n);throw new H(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Je(n,e){let t={typeString:n};return e&&(t.value=e),t}function Su(n,e){if(!BA(n))throw new H(k.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new H(k.INVALID_ARGUMENT,t);return!0}var rA=-62135596800,iA=1e6,Ze=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*iA);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new H(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new H(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<rA)throw new H(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iA}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Su(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-rA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Ze._jsonSchemaVersion="firestore/timestamp/1.0",Ze._jsonSchema={type:Je("string",Ze._jsonSchemaVersion),seconds:Je("number"),nanoseconds:Je("number")};var oe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Ze(0,0))}static max(){return new n(new Ze(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yu=-1,y_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};y_.UNKNOWN_ID=-1;function Cj(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=oe.fromTimestamp(r===1e9?new Ze(t+1,0):new Ze(t,r));return new Ao(i,G.empty(),e)}function Tj(n){return new Ao(n.readTime,n.key,yu)}var Ao=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(oe.min(),G.empty(),yu)}static max(){return new n(oe.max(),G.empty(),yu)}};function Sj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=G.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}var Aj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",v_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function ua(n){if(n.code!==k.FAILED_PRECONDITION||n.message!==Aj)throw n;B("LocalStore","Unexpectedly lost primary lease")}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Rj(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function la(n){return n.name==="IndexedDbTransactionError"}var KE=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),QE=-1;function Lf(n){return n==null}function vu(n){return n===0&&1/n==-1/0}function Mj(n){return typeof n=="number"&&Number.isInteger(n)&&!vu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var HA="";function Nj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oA(e)),e=xj(n.get(t),e);return oA(e)}function xj(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case HA:t+="";break;default:t+=o}}return t}function oA(n){return n+HA+""}var Pj="remoteDocuments",$A="owner";var qA="mutationQueues";var zA="mutations";var GA="documentMutations",Oj="remoteDocumentsV14";var WA="remoteDocumentGlobal";var KA="targets";var QA="targetDocuments";var YA="targetGlobal",JA="collectionParents";var ZA="clientMetadata";var XA="bundles";var eR="namedQueries";var kj="indexConfiguration";var Fj="indexState";var Lj="indexEntries";var tR="documentOverlays";var Vj="globals";var jj=[qA,zA,GA,Pj,KA,$A,YA,QA,ZA,WA,JA,XA,eR],ate=[...jj,tR],Uj=[qA,zA,GA,Oj,KA,$A,YA,QA,ZA,WA,JA,XA,eR,tR],Bj=Uj,Hj=[...Bj,kj,Fj,Lj];var cte=[...Hj,Vj];function sA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Po(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ve=class n{constructor(e,t){this.comparator=e,this.root=t||ur.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ur.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ur.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Us(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Us(this.root,e,this.comparator,!1)}getReverseIterator(){return new Us(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Us(this.root,e,this.comparator,!0)}},Us=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ur=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}};ur.EMPTY=null,ur.RED=!0,ur.BLACK=!1;ur.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new ur(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var lt=class n{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uf(this.data.getIterator())}getIteratorFrom(e){return new uf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},uf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ar=class n{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new n([])}unionWith(e){let t=new lt(an.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ws(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var lf=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var bt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lf("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bt.EMPTY_BYTE_STRING=new bt("");var $j=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(n){if(Ce(!!n,39018),typeof n=="string"){let e=0,t=$j.exec(n);if(Ce(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(n.seconds),nanos:xe(n.nanos)}}function xe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Fr(n){return typeof n=="string"?bt.fromBase64String(n):bt.fromUint8Array(n)}var rR="server_timestamp",iR="__type__",oR="__previous_value__",sR="__local_write_time__";function YE(n){return(n?.mapValue?.fields||{})[iR]?.stringValue===rR}function Vf(n){let e=n.mapValue.fields[oR];return YE(e)?Vf(e):e}function _u(n){let e=kr(n.mapValue.fields[sR].timestampValue);return new Ze(e.seconds,e.nanos)}var __=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},df="(default)",hf=class n{constructor(e,t){this.projectId=e,this.database=t||df}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===df}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var JE="__type__",aR="__max__",Xh={mapValue:{fields:{__type__:{stringValue:aR}}}},ZE="__vector__",Qs="value";function Di(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?YE(n)?4:uR(n)?9007199254740991:cR(n)?10:11:W(28295,{value:n})}function hr(n,e){if(n===e)return!0;let t=Di(n);if(t!==Di(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _u(n).isEqual(_u(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=kr(i.timestampValue),a=kr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Fr(i.bytesValue).isEqual(Fr(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return xe(i.geoPointValue.latitude)===xe(o.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return xe(i.integerValue)===xe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=xe(i.doubleValue),a=xe(o.doubleValue);return s===a?vu(s)===vu(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return Ws(n.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(sA(s)!==sA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!hr(s[u],a[u])))return!1;return!0})(n,e);default:return W(52216,{left:n})}}function Eu(n,e){return(n.values||[]).find(t=>hr(t,e))!==void 0}function Ys(n,e){if(n===e)return 0;let t=Di(n),r=Di(e);if(t!==r)return de(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=xe(o.integerValue||o.doubleValue),u=xe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return aA(n.timestampValue,e.timestampValue);case 4:return aA(_u(n),_u(e));case 5:return m_(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Fr(o),u=Fr(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=de(a[l],u[l]);if(h!==0)return h}return de(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=de(xe(o.latitude),xe(s.latitude));return a!==0?a:de(xe(o.longitude),xe(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return cA(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},u=s.fields||{},l=a[Qs]?.arrayValue,h=u[Qs]?.arrayValue,p=de(l?.values?.length||0,h?.values?.length||0);return p!==0?p:cA(l,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Xh.mapValue&&s===Xh.mapValue)return 0;if(o===Xh.mapValue)return 1;if(s===Xh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=m_(u[p],h[p]);if(m!==0)return m;let y=Ys(a[u[p]],l[h[p]]);if(y!==0)return y}return de(u.length,h.length)})(n.mapValue,e.mapValue);default:throw W(23264,{he:t})}}function aA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);let t=kr(n),r=kr(e),i=de(t.seconds,r.seconds);return i!==0?i:de(t.nanos,r.nanos)}function cA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ys(t[i],r[i]);if(o)return o}return de(t.length,r.length)}function Js(n){return E_(n)}function E_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=kr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Fr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return G.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=E_(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${E_(t.fields[s])}`;return i+"}"})(n.mapValue):W(61005,{value:n})}function nf(n){switch(Di(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Vf(n);return e?16+nf(e):16;case 5:return 2*n.stringValue.length;case 6:return Fr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+nf(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Po(r.fields,(o,s)=>{i+=o.length+nf(s)}),i})(n.mapValue);default:throw W(13486,{value:n})}}function I_(n){return!!n&&"integerValue"in n}function XE(n){return!!n&&"arrayValue"in n}function uA(n){return!!n&&"nullValue"in n}function lA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rf(n){return!!n&&"mapValue"in n}function cR(n){return(n?.mapValue?.fields||{})[JE]?.stringValue===ZE}function hu(n){if(n.geoPointValue)return{geoPointValue:O({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:O({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Po(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hu(n.arrayValue.values[t]);return e}return O({},n)}function uR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===aR}var lte={mapValue:{fields:{[JE]:{stringValue:ZE},[Qs]:{arrayValue:{}}}}};var Vn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(t)}setAll(e){let t=an.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=hu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());rf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];rf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Po(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(hu(this.value))}};function lR(n){let e=[];return Po(n.fields,(t,r)=>{let i=new an([t]);if(rf(r)){let o=lR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new ar(e)}var jn=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,oe.min(),oe.min(),oe.min(),Vn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,oe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,oe.min(),oe.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,oe.min(),oe.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Zs=class{constructor(e,t){this.position=e,this.inclusive=t}};function dA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),t.key):r=Ys(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function hA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hr(n.position[t],e.position[t]))return!1;return!0}var Xs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function qj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var ff=class{},nt=class n extends ff{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new b_(e,t,r):t==="array-contains"?new T_(e,r):t==="in"?new S_(e,r):t==="not-in"?new A_(e,r):t==="array-contains-any"?new R_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new D_(e,r):new C_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ys(t,this.value)):t!==null&&Di(this.value)===Di(t)&&this.matchesComparison(Ys(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fr=class n extends ff{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return dR(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function dR(n){return n.op==="and"}function hR(n){return zj(n)&&dR(n)}function zj(n){for(let e of n.filters)if(e instanceof fr)return!1;return!0}function w_(n){if(n instanceof nt)return n.field.canonicalString()+n.op.toString()+Js(n.value);if(hR(n))return n.filters.map(e=>w_(e)).join(",");{let e=n.filters.map(t=>w_(t)).join(",");return`${n.op}(${e})`}}function fR(n,e){return n instanceof nt?(function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)})(n,e):n instanceof fr?(function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&fR(s,i.filters[a]),!0):!1})(n,e):void W(19439)}function pR(n){return n instanceof nt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Js(t.value)}`})(n):n instanceof fr?(function(t){return t.op.toString()+" {"+t.getFilters().map(pR).join(" ,")+"}"})(n):"Filter"}var b_=class extends nt{constructor(e,t,r){super(e,t,r),this.key=G.fromName(r.referenceValue)}matches(e){let t=G.comparator(e.key,this.key);return this.matchesComparison(t)}},D_=class extends nt{constructor(e,t){super(e,"in",t),this.keys=gR("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},C_=class extends nt{constructor(e,t){super(e,"not-in",t),this.keys=gR("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function gR(n,e){return(e.arrayValue?.values||[]).map(t=>G.fromName(t.referenceValue))}var T_=class extends nt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return XE(t)&&Eu(t.arrayValue,this.value)}},S_=class extends nt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Eu(this.value.arrayValue,t)}},A_=class extends nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Eu(this.value.arrayValue,t)}},R_=class extends nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!XE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Eu(this.value.arrayValue,r))}};var M_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function fA(n,e=null,t=[],r=[],i=null,o=null,s=null){return new M_(n,e,t,r,i,o,s)}function eI(n){let e=ne(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>w_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Lf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Js(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Js(r)).join(",")),e.Te=t}return e.Te}function tI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!qj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hA(n.startAt,e.startAt)&&hA(n.endAt,e.endAt)}function N_(n){return G.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var ea=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function Gj(n,e,t,r,i,o,s,a){return new ea(n,e,t,r,i,o,s,a)}function mR(n){return new ea(n)}function pA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Wj(n){return n.collectionGroup!==null}function fu(n){let e=ne(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new lt(an.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xs(o,r))}),t.has(an.keyField().canonicalString())||e.Ie.push(new Xs(an.keyField(),r))}return e.Ie}function lr(n){let e=ne(n);return e.Ee||(e.Ee=Kj(e,fu(n))),e.Ee}function Kj(n,e){if(n.limitType==="F")return fA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Xs(i.field,o)});let t=n.endAt?new Zs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Zs(n.startAt.position,n.startAt.inclusive):null;return fA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function x_(n,e,t){return new ea(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jf(n,e){return tI(lr(n),lr(e))&&n.limitType===e.limitType}function yR(n){return`${eI(lr(n))}|lt:${n.limitType}`}function Ls(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>pR(i)).join(", ")}]`),Lf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Js(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Js(i)).join(",")),`Target(${r})`})(lr(n))}; limitType=${n.limitType})`}function Uf(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of fu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=dA(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,fu(r),i)||r.endAt&&!(function(s,a,u){let l=dA(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,fu(r),i))})(n,e)}function Qj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vR(n){return(e,t)=>{let r=!1;for(let i of fu(n)){let o=Yj(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Yj(n,e,t){let r=n.field.isKeyField()?G.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ys(u,l):W(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:n.dir})}}var Lr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Po(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return nR(this.inner)}size(){return this.innerSize}};var Jj=new Ve(G.comparator);function Vr(){return Jj}var _R=new Ve(G.comparator);function du(...n){let e=_R;for(let t of n)e=e.insert(t.key,t);return e}function ER(n){let e=_R;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Co(){return pu()}function IR(){return pu()}function pu(){return new Lr(n=>n.toString(),(n,e)=>n.isEqual(e))}var Zj=new Ve(G.comparator),Xj=new lt(G.comparator);function he(...n){let e=Xj;for(let t of n)e=e.add(t);return e}var eU=new lt(de);function tU(){return eU}function nI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vu(e)?"-0":e}}function wR(n){return{integerValue:""+n}}function nU(n,e){return Mj(e)?wR(e):nI(n,e)}var ta=class{constructor(){this._=void 0}};function rU(n,e,t){return n instanceof na?(function(i,o){let s={fields:{[iR]:{stringValue:rR},[sR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&YE(o)&&(o=Vf(o)),o&&(s.fields[oR]=o),{mapValue:s}})(t,e):n instanceof Ro?DR(n,e):n instanceof Mo?CR(n,e):(function(i,o){let s=bR(i,o),a=gA(s)+gA(i.Ae);return I_(s)&&I_(i.Ae)?wR(a):nI(i.serializer,a)})(n,e)}function iU(n,e,t){return n instanceof Ro?DR(n,e):n instanceof Mo?CR(n,e):t}function bR(n,e){return n instanceof ra?(function(r){return I_(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var na=class extends ta{},Ro=class extends ta{constructor(e){super(),this.elements=e}};function DR(n,e){let t=TR(e);for(let r of n.elements)t.some(i=>hr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Mo=class extends ta{constructor(e){super(),this.elements=e}};function CR(n,e){let t=TR(e);for(let r of n.elements)t=t.filter(i=>!hr(i,r));return{arrayValue:{values:t}}}var ra=class extends ta{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function gA(n){return xe(n.integerValue||n.doubleValue)}function TR(n){return XE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function oU(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ro&&i instanceof Ro||r instanceof Mo&&i instanceof Mo?Ws(r.elements,i.elements,hr):r instanceof ra&&i instanceof ra?hr(r.Ae,i.Ae):r instanceof na&&i instanceof na})(n.transform,e.transform)}var P_=class{constructor(e,t){this.version=e,this.transformResults=t}},_i=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function of(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ia=class{};function SR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Iu(n.key,_i.none()):new No(n.key,n.data,_i.none());{let t=n.data,r=Vn.empty(),i=new lt(an.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new jr(n.key,r,new ar(i.toArray()),_i.none())}}function sU(n,e,t){n instanceof No?(function(i,o,s){let a=i.value.clone(),u=yA(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof jr?(function(i,o,s){if(!of(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=yA(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(AR(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function gu(n,e,t,r){return n instanceof No?(function(o,s,a,u){if(!of(o.precondition,s))return a;let l=o.value.clone(),h=vA(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof jr?(function(o,s,a,u){if(!of(o.precondition,s))return a;let l=vA(o.fieldTransforms,u,s),h=s.data;return h.setAll(AR(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return of(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function aU(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=bR(r.transform,i||null);o!=null&&(t===null&&(t=Vn.empty()),t.set(r.field,o))}return t||null}function mA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ws(r,i,(o,s)=>oU(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var No=class extends ia{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},jr=class extends ia{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function AR(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function yA(n,e,t){let r=new Map;Ce(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,iU(s,a,t[i]))}return r}function vA(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,rU(o,s,e))}return r}var Iu=class extends ia{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},O_=class extends ia{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var k_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&sU(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=gu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=IR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=SR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),he())}isEqual(e){return this.batchId===e.batchId&&Ws(this.mutations,e.mutations,(t,r)=>mA(t,r))&&Ws(this.baseMutations,e.baseMutations,(t,r)=>mA(t,r))}},F_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return Zj})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var L_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var V_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Qe,ge;function cU(n){switch(n){case k.OK:return W(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return W(15467,{code:n})}}function RR(n){if(n===void 0)return Or("GRPC error has no .code"),k.UNKNOWN;switch(n){case Qe.OK:return k.OK;case Qe.CANCELLED:return k.CANCELLED;case Qe.UNKNOWN:return k.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return k.INTERNAL;case Qe.UNAVAILABLE:return k.UNAVAILABLE;case Qe.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Qe.NOT_FOUND:return k.NOT_FOUND;case Qe.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Qe.ABORTED:return k.ABORTED;case Qe.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Qe.DATA_LOSS:return k.DATA_LOSS;default:return W(39323,{code:n})}}(ge=Qe||(Qe={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var uU=null;function lU(){return new TextEncoder}var dU=new xr([4294967295,4294967295],0);function _A(n){let e=lU().encode(n),t=new Xv;return t.update(e),new Uint8Array(t.digest())}function EA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xr([t,r],0),new xr([i,o],0)]}var j_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new To(`Invalid padding: ${t}`);if(r<0)throw new To(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new To(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new To(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xr.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(xr.fromNumber(r)));return i.compare(dU)===1&&(i=new xr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=_A(e),[r,i]=EA(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=_A(e),[r,i]=EA(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},To=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var pf=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(oe.min(),i,new Ve(de),Vr(),he())}},wu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,he(),he(),he())}};var Hs=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},gf=class{constructor(e,t){this.targetId=e,this.Ce=t}},mf=class{constructor(e,t,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},yf=class{constructor(){this.ve=0,this.Fe=IA(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),t=he(),r=he();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:o})}}),new wu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=IA()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},U_=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vr(),this.Je=ef(),this.He=ef(),this.Ye=new Ve(de)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(N_(o))if(r===0){let s=new G(o.path);this.et(t,s,jn.newNoDocument(s,oe.min()))}else Ce(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),u=a?this.ct(a,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}uU?.lt((function(h,p,m,y,R){let P={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},N=p.unchangedNames;return N&&(P.bloomFilter={applied:R===0,hashCount:N?.hashCount??0,bitmapLength:N?.bits?.bitmap?.length??0,padding:N?.bits?.padding??0,mightContain:V=>y?.mightContain(V)??!1}),P})(s,e.Ce,this.Ge.ht(),a,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Fr(r).toUint8Array()}catch(u){if(u instanceof lf)return Gs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new j_(s,i,o)}catch(u){return Gs(u instanceof To?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&N_(a.target)){let u=new G(a.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,jn.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=he();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new pf(e,t,this.Ye,this.je,r);return this.je=Vr(),this.Je=ef(),this.He=ef(),this.Ye=new Ve(de),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new yf,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new lt(de),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new lt(de),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yf),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function ef(){return new Ve(G.comparator)}function IA(){return new Ve(G.comparator)}var hU={asc:"ASCENDING",desc:"DESCENDING"},fU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pU={and:"AND",or:"OR"},B_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function H_(n,e){return n.useProto3Json||Lf(e)?e:{value:e}}function vf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function MR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gU(n,e){return vf(n,e.toTimestamp())}function dr(n){return Ce(!!n,49232),oe.fromTimestamp((function(t){let r=kr(t);return new Ze(r.seconds,r.nanos)})(n))}function rI(n,e){return $_(n,e).canonicalString()}function $_(n,e){let t=(function(i){return new ke(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function NR(n){let e=ke.fromString(n);return Ce(FR(e),10190,{key:e.toString()}),e}function q_(n,e){return rI(n.databaseId,e.path)}function s_(n,e){let t=NR(e);if(t.get(1)!==n.databaseId.projectId)throw new H(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new H(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new G(PR(t))}function xR(n,e){return rI(n.databaseId,e)}function mU(n){let e=NR(n);return e.length===4?ke.emptyPath():PR(e)}function z_(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function PR(n){return Ce(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function wA(n,e,t){return{name:q_(n,e),fields:t.value.mapValue.fields}}function yU(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),bt.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),bt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?k.UNKNOWN:RR(l.code);return new H(h,l.message||"")})(s);t=new mf(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=s_(n,r.document.name),o=dr(r.document.updateTime),s=r.document.createTime?dr(r.document.createTime):oe.min(),a=new Vn({mapValue:{fields:r.document.fields}}),u=jn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Hs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=s_(n,r.document),o=r.readTime?dr(r.readTime):oe.min(),s=jn.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Hs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=s_(n,r.document),o=r.removedTargetIds||[];t=new Hs([],o,i,null)}else{if(!("filter"in e))return W(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new V_(i,o),a=r.targetId;t=new gf(a,s)}}return t}function vU(n,e){let t;if(e instanceof No)t={update:wA(n,e.key,e.value)};else if(e instanceof Iu)t={delete:q_(n,e.key)};else if(e instanceof jr)t={update:wA(n,e.key,e.data),updateMask:SU(e.fieldMask)};else{if(!(e instanceof O_))return W(16599,{Vt:e.type});t={verify:q_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof na)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ro)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Mo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ra)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw W(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:gU(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W(27497)})(n,e.precondition)),t}function _U(n,e){return n&&n.length>0?(Ce(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?dr(i.updateTime):dr(o);return s.isEqual(oe.min())&&(s=dr(o)),new P_(s,i.transformResults||[])})(t,e))):[]}function EU(n,e){return{documents:[xR(n,e.path)]}}function IU(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xR(n,i);let o=(function(l){if(l.length!==0)return kR(fr.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(m){return{field:Vs(m.field),direction:DU(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=H_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function wU(n){let e=mU(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ce(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=OR(p);return m instanceof fr&&hR(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(R){return new Xs(js(R.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Lf(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Zs(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Zs(y,m)})(t.endAt)),Gj(e,i,s,o,a,"F",u,l)}function bU(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function OR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=js(t.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=js(t.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=js(t.unaryFilter.field);return nt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=js(t.unaryFilter.field);return nt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}})(n):n.fieldFilter!==void 0?(function(t){return nt.create(js(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fr.create(t.compositeFilter.filters.map(r=>OR(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}})(t.compositeFilter.op))})(n):W(30097,{filter:n})}function DU(n){return hU[n]}function CU(n){return fU[n]}function TU(n){return pU[n]}function Vs(n){return{fieldPath:n.canonicalString()}}function js(n){return an.fromServerFormat(n.fieldPath)}function kR(n){return n instanceof nt?(function(t){if(t.op==="=="){if(lA(t.value))return{unaryFilter:{field:Vs(t.field),op:"IS_NAN"}};if(uA(t.value))return{unaryFilter:{field:Vs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lA(t.value))return{unaryFilter:{field:Vs(t.field),op:"IS_NOT_NAN"}};if(uA(t.value))return{unaryFilter:{field:Vs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vs(t.field),op:CU(t.op),value:t.value}}})(n):n instanceof fr?(function(t){let r=t.getFilters().map(i=>kR(i));return r.length===1?r[0]:{compositeFilter:{op:TU(t.op),filters:r}}})(n):W(54877,{filter:n})}function SU(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var bu=class n{constructor(e,t,r,i,o=oe.min(),s=oe.min(),a=bt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var G_=class{constructor(e){this.yt=e}};function AU(n){let e=wU({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?x_(e,e.limit,"L"):e}var _f=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(xe(e.integerValue));else if("doubleValue"in e){let r=xe(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),vu(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=kr(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Fr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?uR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):cR(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):W(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=Qs,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(xe(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),G.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};_f.Kt=new _f;var W_=class{constructor(){this.Cn=new K_}addToCollectionParentIndex(e,t){return this.Cn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(Ao.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(Ao.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},K_=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new lt(ke.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new lt(ke.comparator)).toArray()}};var dte=new Uint8Array(0);var bA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LR=41943040,In=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(LR,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);var Du=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var DA="LruGarbageCollector",RU=1048576;function CA([n,e],[t,r]){let i=de(n,t);return i===0?de(e,r):i}var Q_=class{constructor(e){this.Ir=e,this.buffer=new lt(CA),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();CA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Y_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){B(DA,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){la(t)?B(DA,"Ignoring IndexedDB error during garbage collection: ",t):await ua(t)}await this.Vr(3e5)})}},J_=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return F.resolve(KE.ce);let r=new Q_(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(bA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bA):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Fs()<=le.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function MU(n,e){return new J_(n,e)}var Z_=class{constructor(){this.changes=new Lr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var X_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var eE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&gu(r.mutation,i,ar.empty(),Ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,t,r=he()){let i=Co();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=du();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,he()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Vr(),s=pu(),a=(function(){return pu()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof jr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),gu(h.mutation,l,h.mutation.getFieldMask(),Ze.now())):s.set(l.key,ar.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>a.set(l,new X_(h,s.get(l)??null))),a))}recalculateAndSaveOverlays(e,t){let r=pu(),i=new Ve((s,a)=>s-a),o=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||ar.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||he()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=IR();h.forEach(m=>{if(!o.has(m)){let y=SR(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Wj(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):F.resolve(Co()),a=yu,u=o;return s.next(l=>F.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,he())).next(h=>({batchId:a,changes:ER(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new G(t)).next(r=>{let i=du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=du();return this.indexManager.getCollectionParents(e,o).next(a=>F.forEach(a,u=>{let l=(function(p,m){return new ea(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,jn.newInvalidDocument(h)))});let a=du();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&gu(h.mutation,l,ar.empty(),Ze.now()),Uf(t,l)&&(a=a.insert(u,l))}),a})}};var tE=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return F.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:AU(i.bundledQuery),readTime:dr(i.readTime)}})(t)),F.resolve()}};var nE=class{constructor(){this.overlays=new Ve(G.comparator),this.qr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Co();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=Co(),o=t.length+1,s=new G(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ve((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Co(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Co(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return F.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new L_(t,r));let o=this.qr.get(t);o===void 0&&(o=he(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var rE=class{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var Cu=class{constructor(){this.Qr=new lt(Ye.$r),this.Ur=new lt(Ye.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ye(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ye(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new G(new ke([])),r=new Ye(t,e),i=new Ye(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new G(new ke([])),r=new Ye(t,e),i=new Ye(t,e+1),o=he();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ye(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ye=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return G.comparator(e.key,t.key)||de(e.Yr,t.Yr)}static Kr(e,t){return de(e.Yr,t.Yr)||G.comparator(e.key,t.key)}};var iE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new lt(Ye.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new k_(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Ye(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,t){return F.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?QE:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ye(t,0),i=new Ye(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new lt(de);return t.forEach(i=>{let o=new Ye(i,0),s=new Ye(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new Ye(new G(o),0),a=new lt(de);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Yr)),!0)},s),F.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ce(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(t.mutations,i=>{let o=new Ye(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ye(t,0),i=this.Zr.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var oE=class{constructor(e){this.ri=e,this.docs=(function(){return new Ve(G.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=Vr();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jn.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Vr(),s=t.path,a=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Sj(Tj(h),r)<=0||(i.has(h.key)||Uf(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,t,r,i){W(9500)}ii(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sE(this)}getSize(e){return F.resolve(this.size)}},sE=class extends Z_{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var aE=class{constructor(e){this.persistence=e,this.si=new Lr(t=>eI(t),tI),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.oi=0,this._i=new Cu,this.targetCount=0,this.ai=Du.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),F.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new Du(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Pr(t),F.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this._i.containsKey(t))}};var Ef=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new KE(0),this.li=!1,this.li=!0,this.hi=new rE,this.referenceDelegate=e(this),this.Pi=new aE(this),this.indexManager=new W_,this.remoteDocumentCache=(function(i){return new oE(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new G_(t),this.Ii=new tE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new iE(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new cE(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return F.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},cE=class extends v_{constructor(e){super(),this.currentSequenceNumber=e}},uE=class n{constructor(e){this.persistence=e,this.Ri=new Cu,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw W(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,r=>{let i=G.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,oe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return F.or([()=>F.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},If=class n{constructor(e,t){this.persistence=e,this.pi=new Lr(r=>Nj(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=MU(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return F.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?F.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,oe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),F.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nf(e.data.value)),t}br(e,t,r){return F.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var lE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=he(),i=he();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var dE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hE=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xS()?8:Rj(ct())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new dE;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(Fs()<=le.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Ls(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):(Fs()<=le.DEBUG&&B("QueryEngine","Query:",Ls(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Fs()<=le.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Ls(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(t))):F.resolve())}ys(e,t){if(pA(t))return F.resolve(null);let r=lr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=x_(t,null,"F"),r=lr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=he(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,a);return this.Cs(t,l,s,u.readTime)?this.ys(e,x_(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return pA(t)||i.isEqual(oe.min())?F.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?F.resolve(null):(Fs()<=le.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ls(t)),this.vs(e,s,t,Cj(i,yu)).next(a=>a))})}Ds(e,t){let r=new lt(vR(e));return t.forEach((i,o)=>{Uf(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return Fs()<=le.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Ls(t)),this.ps.getDocumentsMatchingQuery(e,t,Ao.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var iI="LocalStore",NU=3e8,fE=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Ve(de),this.xs=new Lr(o=>eI(o),tI),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eE(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function xU(n,e,t,r){return new fE(n,e,t,r)}async function VR(n,e){let t=ne(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=he();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:a}))})})}function PU(n,e){let t=ne(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,m=p.keys(),y=F.resolve();return m.forEach(R=>{y=y.next(()=>h.getEntry(u,R)).next(P=>{let N=l.docVersions.get(R);Ce(N!==null,48541),P.version.compareTo(N)<0&&(p.applyToRemoteDocument(P,l),P.isValidDocument()&&(P.setReadTime(l.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=he();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function jR(n){let e=ne(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function OU(n,e){let t=ne(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(bt.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(P,N,V){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=NU?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0})(m,y,h)&&a.push(t.Pi.updateTargetData(o,y))});let u=Vr(),l=he();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(kU(o,s,e.documentUpdates).next(h=>{u=h.ks,l=h.qs})),!r.isEqual(oe.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function kU(n,e,t){let r=he(),i=he();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Vr();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):B(iI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function FU(n,e){let t=ne(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=QE),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LU(n,e){let t=ne(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new bu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function pE(n,e,t){let r=ne(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!la(s))throw s;B(iI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function TA(n,e,t){let r=ne(n),i=oe.min(),o=he();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ne(u),m=p.xs.get(h);return m!==void 0?F.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,h)})(r,s,lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:oe.min(),t?o:he())).next(a=>(VU(r,Qj(e),a),{documents:a,Qs:o})))}function VU(n,e,t){let r=n.Os.get(e)||oe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var wf=class{constructor(){this.activeTargetIds=tU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var gE=class{constructor(){this.Mo=new wf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var mE=class{Oo(e){}shutdown(){}};var SA="ConnectivityMonitor",bf=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){B(SA,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){B(SA,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tf=null;function yE(){return tf===null?tf=(function(){return 268435456+Math.round(2147483648*Math.random())})():tf++,"0x"+tf.toString(16)}var a_="RestConnection",jU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},vE=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===df?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=yE(),a=this.zo(e,t.toUriEncodedString());B(a_,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(a),h=pi(l);return this.Jo(e,a,u,r,h).then(p=>(B(a_,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Gs(a_,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ca})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=jU[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var _E=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var wt="WebChannelConnection",EE=class extends vE{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=yE();return new Promise((a,u)=>{let l=new e_;l.setWithCredentials(!0),l.listenOnce(t_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case lu.NO_ERROR:let p=l.getResponseJson();B(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case lu.TIMEOUT:B(wt,`RPC '${e}' ${s} timed out`),u(new H(k.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:let m=l.getStatus();if(B(wt,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let R=y?.error;if(R&&R.status&&R.message){let P=(function(V){let X=V.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(X)>=0?X:k.UNKNOWN})(R.status);u(new H(P,R.message))}else u(new H(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new H(k.UNAVAILABLE,"Connection failed."));break;default:W(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{B(wt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);B(wt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}T_(e,t,r){let i=yE(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=i_(),a=r_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");B(wt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.I_(p);let m=!1,y=!1,R=new _E({Yo:N=>{y?B(wt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(B(wt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),B(wt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Zo:()=>p.close()}),P=(N,V,X)=>{N.listen(V,ce=>{try{X(ce)}catch(Dt){setTimeout(()=>{throw Dt},0)}})};return P(p,ks.EventType.OPEN,()=>{y||(B(wt,`RPC '${e}' stream ${i} transport opened.`),R.o_())}),P(p,ks.EventType.CLOSE,()=>{y||(y=!0,B(wt,`RPC '${e}' stream ${i} transport closed`),R.a_(),this.E_(p))}),P(p,ks.EventType.ERROR,N=>{y||(y=!0,Gs(wt,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),R.a_(new H(k.UNAVAILABLE,"The operation could not be completed")))}),P(p,ks.EventType.MESSAGE,N=>{if(!y){let V=N.data[0];Ce(!!V,16349);let X=V,ce=X?.error||X[0]?.error;if(ce){B(wt,`RPC '${e}' stream ${i} received error:`,ce);let Dt=ce.status,Vt=(function(v){let E=Qe[v];if(E!==void 0)return RR(E)})(Dt),rt=ce.message;Vt===void 0&&(Vt=k.INTERNAL,rt="Unknown error status: "+Dt+" with message "+ce.message),y=!0,R.a_(new H(Vt,rt)),p.close()}else B(wt,`RPC '${e}' stream ${i} received:`,V),R.u_(V)}}),P(a,n_.STAT_EVENT,N=>{N.stat===Zh.PROXY?B(wt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Zh.NOPROXY&&B(wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.__()},0),R}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function c_(){return typeof document<"u"?document:null}function Bf(n){return new B_(n,!0)}var Df=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var AA="PersistentStream",Cf=class{constructor(e,t,r,i,o,s,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Df(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(Or(t.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new H(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return B(AA,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(B(AA,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},IE=class extends Cf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=yU(this.serializer,e),r=(function(o){if(!("targetChange"in o))return oe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?oe.min():s.readTime?dr(s.readTime):oe.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=z_(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=N_(u)?{documents:EU(o,u)}:{query:IU(o,u).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=MR(o,s.resumeToken);let l=H_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(oe.min())>0){a.readTime=vf(o,s.snapshotVersion.toTimestamp());let l=H_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=bU(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=z_(this.serializer),t.removeTarget=e,this.q_(t)}},wE=class extends Cf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=_U(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=z_(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>vU(this.serializer,r))};this.q_(t)}};var bE=class{},DE=class extends bE{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new H(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,$_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(k.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,$_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(k.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},CE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Or(t),this.aa=!1):B("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var xo="RemoteStore",TE=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Oo(this)&&(B(xo,"Restarting streams for network reachability change."),await(async function(u){let l=ne(u);l.Ea.add(4),await Au(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Hf(l)})(this))})}),this.Ra=new CE(r,i)}};async function Hf(n){if(Oo(n))for(let e of n.da)await e(!0)}async function Au(n){for(let e of n.da)await e(!1)}function UR(n,e){let t=ne(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),cI(t)?aI(t):da(t).O_()&&sI(t,e))}function oI(n,e){let t=ne(n),r=da(t);t.Ia.delete(e),r.O_()&&BR(t,e),t.Ia.size===0&&(r.O_()?r.L_():Oo(t)&&t.Ra.set("Unknown"))}function sI(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}da(n).Y_(e)}function BR(n,e){n.Va.Ue(e),da(n).Z_(e)}function aI(n){n.Va=new U_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),da(n).start(),n.Ra.ua()}function cI(n){return Oo(n)&&!da(n).x_()&&n.Ia.size>0}function Oo(n){return ne(n).Ea.size===0}function HR(n){n.Va=void 0}async function UU(n){n.Ra.set("Online")}async function BU(n){n.Ia.forEach((e,t)=>{sI(n,e)})}async function HU(n,e){HR(n),cI(n)?(n.Ra.ha(e),aI(n)):n.Ra.set("Unknown")}async function $U(n,e,t){if(n.Ra.set("Online"),e instanceof mf&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(n,e)}catch(r){B(xo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tf(n,r)}else if(e instanceof Hs?n.Va.Ze(e):e instanceof gf?n.Va.st(e):n.Va.tt(e),!t.isEqual(oe.min()))try{let r=await jR(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ia.get(l);h&&o.Ia.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ia.get(u);if(!h)return;o.Ia.set(u,h.withResumeToken(bt.EMPTY_BYTE_STRING,h.snapshotVersion)),BR(o,u);let p=new bu(h.target,u,l,h.sequenceNumber);sI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){B(xo,"Failed to raise snapshot:",r),await Tf(n,r)}}async function Tf(n,e,t){if(!la(e))throw e;n.Ea.add(1),await Au(n),n.Ra.set("Offline"),t||(t=()=>jR(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{B(xo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Hf(n)})}function $R(n,e){return e().catch(t=>Tf(n,t,e))}async function $f(n){let e=ne(n),t=Ci(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:QE;for(;qU(e);)try{let i=await FU(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,zU(e,i)}catch(i){await Tf(e,i)}qR(e)&&zR(e)}function qU(n){return Oo(n)&&n.Ta.length<10}function zU(n,e){n.Ta.push(e);let t=Ci(n);t.O_()&&t.X_&&t.ea(e.mutations)}function qR(n){return Oo(n)&&!Ci(n).x_()&&n.Ta.length>0}function zR(n){Ci(n).start()}async function GU(n){Ci(n).ra()}async function WU(n){let e=Ci(n);for(let t of n.Ta)e.ea(t.mutations)}async function KU(n,e,t){let r=n.Ta.shift(),i=F_.from(r,e,t);await $R(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await $f(n)}async function QU(n,e){e&&Ci(n).X_&&await(async function(r,i){if((function(s){return cU(s)&&s!==k.ABORTED})(i.code)){let o=r.Ta.shift();Ci(r).B_(),await $R(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await $f(r)}})(n,e),qR(n)&&zR(n)}async function RA(n,e){let t=ne(n);t.asyncQueue.verifyOperationInProgress(),B(xo,"RemoteStore received new credentials");let r=Oo(t);t.Ea.add(3),await Au(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hf(t)}async function YU(n,e){let t=ne(n);e?(t.Ea.delete(2),await Hf(t)):e||(t.Ea.add(2),await Au(t),t.Ra.set("Unknown"))}function da(n){return n.ma||(n.ma=(function(t,r,i){let o=ne(t);return o.sa(),new IE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:UU.bind(null,n),t_:BU.bind(null,n),r_:HU.bind(null,n),H_:$U.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),cI(n)?aI(n):n.Ra.set("Unknown")):(await n.ma.stop(),HR(n))})),n.ma}function Ci(n){return n.fa||(n.fa=(function(t,r,i){let o=ne(t);return o.sa(),new wE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:GU.bind(null,n),r_:QU.bind(null,n),ta:WU.bind(null,n),na:KU.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await $f(n)):(await n.fa.stop(),n.Ta.length>0&&(B(xo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var SE=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function uI(n,e){if(Or("AsyncQueue",`${e}: ${n}`),la(n))return new H(k.UNAVAILABLE,`${e}: ${n}`);throw n}var Sf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||G.comparator(t.key,r.key):(t,r)=>G.comparator(t.key,r.key),this.keyedMap=du(),this.sortedSet=new Ve(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Af=class{constructor(){this.ga=new Ve(G.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):W(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},oa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Sf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var AE=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},RE=class{constructor(){this.queries=MA(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=ne(t),o=i.queries;i.queries=MA(),o.forEach((s,a)=>{for(let u of a.Sa)u.onError(r)})})(this,new H(k.ABORTED,"Firestore shutting down"))}};function MA(){return new Lr(n=>yR(n),jf)}async function JU(n,e){let t=ne(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new AE,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=uI(s,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&lI(t)}async function ZU(n,e){let t=ne(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function XU(n,e){let t=ne(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&lI(t)}function eB(n,e,t){let r=ne(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function lI(n){n.Ca.forEach(e=>{e.next()})}var ME,NA;(NA=ME||(ME={})).Ma="default",NA.Cache="cache";var NE=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ME.Cache}};var Rf=class{constructor(e){this.key=e}},Mf=class{constructor(e){this.key=e}},xE=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=he(),this.mutatedKeys=he(),this.eu=vR(e),this.tu=new Sf(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Af,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Uf(this.query,p)?p:null,R=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?R!==P&&(r.track({type:3,doc:y}),N=!0):this.su(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,R){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{Rt:N})}};return P(y)-P(R)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new oa(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Af,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Mf(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Rf(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=he();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return oa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},dI="SyncEngine",PE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},OE=class{constructor(e){this.key=e,this.hu=!1}},kE=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Lr(a=>yR(a),jf),this.Iu=new Map,this.Eu=new Set,this.du=new Ve(G.comparator),this.Au=new Map,this.Ru=new Cu,this.Vu={},this.mu=new Map,this.fu=Du.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function tB(n,e,t=!0){let r=JR(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await GR(r,e,t,!0),i}async function nB(n,e){let t=JR(n);await GR(t,e,!0,!1)}async function GR(n,e,t,r){let i=await LU(n.localStore,lr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await rB(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&UR(n.remoteStore,i),a}async function rB(n,e,t,r,i){n.pu=(p,m,y)=>(async function(P,N,V,X){let ce=N.view.ru(V);ce.Cs&&(ce=await TA(P.localStore,N.query,!1).then(({documents:D})=>N.view.ru(D,ce)));let Dt=X&&X.targetChanges.get(N.targetId),Vt=X&&X.targetMismatches.get(N.targetId)!=null,rt=N.view.applyChanges(ce,P.isPrimaryClient,Dt,Vt);return PA(P,N.targetId,rt.au),rt.snapshot})(n,p,m,y);let o=await TA(n.localStore,e,!0),s=new xE(e,o.Qs),a=s.ru(o.documents),u=wu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);PA(n,t,l.au);let h=new PE(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function iB(n,e,t){let r=ne(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!jf(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&oI(r.remoteStore,i.targetId),FE(r,i.targetId)}).catch(ua)):(FE(r,i.targetId),await pE(r.localStore,i.targetId,!0))}async function oB(n,e){let t=ne(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),oI(t.remoteStore,r.targetId))}async function sB(n,e,t){let r=fB(n);try{let i=await(function(s,a){let u=ne(s),l=Ze.now(),h=a.reduce((y,R)=>y.add(R.key),he()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let R=Vr(),P=he();return u.Ns.getEntries(y,h).next(N=>{R=N,R.forEach((V,X)=>{X.isValidDocument()||(P=P.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,R)).next(N=>{p=N;let V=[];for(let X of a){let ce=aU(X,p.get(X.key).overlayedDocument);ce!=null&&V.push(new jr(X.key,ce,lR(ce.value.mapValue),_i.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,V,a)}).next(N=>{m=N;let V=N.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(y,N.batchId,V)})}).then(()=>({batchId:m.batchId,changes:ER(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new Ve(de)),l=l.insert(a,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),await Ru(r,i.changes),await $f(r.remoteStore)}catch(i){let o=uI(i,"Failed to persist write");t.reject(o)}}async function WR(n,e){let t=ne(n);try{let r=await OU(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ce(s.hu,14607):i.removedDocuments.size>0&&(Ce(s.hu,42227),s.hu=!1))}),await Ru(t,r,e)}catch(r){await ua(r)}}function xA(n,e,t){let r=ne(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ne(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(l=!0)}),l&&lI(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aB(n,e,t){let r=ne(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ve(G.comparator);s=s.insert(o,jn.newNoDocument(o,oe.min()));let a=he().add(o),u=new pf(oe.min(),new Map,new Ve(de),s,a);await WR(r,u),r.du=r.du.remove(o),r.Au.delete(e),hI(r)}else await pE(r.localStore,e,!1).then(()=>FE(r,e,t)).catch(ua)}async function cB(n,e){let t=ne(n),r=e.batch.batchId;try{let i=await PU(t.localStore,e);QR(t,r,null),KR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ru(t,i)}catch(i){await ua(i)}}async function uB(n,e,t){let r=ne(n);try{let i=await(function(s,a){let u=ne(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Ce(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);QR(r,e,t),KR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ru(r,i)}catch(i){await ua(i)}}function KR(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function QR(n,e,t){let r=ne(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function FE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||YR(n,r)})}function YR(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(oI(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),hI(n))}function PA(n,e,t){for(let r of t)r instanceof Rf?(n.Ru.addReference(r.key,e),lB(n,r)):r instanceof Mf?(B(dI,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||YR(n,r.key)):W(19791,{wu:r})}function lB(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(B(dI,"New document in limbo: "+t),n.Eu.add(r),hI(n))}function hI(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new G(ke.fromString(e)),r=n.fu.next();n.Au.set(r,new OE(t)),n.du=n.du.insert(t,r),UR(n.remoteStore,new bu(lr(mR(t.path)),r,"TargetPurposeLimboResolution",KE.ce))}}async function Ru(n,e,t){let r=ne(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=lE.As(u.targetId,l);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let h=ne(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(l,m=>F.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>F.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!la(p))throw p;B(iI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.Ms.get(m),R=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(R);h.Ms=h.Ms.insert(m,P)}}})(r.localStore,o))}async function dB(n,e){let t=ne(n);if(!t.currentUser.isEqual(e)){B(dI,"User change. New user:",e.toKey());let r=await VR(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(u=>{u.reject(new H(k.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ru(t,r.Ls)}}function hB(n,e){let t=ne(n),r=t.Au.get(e);if(r&&r.hu)return he().add(r.key);{let i=he(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function JR(n){let e=ne(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aB.bind(null,e),e.Pu.H_=XU.bind(null,e.eventManager),e.Pu.yu=eB.bind(null,e.eventManager),e}function fB(n){let e=ne(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uB.bind(null,e),e}var ZR=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Bf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return xU(this.persistence,new hE,t.initialUser,this.serializer)}Cu(t){return new Ef(uE.mi,this.serializer)}Du(t){return new gE}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),LE=class extends ZR{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ce(this.persistence.referenceDelegate instanceof If,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Y_(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new Ef(r=>If.mi(r,t),this.serializer)}};var pB=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=dB.bind(null,this.syncEngine),await YU(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new RE})()}createDatastore(t){let r=Bf(t.databaseInfo.databaseId),i=(function(s){return new EE(s)})(t.databaseInfo);return(function(s,a,u,l){return new DE(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new TE(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>xA(this.syncEngine,r,0),(function(){return bf.v()?new bf:new mE})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let m=new kE(o,s,a,u,l,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=ne(r);B(xo,"RemoteStore shutting down."),i.Ea.add(5),await Au(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var VE=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ti="FirestoreClient",jE=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ut.UNAUTHENTICATED,this.clientId=mu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{B(Ti,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(B(Ti,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=uI(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function u_(n,e){n.asyncQueue.verifyOperationInProgress(),B(Ti,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await VR(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function OA(n,e){n.asyncQueue.verifyOperationInProgress();let t=await gB(n);B(Ti,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>RA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>RA(e.remoteStore,i)),n._onlineComponents=e}async function gB(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B(Ti,"Using user provided OfflineComponentProvider");try{await u_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Gs("Error using user provided cache. Falling back to memory cache: "+t),await u_(n,new ZR)}}else B(Ti,"Using default OfflineComponentProvider"),await u_(n,new LE(void 0));return n._offlineComponents}async function XR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(B(Ti,"Using user provided OnlineComponentProvider"),await OA(n,n._uninitializedComponentsProvider._online)):(B(Ti,"Using default OnlineComponentProvider"),await OA(n,new pB))),n._onlineComponents}function mB(n){return XR(n).then(e=>e.syncEngine)}async function yB(n){let e=await XR(n),t=e.eventManager;return t.onListen=tB.bind(null,e.syncEngine),t.onUnlisten=iB.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=nB.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oB.bind(null,e.syncEngine),t}function vB(n,e,t={}){let r=new cr;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new VE({next:m=>{h.Nu(),s.enqueueAndForget(()=>ZU(o,p)),m.fromCache&&u.source==="server"?l.reject(new H(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new NE(a,h,{includeMetadataChanges:!0,qa:!0});return JU(o,p)})(await yB(n),n.asyncQueue,e,t,r)),r.promise}function eM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var kA=new Map;var tM="firestore.googleapis.com",FA=!0,Nf=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tM,this.ssl=FA}else this.host=e.host,this.ssl=e.ssl??FA;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RU)throw new H(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Dj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eM(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},sa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new l_;switch(r.type){case"firstParty":return new p_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=kA.get(t);r&&(B("ComponentProvider","Removing Datastore"),kA.delete(t),r.terminate())})(this),Promise.resolve()}};function _B(n,e,t,r={}){n=Ks(n,sa);let i=pi(e),o=n._getSettings(),s=Y(O({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(zh(`https://${a}`),Gh("Firestore",!0)),o.host!==tM&&o.host!==a&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Y(O({},o),{host:a,ssl:i,emulatorOptions:r});if(!or(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=ut.MOCK_USER;else{l=TS(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new H(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ut(p)}n._authCredentials=new d_(new sf(l,h))}}var xf=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Lt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Su(t,n._jsonSchema))return new n(e,r||null,new G(ke.fromString(t.referencePath)))}};Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Je("string",Lt._jsonSchemaVersion),referencePath:Je("string")};var Ei=class n extends xf{constructor(e,t,r){super(e,t,mR(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new G(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function qf(n,e,...t){if(n=It(n),UA("collection","path",e),n instanceof sa){let r=ke.fromString(e,...t);return nA(r),new Ei(n,null,r)}{if(!(n instanceof Lt||n instanceof Ei))throw new H(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ke.fromString(e,...t));return nA(r),new Ei(n.firestore,null,r)}}function Si(n,e,...t){if(n=It(n),arguments.length===1&&(e=mu.newId()),UA("doc","path",e),n instanceof sa){let r=ke.fromString(e,...t);return tA(r),new Lt(n,null,new G(r))}{if(!(n instanceof Lt||n instanceof Ei))throw new H(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ke.fromString(e,...t));return tA(r),new Lt(n.firestore,n instanceof Ei?n.converter:null,new G(r))}}var LA="AsyncQueue",Pf=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Df(this,"async_queue_retry"),this._c=()=>{let r=c_();r&&B(LA,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=c_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=c_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new cr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!la(e))throw e;B(LA,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Or("INTERNAL UNHANDLED ERROR: ",VA(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=SE.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&W(47125,{Pc:VA(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function VA(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var aa=class extends sa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Pf,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Pf(e),this._firestoreClient=void 0,await e}}};function nM(n,e){let t=typeof n=="object"?n:Yh(),r=typeof n=="string"?n:e||df,i=uu(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=CS("firestore");o&&_B(i,...o)}return i}function rM(n){if(n._terminated)throw new H(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||EB(n),n._firestoreClient}function EB(n){let e=n._freezeSettings(),t=(function(i,o,s,a){return new __(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,eM(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new jE(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var Ii=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(bt.fromBase64String(e))}catch(t){throw new H(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Su(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Ii._jsonSchemaVersion="firestore/bytes/1.0",Ii._jsonSchema={type:Je("string",Ii._jsonSchemaVersion),bytes:Je("string")};var Tu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new H(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Of=class{constructor(e){this._methodName=e}};var wi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new H(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new H(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Su(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};wi._jsonSchemaVersion="firestore/geoPoint/1.0",wi._jsonSchema={type:Je("string",wi._jsonSchemaVersion),latitude:Je("number"),longitude:Je("number")};var bi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Su(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new H(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:Je("string",bi._jsonSchemaVersion),vectorValues:Je("object")};var IB=/^__.*__$/,UE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,t,this.fieldTransforms):new No(e,this.data,t,this.fieldTransforms)}};function iM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ac:n})}}var BE=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(O(O({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iM(this.Ac)&&IB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},HE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Bf(e)}Cc(e,t,r,i=!1){return new BE({Ac:e,methodName:t,Dc:r,path:an.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wB(n){let e=n._freezeSettings(),t=Bf(n._databaseId);return new HE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function bB(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);cM("Data must be an object, but it was:",s,r);let a=sM(r,s),u,l;if(o.merge)u=new ar(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=DB(e,p,t);if(!s.contains(m))throw new H(k.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);TB(h,m)||h.push(m)}u=new ar(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new UE(new Vn(a),u,l)}function oM(n,e){if(aM(n=It(n)))return cM("Unsupported field value:",e,n),sM(n,e);if(n instanceof Of)return(function(r,i){if(!iM(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=oM(a,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nU(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ze.fromDate(r);return{timestampValue:vf(i.serializer,o)}}if(r instanceof Ze){let o=new Ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vf(i.serializer,o)}}if(r instanceof wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ii)return{bytesValue:MR(i.serializer,r._byteString)};if(r instanceof Lt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bi)return(function(s,a){return{mapValue:{fields:{[JE]:{stringValue:ZE},[Qs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Sc("VectorValues must only contain numeric values.");return nI(a.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${WE(r)}`)})(n,e)}function sM(n,e){let t={};return nR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Po(n,(r,i)=>{let o=oM(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function aM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof wi||n instanceof Ii||n instanceof Lt||n instanceof Of||n instanceof bi)}function cM(n,e,t){if(!aM(t)||!BA(t)){let r=WE(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function DB(n,e,t){if((e=It(e))instanceof Tu)return e._internalPath;if(typeof e=="string")return uM(n,e);throw kf("Field path arguments must be of type string or ",n,!1,void 0,t)}var CB=new RegExp("[~\\*/\\[\\]]");function uM(n,e,t){if(e.search(CB)>=0)throw kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tu(...e.split("."))._internalPath}catch{throw kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new H(k.INVALID_ARGUMENT,a+n+u)}function TB(n,e){return n.some(t=>t.isEqual(e))}var Ff=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new $E(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(lM("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},$E=class extends Ff{data(){return super.data()}};function lM(n,e){return typeof e=="string"?uM(n,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}function SB(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new H(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qE=class{convertValue(e,t="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Po(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[Qs].arrayValue?.values?.map(r=>xe(r.doubleValue));return new bi(t)}convertGeoPoint(e){return new wi(xe(e.latitude),xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Vf(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){let t=kr(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ke.fromString(e);Ce(FR(r),9688,{name:e});let i=new hf(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(t)||Or(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function AB(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Bs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},$s=class n extends Ff{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new qs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(lM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:Je("string",$s._jsonSchemaVersion),bundleSource:Je("string","DocumentSnapshot"),bundleName:Je("string"),bundle:Je("string")};var qs=class extends $s{data(e={}){return super.data(e)}},zs=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qs(this._firestore,this._userDataWriter,r.key,r,new Bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new H(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new qs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new qs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Bs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:RB(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function RB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:n})}}zs._jsonSchemaVersion="firestore/querySnapshot/1.0",zs._jsonSchema={type:Je("string",zs._jsonSchemaVersion),bundleSource:Je("string","QuerySnapshot"),bundleName:Je("string"),bundle:Je("string")};var zE=class extends qE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}};function zf(n){n=Ks(n,xf);let e=Ks(n.firestore,aa),t=rM(e),r=new zE(e);return SB(n._query),vB(t,n._query).then(i=>new zs(e,r,n,i))}function ha(n,e,t){n=Ks(n,Lt);let r=Ks(n.firestore,aa),i=AB(n.converter,e,t);return dM(r,[bB(wB(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,_i.none())])}function Gf(n){return dM(Ks(n.firestore,aa),[new Iu(n._key,_i.none())])}function dM(n,e){return(function(r,i){let o=new cr;return r.asyncQueue.enqueueAndForget(async()=>sB(await mB(r),i,o)),o.promise})(rM(n),e)}(function(e,t=!0){(function(i){ca=i})(vi),yi(new En("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new aa(new h_(r.getProvider("auth-internal")),new g_(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new H(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hf(l.options.projectId,h)})(s,i),s);return o=O({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ln(ZS,XS,e),Ln(ZS,XS,"esm2020")})();function SM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var AM=SM,RM=new Mr("auth","Firebase",SM());var Zf=new gi("@firebase/auth");function MB(n,...e){Zf.logLevel<=le.WARN&&Zf.warn(`Auth (${vi}): ${n}`,...e)}function Kf(n,...e){Zf.logLevel<=le.ERROR&&Zf.error(`Auth (${vi}): ${n}`,...e)}function gr(n,...e){throw LI(n,...e)}function ko(n,...e){return LI(n,...e)}function MM(n,e,t){let r=Y(O({},AM()),{[e]:t});return new Mr("auth","Firebase",r).create(e,{appName:n.name})}function Hr(n){return MM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return RM.create(n,...e)}function Q(n,e,...t){if(!n)throw LI(e,...t)}function Ur(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Kf(e),new Error(e)}function Mi(n,e){n||Ur(e)}function mI(){return typeof self<"u"&&self.location?.href||""}function NB(){return hM()==="http:"||hM()==="https:"}function hM(){return typeof self<"u"&&self.location?.protocol||null}function xB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NB()||RS()||"connection"in navigator)?navigator.onLine:!0}function PB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Fo=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mi(t>e,"Short delay should be less than long delay!"),this.isMobile=SS()||MS()}get(){return xB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function VI(n,e){Mi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Xf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ur("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ur("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ur("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var OB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var kB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FB=new Fo(3e4,6e4);function Ni(n,e){return n.tenantId&&!e.tenantId?Y(O({},e),{tenantId:n.tenantId}):e}async function xi(n,e,t,r,i={}){return NM(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=au(O({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=O({method:e,headers:u},o);return AS()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&pi(n.emulatorConfig.host)&&(l.credentials="include"),Xf.fetch()(await xM(n,n.config.apiHost,t,a),l)})}async function NM(n,e,t){n._canInitEmulator=!1;let r=O(O({},OB),e);try{let i=new yI(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Wf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Wf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Wf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw MM(n,h,l);gr(n,h)}}catch(i){if(i instanceof sn)throw i;gr(n,"network-request-failed",{message:String(i)})}}async function Vu(n,e,t,r,i={}){let o=await xi(n,e,t,r,i);return"mfaPendingCredential"in o&&gr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function xM(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?VI(n.config,i):`${n.config.apiScheme}://${i}`;return kB.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function LB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var yI=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(ko(this.auth,"network-request-failed")),FB.get())})}};function Wf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=ko(n,e,r);return i.customData._tokenResponse=t,i}function fM(n){return n!==void 0&&n.enterprise!==void 0}var vI=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return LB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function VB(n,e){return xi(n,"GET","/v2/recaptchaConfig",Ni(n,e))}async function jB(n,e){return xi(n,"POST","/v1/accounts:delete",e)}async function ep(n,e){return xi(n,"POST","/v1/accounts:lookup",e)}function Nu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PM(n,e=!1){let t=It(n),r=await t.getIdToken(e),i=jI(r);Q(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Nu(fI(i.auth_time)),issuedAtTime:Nu(fI(i.iat)),expirationTime:Nu(fI(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function fI(n){return Number(n)*1e3}function jI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Kf("JWT malformed, contained fewer than 3 sections"),null;try{let i=$h(t);return i?JSON.parse(i):(Kf("Failed to decode base64 JWT payload"),null)}catch(i){return Kf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function pM(n){let e=jI(n);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Pu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof sn&&UB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function UB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var _I=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Ou=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nu(this.lastLoginAt),this.creationTime=Nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function tp(n){let e=n.auth,t=await n.getIdToken(),r=await Pu(n,ep(e,{idToken:t}));Q(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?kM(i.providerUserInfo):[],s=BB(n.providerData,o),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ou(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)}async function OM(n){let e=It(n);await tp(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function kM(n){return n.map(r=>{var i=r,{providerId:e}=i,t=tg(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function HB(n,e){let t=await NM(n,{},async()=>{let r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await xM(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&pi(n.emulatorConfig.host)&&(u.credentials="include"),Xf.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $B(n,e){return xi(n,"POST","/v2/accounts:revokeToken",Ni(n,e))}var xu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):pM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let t=pM(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await HB(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(Q(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Q(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ur("not implemented")}};function Ai(n,e){Q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ri=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=tg(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _I(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ou(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Pu(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return PM(this,e)}reload(){return OM(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>O({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Y(O({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await tp(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Wt(this.auth.app))return Promise.reject(Hr(this.auth));let e=await this.getIdToken();return await Pu(this,jB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Y(O({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>O({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:R,stsTokenManager:P}=t;Q(p&&P,e,"internal-error");let N=xu.fromJSON(this.name,P);Q(typeof p=="string",e,"internal-error"),Ai(r,e.name),Ai(i,e.name),Q(typeof m=="boolean",e,"internal-error"),Q(typeof y=="boolean",e,"internal-error"),Ai(o,e.name),Ai(s,e.name),Ai(a,e.name),Ai(u,e.name),Ai(l,e.name),Ai(h,e.name);let V=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:N,createdAt:l,lastLoginAt:h});return R&&Array.isArray(R)&&(V.providerData=R.map(X=>O({},X))),u&&(V._redirectEventId=u),V}static async _fromIdTokenResponse(e,t,r=!1){let i=new xu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await tp(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Q(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?kM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new xu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Ou(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var gM=new Map;function Br(n){Mi(n instanceof Function,"Expected a class definition");let e=gM.get(n);return e?(Mi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gM.set(n,e),e)}var qB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),EI=qB;function Qf(n,e,t){return`firebase:${n}:${e}:${t}`}var np=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Qf(this.userKey,i.apiKey,o),this.fullPersistenceKey=Qf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await ep(this.auth,{idToken:e}).catch(()=>{});return t?Ri._fromGetAccountInfoResponse(this.auth,t,e):null}return Ri._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Br(EI),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Br(EI),s=Qf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let m=await ep(e,{idToken:h}).catch(()=>{});if(!m)break;p=await Ri._fromGetAccountInfoResponse(e,m,h)}else p=Ri._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function mM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BM(e))return"Blackberry";if(HM(e))return"Webos";if(LM(e))return"Safari";if((e.includes("chrome/")||VM(e))&&!e.includes("edge/"))return"Chrome";if(UM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function FM(n=ct()){return/firefox\//i.test(n)}function LM(n=ct()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VM(n=ct()){return/crios\//i.test(n)}function jM(n=ct()){return/iemobile/i.test(n)}function UM(n=ct()){return/android/i.test(n)}function BM(n=ct()){return/blackberry/i.test(n)}function HM(n=ct()){return/webos/i.test(n)}function UI(n=ct()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zB(n=ct()){return UI(n)&&!!window.navigator?.standalone}function GB(){return NS()&&document.documentMode===10}function $M(n=ct()){return UI(n)||UM(n)||HM(n)||BM(n)||/windows phone/i.test(n)||jM(n)}function qM(n,e=[]){let t;switch(n){case"Browser":t=mM(ct());break;case"Worker":t=`${mM(ct())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vi}/${r}`}var II=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function WB(n,e={}){return xi(n,"GET","/v2/passwordPolicy",Ni(n,e))}var KB=6,wI=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var bI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rp(this),this.idTokenSubscription=new rp(this),this.beforeStateQueue=new II(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=RM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Br(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await np.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await ep(this,{idToken:e}),r=await Ri._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Wt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await tp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=PB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Wt(this.app))return Promise.reject(Hr(this));let t=e?It(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Wt(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Wt(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await WB(this),t=new wI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await $B(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Br(e)||this._popupRedirectResolver;Q(t,this,"argument-error"),this.redirectPersistenceManager=await np.create(this,[Br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&MB(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Vo(n){return It(n)}var rp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=kS(t=>this.observer=t)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QB(n){lp=n}function zM(n){return lp.loadJS(n)}function YB(){return lp.recaptchaEnterpriseScript}function JB(){return lp.gapiScript}function GM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var DI=class{constructor(){this.enterprise=new CI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},CI=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var ZB="recaptcha-enterprise",WM="NO_RECAPTCHA",TI=class{constructor(e){this.type=ZB,this.auth=Vo(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{VB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new vI(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){let u=window.grecaptcha;fM(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(WM)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DI().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&fM(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=YB();u.length!==0&&(u+=a),zM(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function Mu(n,e,t,r=!1,i=!1){let o=new TI(n),s;if(i)s=WM;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}let a=O({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function SI(n,e,t,r,i){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=await Mu(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=await Mu(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)});else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=await Mu(n,e,t);return r(n,o).catch(async s=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=await Mu(n,e,t,!1,!0);return r(n,a)}return Promise.reject(s)})}else{let o=await Mu(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")}function KM(n,e){let t=uu(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(or(o,e??{}))return i;gr(i,"already-initialized")}return t.initialize({options:e})}function XB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Br);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function QM(n,e,t){let r=Vo(n);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=YM(e),{host:s,port:a}=eH(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(or(l,r.config.emulator)&&or(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,pi(s)?(zh(`${o}//${s}${u}`),Gh("Auth",!0)):i||tH()}function YM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function eH(n){let e=YM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:yM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:yM(s)}}}function yM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function tH(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ku=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ur("not implemented")}_getIdTokenResponse(e){return Ur("not implemented")}_linkToIdToken(e,t){return Ur("not implemented")}_getReauthenticationResolver(e){return Ur("not implemented")}};async function nH(n,e){return xi(n,"POST","/v1/accounts:signUp",e)}async function rH(n,e){return Vu(n,"POST","/v1/accounts:signInWithPassword",Ni(n,e))}async function iH(n,e){return Vu(n,"POST","/v1/accounts:signInWithEmailLink",Ni(n,e))}async function oH(n,e){return Vu(n,"POST","/v1/accounts:signInWithEmailLink",Ni(n,e))}var Fu=class n extends ku{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return SI(e,t,"signInWithPassword",rH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return iH(e,{email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return SI(e,r,"signUpPassword",nH,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return oH(e,{idToken:t,email:this._email,oobCode:this._password});default:gr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function pI(n,e){return Vu(n,"POST","/v1/accounts:signInWithIdp",Ni(n,e))}function sH(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function aH(n){let e=Ps(Os(n)).link,t=e?Ps(Os(e)).deep_link_id:null,r=Ps(Os(n)).deep_link_id;return(r?Ps(Os(r)).link:null)||r||t||e||n}var ip=class n{constructor(e){let t=Ps(Os(e)),r=t.apiKey??null,i=t.oobCode??null,o=sH(t.mode??null);Q(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=aH(e);try{return new n(t)}catch{return null}}};var JM=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Fu._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=ip.parseLink(r);return Q(i,"argument-error"),Fu._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),op=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var AI=class extends op{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function cH(n,e){return Vu(n,"POST","/v1/accounts:signUp",Ni(n,e))}var fa=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await Ri._fromIdTokenResponse(e,r,i),s=vM(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=vM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function vM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var RI=class n extends sn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function ZM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?RI._fromErrorAndOperation(n,o,e,r):o})}async function uH(n,e,t=!1){let r=await Pu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return fa._forOperation(n,"link",r)}async function lH(n,e,t=!1){let{auth:r}=n;if(Wt(r.app))return Promise.reject(Hr(r));let i="reauthenticate";try{let o=await Pu(n,ZM(r,i,e,n),t);Q(o.idToken,r,"internal-error");let s=jI(o.idToken);Q(s,r,"internal-error");let{sub:a}=s;return Q(n.uid===a,r,"user-mismatch"),fa._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&gr(r,"user-mismatch"),o}}async function XM(n,e,t=!1){if(Wt(n.app))return Promise.reject(Hr(n));let r="signIn",i=await ZM(n,r,e),o=await fa._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function eN(n,e){return XM(Vo(n),e)}async function tN(n){let e=Vo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BI(n,e,t){if(Wt(n.app))return Promise.reject(Hr(n));let r=Vo(n),s=await SI(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cH,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&tN(n),u}),a=await fa._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function HI(n,e,t){return Wt(n.app)?Promise.reject(Hr(n)):eN(It(n),JM.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tN(n),r})}function nN(n,e,t,r){return It(n).onIdTokenChanged(e,t,r)}function rN(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function $I(n,e,t,r){return It(n).onAuthStateChanged(e,t,r)}function qI(n){return It(n).signOut()}var sp="__sak";var ap=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(sp,"1"),this.storage.removeItem(sp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var dH=1e3,hH=10,fH=(()=>{class n extends ap{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=$M(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);GB()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,hH):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},dH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),iN=fH;var pH=(()=>{class n extends ap{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),zI=pH;function gH(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var mH=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await gH(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function oN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var MI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=oN("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function pr(){return window}function yH(n){pr().location.href=n}function sN(){return typeof pr().WorkerGlobalScope<"u"&&typeof pr().importScripts=="function"}async function vH(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _H(){return navigator?.serviceWorker?.controller||null}function EH(){return sN()?self:null}var aN="firebaseLocalStorageDb",IH=1,cp="firebaseLocalStorage",cN="fbase_key",Lo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function dp(n,e){return n.transaction([cp],e?"readwrite":"readonly").objectStore(cp)}function wH(){let n=indexedDB.deleteDatabase(aN);return new Lo(n).toPromise()}function NI(){let n=indexedDB.open(aN,IH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(cp,{keyPath:cN})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(cp)?e(r):(r.close(),await wH(),e(await NI()))})})}async function _M(n,e,t){let r=dp(n,!0).put({[cN]:e,value:t});return new Lo(r).toPromise()}async function bH(n,e){let t=dp(n,!1).get(e),r=await new Lo(t).toPromise();return r===void 0?null:r.value}function EM(n,e){let t=dp(n,!0).delete(e);return new Lo(t).toPromise()}var DH=800,CH=3,TH=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await NI(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>CH)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return sN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mH._getInstance(EH()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vH(),!this.activeServiceWorker)return;this.sender=new MI(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||_H()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await NI();return await _M(t,sp,"1"),await EM(t,sp),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>_M(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>bH(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>EM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=dp(o,!1).getAll();return new Lo(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),uN=TH;var Ete=GM("rcb"),Ite=new Fo(3e4,6e4);function SH(n,e){return e?Br(e):(Q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Lu=class extends ku{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pI(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function AH(n){return XM(n.auth,new Lu(n),n.bypassAuthState)}function RH(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),lH(t,new Lu(n),n.bypassAuthState)}async function MH(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),uH(t,new Lu(n),n.bypassAuthState)}var xI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AH;case"linkViaPopup":case"linkViaRedirect":return MH;case"reauthViaPopup":case"reauthViaRedirect":return RH;default:gr(this.auth,"internal-error")}}resolve(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var wte=new Fo(2e3,1e4);var NH="pendingRedirect",Yf=new Map,PI=class extends xI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yf.get(this.auth._key());if(!e){try{let r=await xH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yf.set(this.auth._key(),e)}return this.bypassAuthState||Yf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function xH(n,e){let t=kH(e),r=OH(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function PH(n,e){Yf.set(n._key(),e)}function OH(n){return Br(n._redirectPersistence)}function kH(n){return Qf(NH,n.config.apiKey,n.name)}async function FH(n,e,t=!1){if(Wt(n.app))return Promise.reject(Hr(n));let r=Vo(n),i=SH(r,e),s=await new PI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var LH=600*1e3,OI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VH(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!lN(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ko(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LH&&this.cachedEventUids.clear(),this.cachedEventUids.has(IM(e))}saveEventToCache(e){this.cachedEventUids.add(IM(e)),this.lastProcessedEventTime=Date.now()}};function IM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function lN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function VH(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lN(n);default:return!1}}async function jH(n,e={}){return xi(n,"GET","/v1/projects",e)}var UH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BH=/^https?/;async function HH(n){if(n.config.emulator)return;let{authorizedDomains:e}=await jH(n);for(let t of e)try{if($H(t))return}catch{}gr(n,"unauthorized-domain")}function $H(n){let e=mI(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!BH.test(t))return!1;if(UH.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var qH=new Fo(3e4,6e4);function wM(){let n=pr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function zH(n){return new Promise((e,t)=>{function r(){wM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wM(),t(ko(n,"network-request-failed"))},timeout:qH.get()})}if(pr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(pr().gapi?.load)r();else{let i=GM("iframefcb");return pr()[i]=()=>{gapi.load?r():t(ko(n,"network-request-failed"))},zM(`${JB()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Jf=null,e})}var Jf=null;function GH(n){return Jf=Jf||zH(n),Jf}var WH=new Fo(5e3,15e3),KH="__/auth/iframe",QH="emulator/auth/iframe",YH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZH(n){let e=n.config;Q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?VI(e,QH):`https://${n.config.authDomain}/${KH}`,r={apiKey:e.apiKey,appName:n.name,v:vi},i=JH.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${au(r).slice(1)}`}async function XH(n){let e=await GH(n),t=pr().gapi;return Q(t,n,"internal-error"),e.open({where:document.body,url:ZH(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YH,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=ko(n,"network-request-failed"),a=pr().setTimeout(()=>{o(s)},WH.get());function u(){pr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var e$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t$=500,n$=600,r$="_blank",i$="http://localhost",up=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function o$(n,e,t,r=t$,i=n$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Y(O({},e$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=ct().toLowerCase();t&&(a=VM(l)?r$:t),FM(l)&&(e=e||i$,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,R])=>`${m}${y}=${R},`,"");if(zB(l)&&a!=="_self")return s$(e||"",a),new up(null);let p=window.open(e||"",a,h);Q(p,n,"popup-blocked");try{p.focus()}catch{}return new up(p)}function s$(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var a$="__/auth/handler",c$="emulator/auth/handler",u$=encodeURIComponent("fac");async function bM(n,e,t,r,i,o){Q(n.config.authDomain,n,"auth-domain-config-required"),Q(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vi,eventId:i};if(e instanceof op){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",OS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof AI){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await n._getAppCheckToken(),l=u?`#${u$}=${encodeURIComponent(u)}`:"";return`${l$(n)}?${au(a).slice(1)}${l}`}function l$({config:n}){return n.emulator?VI(n,c$):`https://${n.authDomain}/${a$}`}var gI="webStorageSupport",kI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zI,this._completeRedirectFn=FH,this._overrideRedirectResult=PH}async _openPopup(e,t,r,i){Mi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await bM(e,t,r,mI(),i);return o$(e,o,oN())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await bM(e,t,r,mI(),i);return yH(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Mi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await XH(e),r=new OI(e);return t.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(gI,{type:gI},i=>{let o=i?.[0]?.[gI];o!==void 0&&t(!!o),gr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HH(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $M()||LM()||UI()}},dN=kI;var DM="@firebase/auth",CM="1.11.1";var FI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function d$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h$(n){yi(new En("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Q(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qM(n)},l=new bI(r,i,o,u);return XB(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),yi(new En("auth-internal",e=>{let t=Vo(e.getProvider("auth").getImmediate());return(r=>new FI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ln(DM,CM,d$(n)),Ln(DM,CM,"esm2020")}var f$=300,p$=Fv("authIdTokenMaxAge")||f$,TM=null,g$=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>p$)return;let i=t?.token;TM!==i&&(TM=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function GI(n=Yh()){let e=uu(n,"auth");if(e.isInitialized())return e.getImmediate();let t=KM(n,{popupRedirectResolver:dN,persistence:[uN,iN,zI]}),r=Fv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=g$(o.toString());rN(t,s,()=>s(t.currentUser)),nN(t,a=>s(a))}}let i=Ov("auth");return i&&QM(t,`http://${i}`),t}function m$(){return document.getElementsByTagName("head")?.[0]??document}QB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=ko("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",m$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h$("Browser");var y$={apiKey:"AIzaSyCPXzTohAyT9gYvKNNoel60EaOo8rR_OMs",authDomain:"moncenip-toh2025-1.firebaseapp.com",projectId:"moncenip-toh2025-1",storageBucket:"moncenip-toh2025-1.firebasestorage.app",messagingSenderId:"755483682116",appId:"1:755483682116:web:00d155b232aba5f678a311"},hN=Zv(y$),mr=nM(hN),ju=GI(hN);var Pi=class n{_messages=qt([],{});messages=this._messages.asReadonly();add(e){this._messages.update(t=>[...t,e])}clear(){this._messages.set([])}static \u0275fac=function(t){return new(t||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kt=class n{constructor(e){this.messageService=e;this.loadHeroesFromFirestore()}collectionName="heroes";heroesSubject=new Pe([]);heroes$=this.heroesSubject.asObservable();log(e){this.messageService.add(`HeroService: ${e}`)}fromDto(e){return new xs(e.id,e.name,e.attack,e.dodge,e.damage,e.hp,e.weaponId)}toDto(e){return{id:e.id,name:e.name,attack:e.attack,dodge:e.dodge,damage:e.damage,hp:e.hp,weaponId:e.weaponId??null}}async loadHeroesFromFirestore(){try{let e=qf(mr,this.collectionName),r=(await zf(e)).docs.map(i=>this.fromDto(i.data()));this.heroesSubject.next(r),this.log("h\xE9ros charg\xE9s depuis Firestore")}catch(e){this.log("Erreur lors du chargement des h\xE9ros : "+e)}}getHeroes(){return this.heroes$}getHero(e){return this.heroes$.pipe(ye(t=>t.find(r=>r.id===e)))}getHeroesByWeapon(e){return this.heroes$.pipe(ye(t=>t.filter(r=>r.weaponId===e)))}getNextId(){let e=this.heroesSubject.value.map(t=>t.id);return e.length?Math.max(...e)+1:1}addHero(e){let t=[...this.heroesSubject.value,e];this.heroesSubject.next(t),this.log(`h\xE9ros ajout\xE9 (local) id=${e.id}`);let r=this.toDto(e),i=Si(mr,this.collectionName,String(e.id));ha(i,r).then(()=>this.log(`h\xE9ros ajout\xE9 dans Firestore id=${e.id}`)).catch(o=>this.log("Erreur lors de l'ajout du h\xE9ros dans Firestore : "+o))}updateHero(e){let t=[...this.heroesSubject.value],r=t.findIndex(s=>s.id===e.id);if(r===-1){this.log(`updateHero: h\xE9ro id=${e.id} introuvable en local`);return}t[r]=e,this.heroesSubject.next(t),this.log(`h\xE9ros mis \xE0 jour (local) id=${e.id}`);let i=this.toDto(e),o=Si(mr,this.collectionName,String(e.id));ha(o,i,{merge:!0}).then(()=>this.log(`h\xE9ros mis \xE0 jour dans Firestore id=${e.id}`)).catch(s=>this.log("Erreur lors de la mise \xE0 jour du h\xE9ros dans Firestore : "+s))}deleteHero(e){let t=this.heroesSubject.value.filter(i=>i.id!==e);this.heroesSubject.next(t),this.log(`h\xE9ros supprim\xE9 (local) id=${e}`);let r=Si(mr,this.collectionName,String(e));Gf(r).then(()=>this.log(`h\xE9ros supprim\xE9 dans Firestore id=${e}`)).catch(i=>this.log("Erreur lors de la suppression du h\xE9ros dans Firestore : "+i))}static \u0275fac=function(t){return new(t||n)(J(Pi))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var ga=class{constructor(e,t,r,i,o,s){this.id=e;this.name=t;this.attack=r;this.dodge=i;this.damage=o;this.hp=s}get totalPoints(){return this.attack+this.dodge+this.damage+this.hp}isValid(){return[this.attack,this.dodge,this.damage,this.hp].every(r=>r>=-5&&r<=5)&&this.totalPoints===0}};var Qt=class n{constructor(e){this.messageService=e;this.loadWeaponsFromFirestore()}collectionName="weapons";weaponsSubject=new Pe([]);weapons$=this.weaponsSubject.asObservable();log(e){this.messageService.add(`WeaponService: ${e}`)}fromDto(e){return new ga(e.id,e.name,e.attack,e.dodge,e.damage,e.hp)}toDto(e){return{id:e.id,name:e.name,attack:e.attack,dodge:e.dodge,damage:e.damage,hp:e.hp}}async loadWeaponsFromFirestore(){try{let e=qf(mr,this.collectionName),r=(await zf(e)).docs.map(i=>this.fromDto(i.data()));this.weaponsSubject.next(r),this.log("armes charg\xE9es depuis Firestore")}catch(e){this.log("Erreur lors du chargement des armes : "+e)}}getWeapons(){return this.weapons$}getWeapon(e){return this.weapons$.pipe(ye(t=>t.find(r=>r.id===e)))}getNextId(){let e=this.weaponsSubject.value.map(t=>t.id);return e.length?Math.max(...e)+1:1}addWeapon(e){let t=[...this.weaponsSubject.value,e];this.weaponsSubject.next(t),this.log(`arme ajout\xE9e (local) id=${e.id}`);let r=this.toDto(e),i=Si(mr,this.collectionName,String(e.id));ha(i,r).then(()=>this.log(`arme ajout\xE9e dans Firestore id=${e.id}`)).catch(o=>this.log("Erreur lors de l'ajout de l'arme dans Firestore : "+o))}updateWeapon(e){let t=[...this.weaponsSubject.value],r=t.findIndex(s=>s.id===e.id);if(r===-1){this.log(`updateWeapon: arme id=${e.id} introuvable en local`);return}t[r]=e,this.weaponsSubject.next(t),this.log(`arme mise \xE0 jour (local) id=${e.id}`);let i=this.toDto(e),o=Si(mr,this.collectionName,String(e.id));ha(o,i,{merge:!0}).then(()=>this.log(`arme mise \xE0 jour dans Firestore id=${e.id}`)).catch(s=>this.log("Erreur lors de la mise \xE0 jour de l'arme dans Firestore : "+s))}deleteWeapon(e){let t=this.weaponsSubject.value.filter(i=>i.id!==e);this.weaponsSubject.next(t),this.log(`arme supprim\xE9e (local) id=${e}`);let r=Si(mr,this.collectionName,String(e));Gf(r).then(()=>this.log(`arme supprim\xE9e dans Firestore id=${e}`)).catch(i=>this.log("Erreur lors de la suppression de l'arme dans Firestore : "+i))}static \u0275fac=function(t){return new(t||n)(J(Pi))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};var v$=n=>["/heroes",n],_$=n=>["/weapons",n],fN=(n,e)=>e.id;function E$(n,e){if(n&1&&(I(0,"a",2)(1,"h4"),C(2),w(),I(3,"p"),C(4),w()()),n&2){let t=e.$implicit;ie("routerLink",ui(4,v$,t.id)),x(2),pe(t.name),x(2),yn("Att: ",t.attack," | D\xE9g: ",t.damage)}}function I$(n,e){if(n&1&&(I(0,"a",2)(1,"h4"),C(2),w(),I(3,"p"),C(4),w()()),n&2){let t=e.$implicit;ie("routerLink",ui(4,_$,t.id)),x(2),pe(t.name),x(2),yn("Att: ",t.attack," | D\xE9g: ",t.damage)}}var hp=class n{constructor(e,t,r){this.heroService=e;this.weaponService=t;this.cdr=r}topHeroes=[];topWeapons=[];ngOnInit(){this.heroService.getHeroes().subscribe(e=>{let t=[...e].sort((r,i)=>i.attack+i.damage-(r.attack+r.damage));this.topHeroes=t.slice(0,4),this.cdr.detectChanges()}),this.weaponService.getWeapons().subscribe(e=>{let t=[...e].sort((r,i)=>i.damage-r.damage);this.topWeapons=t.slice(0,4),this.cdr.detectChanges()})}static \u0275fac=function(t){return new(t||n)(U(Kt),U(Qt),U(Et))};static \u0275cmp=$e({type:n,selectors:[["app-dashboard"]],decls:14,vars:0,consts:[[1,"dashboard-section"],[1,"card-list"],[1,"card",3,"routerLink"]],template:function(t,r){t&1&&(I(0,"h2"),C(1,"Dashboard"),w(),I(2,"section",0)(3,"h3"),C(4,"H\xE9ros marquants"),w(),I(5,"div",1),gn(6,E$,5,6,"a",2,fN),w()(),I(8,"section",0)(9,"h3"),C(10,"\xC9quipements marquantes"),w(),I(11,"div",1),gn(12,I$,5,6,"a",2,fN),w()()),t&2&&(x(6),mn(r.topHeroes),x(6),mn(r.topWeapons))},dependencies:[st,Gt],styles:['.dashboard-section[_ngcontent-%COMP%]{margin-top:1.8rem}.dashboard-section[_ngcontent-%COMP%]:first-of-type{margin-top:.6rem}.dashboard-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.8rem}.card-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:.9rem}.card[_ngcontent-%COMP%]{position:relative;padding:.85rem 1rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,rgba(201,166,107,.18),transparent 60%),var(--card-bg);border:1px solid rgba(201,166,107,.55);box-shadow:0 16px 30px #000000d9;text-decoration:none;color:var(--text-main);transition:transform var(--transition-fast),box-shadow var(--transition-fast),border-color var(--transition-fast),background var(--transition-fast)}.card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:10px;border-radius:16px;border:1px solid rgba(201,166,107,.25);opacity:.7;pointer-events:none}.card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .4rem;font-size:1.05rem;color:#fdf3cf}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--text-soft);font-size:.9rem}.card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 20px 40px #000000f2,0 0 24px #c9a66b59;border-color:#c9a66be6}']})};var bN=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(U(br),U(er))};static \u0275dir=Ne({type:n})}return n})(),Ip=(()=>{class n extends bN{static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=Ne({type:n,features:[zt]})}return n})(),Ea=new z("");var w$={provide:Ea,useExisting:un(()=>wn),multi:!0};function b$(){let n=_n()?_n().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var D$=new z(""),wn=(()=>{class n extends bN{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!b$())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(U(br),U(er),U(D$,8))};static \u0275dir=Ne({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&De("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Tr([w$]),zt]})}return n})();function XI(n){return n==null||ew(n)===0}function ew(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var tw=new z(""),nw=new z(""),C$=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Fe=class{static min(e){return T$(e)}static max(e){return S$(e)}static required(e){return A$(e)}static requiredTrue(e){return R$(e)}static email(e){return M$(e)}static minLength(e){return N$(e)}static maxLength(e){return x$(e)}static pattern(e){return P$(e)}static nullValidator(e){return DN()}static compose(e){return MN(e)}static composeAsync(e){return xN(e)}};function T$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function S$(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function A$(n){return XI(n.value)?{required:!0}:null}function R$(n){return n.value===!0?null:{required:!0}}function M$(n){return XI(n.value)||C$.test(n.value)?null:{email:!0}}function N$(n){return e=>{let t=e.value?.length??ew(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function x$(n){return e=>{let t=e.value?.length??ew(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function P$(n){if(!n)return DN;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(XI(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function DN(n){return null}function CN(n){return n!=null}function TN(n){return Dr(n)?Ge(n):n}function SN(n){let e={};return n.forEach(t=>{e=t!=null?O(O({},e),t):e}),Object.keys(e).length===0?null:e}function AN(n,e){return e.map(t=>t(n))}function O$(n){return!n.validate}function RN(n){return n.map(e=>O$(e)?e:t=>e.validate(t))}function MN(n){if(!n)return null;let e=n.filter(CN);return e.length==0?null:function(t){return SN(AN(t,e))}}function NN(n){return n!=null?MN(RN(n)):null}function xN(n){if(!n)return null;let e=n.filter(CN);return e.length==0?null:function(t){let r=AN(t,e).map(TN);return Cg(r).pipe(ye(SN))}}function PN(n){return n!=null?xN(RN(n)):null}function pN(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function ON(n){return n._rawValidators}function kN(n){return n._rawAsyncValidators}function KI(n){return n?Array.isArray(n)?n:[n]:[]}function pp(n,e){return Array.isArray(n)?n.includes(e):n===e}function gN(n,e){let t=KI(e);return KI(n).forEach(i=>{pp(t,i)||t.push(i)}),t}function mN(n,e){return KI(e).filter(t=>!pp(n,t))}var gp=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=NN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},jo=class extends gp{name;get formDirective(){return null}get path(){return null}},Uo=class extends gp{_parent=null;name=null;valueAccessor=null},mp=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var bn=(()=>{class n extends mp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(U(Uo,2))};static \u0275dir=Ne({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&mo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[zt]})}return n})(),Ia=(()=>{class n extends mp{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(U(jo,10))};static \u0275dir=Ne({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&mo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[zt]})}return n})();var Uu="VALID",fp="INVALID",ya="PENDING",Bu="DISABLED",Oi=class{},yp=class extends Oi{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Hu=class extends Oi{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},$u=class extends Oi{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},va=class extends Oi{status;source;constructor(e,t){super(),this.status=e,this.source=t}},QI=class extends Oi{source;constructor(e){super(),this.source=e}},zu=class extends Oi{source;constructor(e){super(),this.source=e}};function rw(n){return(wp(n)?n.validators:n)||null}function k$(n){return Array.isArray(n)?NN(n):n||null}function iw(n,e){return(wp(e)?e.asyncValidators:n)||null}function F$(n){return Array.isArray(n)?PN(n):n||null}function wp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function FN(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new $(1e3,"");if(!r[t])throw new $(1001,"")}function LN(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new $(1002,"")})}var _a=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return He(this.statusReactive)}set status(e){He(()=>this.statusReactive.set(e))}_status=ms(()=>this.statusReactive(),{});statusReactive=qt(void 0,{});get valid(){return this.status===Uu}get invalid(){return this.status===fp}get pending(){return this.status==ya}get disabled(){return this.status===Bu}get enabled(){return this.status!==Bu}errors;get pristine(){return He(this.pristineReactive)}set pristine(e){He(()=>this.pristineReactive.set(e))}_pristine=ms(()=>this.pristineReactive(),{});pristineReactive=qt(!0,{});get dirty(){return!this.pristine}get touched(){return He(this.touchedReactive)}set touched(e){He(()=>this.touchedReactive.set(e))}_touched=ms(()=>this.touchedReactive(),{});touchedReactive=qt(!1,{});get untouched(){return!this.touched}_events=new et;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mN(e,this._rawAsyncValidators))}hasValidator(e){return pp(this._rawValidators,e)}hasAsyncValidator(e){return pp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Y(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new $u(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new $u(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Y(O({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Hu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Hu(!0,r))}markAsPending(e={}){this.status=ya;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new va(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Y(O({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Bu,this.errors=null,this._forEachChild(i=>{i.disable(Y(O({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yp(this.value,r)),this._events.next(new va(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Y(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Uu,this._forEachChild(r=>{r.enable(Y(O({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Y(O({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Uu||this.status===ya)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new yp(this.value,t)),this._events.next(new va(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Y(O({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Bu:Uu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ya,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=TN(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new va(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new je,this.statusChanges=new je}_calculateStatus(){return this._allControlsDisabled()?Bu:this.errors?fp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ya)?ya:this._anyControlsHaveStatus(fp)?fp:Uu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Hu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new $u(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){wp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=k$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=F$(this._rawAsyncValidators)}},vp=class extends _a{constructor(e,t,r){super(rw(t),iw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){LN(this,!0,e),Object.keys(e).forEach(r=>{FN(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,Y(O({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new zu(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var YI=class extends vp{};var bp=new z("",{factory:()=>Dp}),Dp="always";function VN(n,e){return[...e.path,n]}function JI(n,e,t=Dp){ow(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),V$(n,e),U$(n,e),j$(n,e),L$(n,e)}function yN(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ep(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function _p(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function L$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ow(n,e){let t=ON(n);e.validator!==null?n.setValidators(pN(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=kN(n);e.asyncValidator!==null?n.setAsyncValidators(pN(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();_p(e._rawValidators,i),_p(e._rawAsyncValidators,i)}function Ep(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=ON(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=kN(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return _p(e._rawValidators,r),_p(e._rawAsyncValidators,r),t}function V$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&jN(n,e)})}function j$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&jN(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function jN(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function U$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function B$(n,e){n==null,ow(n,e)}function H$(n,e){return Ep(n,e)}function UN(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $$(n){return Object.getPrototypeOf(n.constructor)===Ip}function q$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function BN(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===wn?t=o:$$(o)?r=o:i=o}),i||r||t||null}function z$(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vN(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _N(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qu=class extends _a{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(rw(t),iw(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),wp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_N(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new zu(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_N(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var G$=n=>n instanceof qu;var W$={provide:Uo,useExisting:un(()=>Bo)},EN=Promise.resolve(),Bo=(()=>{class n extends Uo{_changeDetectorRef;callSetDisabledState;control=new qu;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new je;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BN(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),UN(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){JI(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){EN.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ys(r);EN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?VN(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(U(jo,9),U(tw,10),U(nw,10),U(Ea,10),U(Et,8),U(bp,8))};static \u0275dir=Ne({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Tr([W$]),zt,Xn]})}return n})();var wa=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ne({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),K$={provide:Ea,useExisting:un(()=>Gu),multi:!0},Gu=(()=>{class n extends Ip{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=Ne({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&De("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[Tr([K$]),zt]})}return n})();var ZI=class extends _a{constructor(e,t,r){super(rw(t),iw(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){LN(this,!1,e),e.forEach((r,i)=>{FN(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],Y(O({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new zu(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var Q$=(()=>{class n extends jo{callSetDisabledState;get submitted(){return He(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ms(()=>this._submittedReactive(),{});_submittedReactive=qt(!1,{});_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(Ep(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return JI(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){yN(t.control||null,t,!1),z$(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,q$(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new QI(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(yN(r||null,t),G$(i)&&(JI(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);B$(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&H$(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ow(this.form,this),this._oldForm&&Ep(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(U(tw,10),U(nw,10),U(bp,8))};static \u0275dir=Ne({type:n,features:[zt,Xn]})}return n})();var HN=new z("");var Y$={provide:Uo,useExisting:un(()=>Ho)},Ho=(()=>{class n extends Uo{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new je;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=BN(this,o)}ngOnChanges(t){this._added||this._setUpControl(),UN(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return VN(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(U(jo,13),U(tw,10),U(nw,10),U(Ea,10),U(HN,8))};static \u0275dir=Ne({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[Tr([Y$]),zt,Xn]})}return n})();var J$={provide:jo,useExisting:un(()=>$o)},$o=(()=>{class n extends Q${form=null;ngSubmit=new je;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=Ne({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&De("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Tr([J$]),zt]})}return n})(),Z$={provide:Ea,useExisting:un(()=>yr),multi:!0};function $N(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function X$(n){return n.split(":")[0]}var yr=(()=>{class n extends Ip{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=L(ci).injector;destroyRef=L(wr);cdr=L(Et);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Hd({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=$N(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=X$(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=Ne({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&De("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Tr([Z$]),zt]})}return n})(),ki=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue($N(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(U(er),U(br),U(yr,9))};static \u0275dir=Ne({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),e4={provide:Ea,useExisting:un(()=>qN),multi:!0};function IN(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function t4(n){return n.split(":")[0]}var qN=(()=>{class n extends Ip{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=t4(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=On(n)))(i||n)}})();static \u0275dir=Ne({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&De("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Tr([e4]),zt]})}return n})(),Fi=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(IN(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(IN(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(U(er),U(br),U(qN,9))};static \u0275dir=Ne({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var zN=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=tr({type:n});static \u0275inj=Tn({})}return n})();function wN(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var ba=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return wN(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new vp(i,o)}record(t,r=null){let i=this._reduceControls(t);return new YI(i,r)}control(t,r,i){let o={};return this.useNonNullable?(wN(r)?o=r:(o.validators=r,o.asyncValidators=i),new qu(t,Y(O({},o),{nonNullable:!0}))):new qu(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new ZI(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof qu)return t;if(t instanceof _a)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Da=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:bp,useValue:t.callSetDisabledState??Dp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tr({type:n});static \u0275inj=Tn({imports:[zN]})}return n})(),Ca=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:HN,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:bp,useValue:t.callSetDisabledState??Dp}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=tr({type:n});static \u0275inj=Tn({imports:[zN]})}return n})();var n4=()=>["/heroes","new"],r4=n=>["/heroes",n],i4=(n,e)=>e.id;function o4(n,e){n&1&&C(0),n&2&&Te(" ",e.name," ")}function s4(n,e){n&1&&C(0," \u2013 ")}function a4(n,e){if(n&1){let t=Cr();I(0,"tr")(1,"td"),C(2),w(),I(3,"td"),C(4),w(),I(5,"td"),C(6),w(),I(7,"td"),C(8),w(),I(9,"td"),C(10),w(),I(11,"td"),We(12,o4,1,1)(13,s4,1,0),w(),I(14,"td"),C(15),w(),I(16,"td"),C(17),w(),I(18,"td"),C(19),w(),I(20,"td"),C(21),w(),I(22,"td")(23,"a",12),C(24,"D\xE9tails / \xE9diter"),w(),I(25,"button",13),De("click",function(){let i=Qn(t).$implicit,o=Re();return Yn(o.delete(i))}),C(26,"Supprimer"),w()()()}if(n&2){let t,r=e.$implicit,i=Re();x(2),pe(r.name),x(2),pe(r.attack),x(2),pe(r.dodge),x(2),pe(r.damage),x(2),pe(r.hp),x(2),Ke((t=i.getWeapon(r))?12:13,t),x(3),pe(r.totalAttack(i.getWeapon(r)||null)),x(2),pe(r.totalDodge(i.getWeapon(r)||null)),x(2),pe(r.totalDamage(i.getWeapon(r)||null)),x(2),pe(r.totalHp(i.getWeapon(r)||null)),x(2),ie("routerLink",ui(11,r4,r.id))}}var Cp=class n{constructor(e,t,r){this.heroService=e;this.weaponService=t;this.cdr=r}heroes=[];weapons=[];filterName="";sortKey="name";sortDir="asc";ngOnInit(){this.heroService.getHeroes().subscribe(e=>{this.heroes=e,this.cdr.detectChanges()}),this.weaponService.getWeapons().subscribe(e=>{this.weapons=e,this.cdr.detectChanges()})}getWeapon(e){return this.weapons.find(t=>t.id===e.weaponId)}delete(e){confirm(`Supprimer le h\xE9ro "${e.name}" ?`)&&this.heroService.deleteHero(e.id)}get filteredHeroes(){let e=[...this.heroes];if(this.filterName.trim()){let t=this.filterName.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t))}return e.sort((t,r)=>{let i=this.sortDir==="asc"?1:-1;switch(this.sortKey){case"name":return t.name.localeCompare(r.name)*i;case"attack":return(t.attack-r.attack)*i;case"dodge":return(t.dodge-r.dodge)*i;case"damage":return(t.damage-r.damage)*i;case"hp":return(t.hp-r.hp)*i}}),e}static \u0275fac=function(t){return new(t||n)(U(Kt),U(Qt),U(Et))};static \u0275cmp=$e({type:n,selectors:[["app-hero-list"]],decls:55,vars:5,consts:[[1,"toolbar"],["placeholder","chercher...",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","name"],["value","attack"],["value","dodge"],["value","damage"],["value","hp"],["value","asc"],["value","desc"],[1,"btn",3,"routerLink"],[1,"list-table"],[3,"routerLink"],["type","button",3,"click"]],template:function(t,r){t&1&&(I(0,"h2"),C(1,"H\xE9ros"),w(),I(2,"div",0)(3,"label"),C(4," Filtre nom : "),I(5,"input",1),nn("ngModelChange",function(o){return vn(r.filterName,o)||(r.filterName=o),o}),w()(),I(6,"label"),C(7," Tri : "),I(8,"select",2),nn("ngModelChange",function(o){return vn(r.sortKey,o)||(r.sortKey=o),o}),I(9,"option",3),C(10,"Nom"),w(),I(11,"option",4),C(12,"Attaque"),w(),I(13,"option",5),C(14,"Esquive"),w(),I(15,"option",6),C(16,"D\xE9g\xE2ts"),w(),I(17,"option",7),C(18,"PV"),w()()(),I(19,"label"),C(20," Sens : "),I(21,"select",2),nn("ngModelChange",function(o){return vn(r.sortDir,o)||(r.sortDir=o),o}),I(22,"option",8),C(23,"\u2191"),w(),I(24,"option",9),C(25,"\u2193"),w()()(),I(26,"a",10),C(27,"Nouveau h\xE9ro"),w()(),I(28,"table",11)(29,"thead")(30,"tr")(31,"th"),C(32,"Nom"),w(),I(33,"th"),C(34,"Att"),w(),I(35,"th"),C(36,"Esq"),w(),I(37,"th"),C(38,"D\xE9g"),w(),I(39,"th"),C(40,"PV"),w(),I(41,"th"),C(42,"Arme"),w(),I(43,"th"),C(44,"Total Att"),w(),I(45,"th"),C(46,"Total Esq"),w(),I(47,"th"),C(48,"Total D\xE9g"),w(),I(49,"th"),C(50,"Total PV"),w(),Ae(51,"th"),w()(),I(52,"tbody"),gn(53,a4,27,13,"tr",null,i4),w()()),t&2&&(x(5),tn("ngModel",r.filterName),x(3),tn("ngModel",r.sortKey),x(13),tn("ngModel",r.sortDir),x(5),ie("routerLink",Sr(4,n4)),x(27),mn(r.filteredHeroes))},dependencies:[st,Gt,Da,ki,Fi,wn,yr,bn,Bo],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem 1rem;align-items:flex-end;margin:1rem 0 1.1rem;padding:.75rem .9rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,#c9a66b2e,#080402f5);border:1px solid rgba(201,166,107,.6)}.toolbar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;min-width:150px;font-size:.88rem;color:var(--text-soft)}.toolbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.45rem 1.2rem;border-radius:999px;border:1px solid rgba(201,166,107,.75);background:radial-gradient(circle at top,#c9a66b59,#080402fa);color:#fdf3cf;text-transform:uppercase;letter-spacing:.14em;font-family:Cinzel,Georgia,serif;font-size:.78rem;text-decoration:none;white-space:nowrap;transition:background var(--transition-fast),transform var(--transition-fast),box-shadow var(--transition-fast),border-color var(--transition-fast)}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 16px 30px #000000f7,0 0 24px #c9a66b8c;border-color:#fff8dcf2}.list-table[_ngcontent-%COMP%]{margin-top:.7rem;border-radius:var(--radius-md);overflow:hidden;background:#050301f2;border:1px solid rgba(201,166,107,.6);box-shadow:0 18px 36px #000000f2}.list-table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.9rem}.list-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8rem;padding-inline:.9rem;background:radial-gradient(circle at top,#782525b3,#160808fa);border-color:#dc2626d9}.list-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#f87171}@media(max-width:768px){.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.btn[_ngcontent-%COMP%]{width:100%}.list-table[_ngcontent-%COMP%]{font-size:.9rem;overflow-x:auto;display:block}}.list-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{display:flex;align-items:center;justify-content:center;gap:.6rem;white-space:nowrap}.list-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   a[_ngcontent-%COMP%], .list-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child   button[_ngcontent-%COMP%]{white-space:nowrap}"]})};var c4=()=>["/heroes"],u4=(n,e)=>e.id;function l4(n,e){n&1&&(I(0,"div",3),C(1,"Nom obligatoire"),w())}function d4(n,e){if(n&1&&(I(0,"div",3),C(1),w()),n&2){let t=Re();x(),Te(" La somme des caract\xE9ristiques doit \xEAtre \u2264 ",t.maxPoints,". ")}}function h4(n,e){if(n&1&&(I(0,"option",11),C(1),w()),n&2){let t=e.$implicit,r=Re();ie("ngValue",t.id)("disabled",r.isWeaponTaken(t)||!r.canEquipWeapon(t)),x(),Xd(" ",t.name," (Att ",t.attack,", Esq ",t.dodge,", D\xE9g ",t.damage,", PV ",t.hp,") ")}}function f4(n,e){n&1&&(I(0,"div",3),C(1," Cette arme ferait passer au moins une caract\xE9ristique en dessous de 1, elle ne peut pas \xEAtre \xE9quip\xE9e. "),w())}function p4(n,e){if(n&1&&(I(0,"p"),C(1),w()),n&2){let t=e,r=Re();x(),Zd(" Totaux avec arme : Att ",(r.heroForm.value.attack??0)+t.attack,", Esq ",(r.heroForm.value.dodge??0)+t.dodge,", D\xE9g ",(r.heroForm.value.damage??0)+t.damage,", PV ",(r.heroForm.value.hp??0)+t.hp," ")}}var Wu=class n{constructor(e,t,r,i,o){this.fb=e;this.route=t;this.router=r;this.heroService=i;this.weaponService=o;this.heroForm=this.fb.group({id:[0],name:["",Fe.required],attack:[10,[Fe.required,Fe.min(1)]],dodge:[10,[Fe.required,Fe.min(1)]],damage:[10,[Fe.required,Fe.min(1)]],hp:[10,[Fe.required,Fe.min(1)]],weaponId:[null]},{validators:[this.totalPointsValidator()]})}heroForm;weapons=[];hero;isNew=!1;heroes=[];currentHeroId=null;sub;maxPoints=Bh;ngOnInit(){this.heroService.getHeroes().subscribe(e=>{this.heroes=e}),this.weaponService.getWeapons().subscribe(e=>this.weapons=e),this.sub=this.route.paramMap.subscribe(e=>{let t=e.get("id");if(!t||t==="new"){this.isNew=!0,this.currentHeroId=null;let r=this.heroService.getNextId();this.heroForm.patchValue({id:r})}else{let r=Number(t);this.isNew=!1,this.currentHeroId=r,this.heroService.getHero(r).subscribe(i=>{i&&(this.hero=i,this.heroForm.patchValue({id:i.id,name:i.name,attack:i.attack,dodge:i.dodge,damage:i.damage,hp:i.hp,weaponId:i.weaponId??null}))})}})}ngOnDestroy(){this.sub?.unsubscribe()}toNumber(e){if(e==null||e==="")return 0;let t=Number(e);return isNaN(t)?0:t}totalPoints(){let e=this.heroForm.value,t=this.toNumber(e.attack),r=this.toNumber(e.dodge),i=this.toNumber(e.damage),o=this.toNumber(e.hp);return t+r+i+o}remainingPoints(){return this.maxPoints-this.totalPoints()}totalPointsValidator(){return e=>{let t=this.toNumber(e.get("attack")?.value),r=this.toNumber(e.get("dodge")?.value),i=this.toNumber(e.get("damage")?.value),o=this.toNumber(e.get("hp")?.value),s=t+r+i+o;return s<=Bh?null:{totalPoints:{sum:s}}}}selectedWeapon(){let e=this.heroForm.get("weaponId")?.value;if(e!=null)return this.weapons.find(t=>t.id===e)}isWeaponTaken(e){if(!e)return!1;let t=this.heroes.filter(r=>r.weaponId===e.id);return this.currentHeroId===null?t.length>0:t.some(r=>r.id!==this.currentHeroId)}canEquipWeapon(e){if(!e)return!0;let t=this.heroForm.value,r=this.toNumber(t.attack)+e.attack,i=this.toNumber(t.dodge)+e.dodge,o=this.toNumber(t.damage)+e.damage,s=this.toNumber(t.hp)+e.hp;return r>=1&&i>=1&&o>=1&&s>=1}weaponWouldBreakConstraint(){let e=this.selectedWeapon();return e?!this.canEquipWeapon(e):!1}save(){if(this.heroForm.invalid||this.weaponWouldBreakConstraint()){this.heroForm.markAllAsTouched();return}let e=this.heroForm.value,t=new xs(e.id??this.heroService.getNextId(),e.name??"",e.attack??1,e.dodge??1,e.damage??1,e.hp??1,e.weaponId??null);this.isNew?this.heroService.addHero(t):this.heroService.updateHero(t),this.router.navigate(["/heroes"])}cancel(){this.router.navigate(["/heroes"])}static \u0275fac=function(t){return new(t||n)(U(ba),U(kt),U(Ft),U(Kt),U(Qt))};static \u0275cmp=$e({type:n,selectors:[["app-hero-edit"]],decls:52,vars:16,consts:[[1,"form",3,"ngSubmit","formGroup"],["formControlName","id","type","number","readonly",""],["formControlName","name"],[1,"error"],[1,"stats-grid"],["type","number","formControlName","attack"],["type","number","formControlName","dodge"],["type","number","formControlName","damage"],["type","number","formControlName","hp"],["formControlName","weaponId"],[3,"ngValue"],[3,"ngValue","disabled"],[1,"buttons"],["type","submit",3,"disabled"],["type","button",3,"click"],[3,"routerLink"]],template:function(t,r){if(t&1&&(I(0,"h2"),C(1),w(),I(2,"form",0),De("ngSubmit",function(){return r.save()}),I(3,"div")(4,"label"),C(5,"Id :"),w(),Ae(6,"input",1),w(),I(7,"div")(8,"label"),C(9,"Nom :"),w(),Ae(10,"input",2),We(11,l4,2,0,"div",3),w(),I(12,"fieldset")(13,"legend"),C(14),w(),I(15,"div",4)(16,"label"),C(17," Attaque "),Ae(18,"input",5),w(),I(19,"label"),C(20," Esquive "),Ae(21,"input",6),w(),I(22,"label"),C(23," D\xE9g\xE2ts "),Ae(24,"input",7),w(),I(25,"label"),C(26," Points de vie "),Ae(27,"input",8),w()(),I(28,"p"),C(29),I(30,"strong"),C(31),w()(),We(32,d4,2,1,"div",3),w(),I(33,"fieldset")(34,"legend"),C(35,"Arme"),w(),I(36,"label"),C(37," Arme \xE9quip\xE9e : "),I(38,"select",9)(39,"option",10),C(40,"Aucune"),w(),gn(41,h4,2,7,"option",11,u4),w()(),We(43,f4,2,0,"div",3),We(44,p4,2,4,"p"),w(),I(45,"div",12)(46,"button",13),C(47," Enregistrer "),w(),I(48,"button",14),De("click",function(){return r.cancel()}),C(49,"Annuler"),w()()(),I(50,"a",15),C(51,"Retour \xE0 la liste"),w()),t&2){let i,o;x(),pe(r.isNew?"Nouveau h\xE9ro":"\xC9diter h\xE9ro"),x(),ie("formGroup",r.heroForm),x(9),Ke((i=r.heroForm.get("name"))!=null&&i.invalid&&((i=r.heroForm.get("name"))!=null&&i.touched)?11:-1),x(3),Te("Caract\xE9ristiques (max ",r.maxPoints," pts)"),x(15),yn(" Points utilis\xE9s : ",r.totalPoints()," / ",r.maxPoints," \u2013 "),x(),mo("error",r.remainingPoints()<0),x(),Te(" Restants : ",r.remainingPoints()," "),x(),Ke(r.heroForm.errors!=null&&r.heroForm.errors.totalPoints?32:-1),x(7),ie("ngValue",null),x(2),mn(r.weapons),x(2),Ke(r.weaponWouldBreakConstraint()?43:-1),x(),Ke((o=r.selectedWeapon())?44:-1,o),x(2),ie("disabled",r.heroForm.invalid||r.weaponWouldBreakConstraint()),x(4),ie("routerLink",Sr(15,c4))}},dependencies:[st,Ca,wa,ki,Fi,wn,Gu,yr,bn,Ia,$o,Ho,Gt],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-width:620px;padding:1.6rem 1.7rem 1.8rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,rgba(201,166,107,.18),transparent 60%),var(--card-bg-soft);border:1px solid var(--border-subtle);box-shadow:0 22px 40px #000000e6;animation:fadeInSoft .28s ease-out}.form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,130px) minmax(0,1fr);gap:.45rem .8rem;align-items:center}.form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{margin-bottom:.3rem}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Cinzel,Georgia,serif;letter-spacing:.12em;text-transform:uppercase;font-size:.8rem;color:var(--text-soft)}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.form[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7;cursor:default}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.6rem .8rem}.stats-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,75px) minmax(0,1fr);gap:.25rem .55rem;align-items:center}.error[_ngcontent-%COMP%]{grid-column:2 / -1;padding:.35rem .7rem;border-radius:999px;background:#6d1818eb;border:1px solid rgba(241,153,153,.9);color:#fee2e2;font-size:.85rem}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.7rem;margin-top:1.1rem}.buttons[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{padding-inline:1.6rem}.buttons[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background:radial-gradient(circle at top,#75757542,#0c0c0cf5);border-color:#949494b3}.buttons[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{border-color:#e5e5e5f2}@media(max-width:640px){.form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:stretch}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};var g4=()=>["/weapons","new"],m4=n=>["/weapons",n],y4=(n,e)=>e.id;function v4(n,e){if(n&1){let t=Cr();I(0,"tr")(1,"td"),C(2),w(),I(3,"td"),C(4),w(),I(5,"td"),C(6),w(),I(7,"td"),C(8),w(),I(9,"td"),C(10),w(),I(11,"td"),C(12),w(),I(13,"td"),C(14),w(),I(15,"td")(16,"a",12),C(17,"D\xE9tails / \xE9diter"),w(),I(18,"button",13),De("click",function(){let i=Qn(t).$implicit,o=Re();return Yn(o.delete(i))}),C(19,"Supprimer"),w()()()}if(n&2){let t=e.$implicit,r=Re();x(2),pe(t.name),x(2),pe(t.attack),x(2),pe(t.dodge),x(2),pe(t.damage),x(2),pe(t.hp),x(2),pe(t.totalPoints),x(2),pe(r.heroNamesFor(t)),x(2),ie("routerLink",ui(8,m4,t.id))}}var Tp=class n{constructor(e,t,r){this.weaponService=e;this.heroService=t;this.cdr=r}weapons=[];heroes=[];filterName="";sortKey="name";sortDir="asc";ngOnInit(){this.weaponService.getWeapons().subscribe(e=>{this.weapons=e,this.cdr.detectChanges()}),this.heroService.getHeroes().subscribe(e=>{this.heroes=e,this.cdr.detectChanges()})}usersCount(e){return this.heroes.filter(t=>t.weaponId===e.id).length}delete(e){if(this.usersCount(e)>0){alert("Impossible de supprimer : au moins un h\xE9ro utilise encore cette arme.");return}confirm(`Supprimer l'arme "${e.name}" ?`)&&this.weaponService.deleteWeapon(e.id)}get filteredWeapons(){let e=[...this.weapons];if(this.filterName.trim()){let t=this.filterName.toLowerCase();e=e.filter(r=>r.name.toLowerCase().includes(t))}return e.sort((t,r)=>{let i=this.sortDir==="asc"?1:-1;switch(this.sortKey){case"name":return t.name.localeCompare(r.name)*i;case"attack":return(t.attack-r.attack)*i;case"dodge":return(t.dodge-r.dodge)*i;case"damage":return(t.damage-r.damage)*i;case"hp":return(t.hp-r.hp)*i}}),e}heroesUsing(e){return this.heroes.filter(t=>t.weaponId===e.id)}heroNamesFor(e){let t=this.heroesUsing(e);return t.length===0?"Aucun":t.map(r=>r.name).join(", ")}static \u0275fac=function(t){return new(t||n)(U(Qt),U(Kt),U(Et))};static \u0275cmp=$e({type:n,selectors:[["app-weapon-list"]],decls:49,vars:5,consts:[[1,"toolbar"],["placeholder","chercher...",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],["value","name"],["value","attack"],["value","dodge"],["value","damage"],["value","hp"],["value","asc"],["value","desc"],[1,"btn",3,"routerLink"],[1,"list-table"],[3,"routerLink"],["type","button",3,"click"]],template:function(t,r){t&1&&(I(0,"h2"),C(1,"\xC9quipements"),w(),I(2,"div",0)(3,"label"),C(4," Filtre nom : "),I(5,"input",1),nn("ngModelChange",function(o){return vn(r.filterName,o)||(r.filterName=o),o}),w()(),I(6,"label"),C(7," Tri : "),I(8,"select",2),nn("ngModelChange",function(o){return vn(r.sortKey,o)||(r.sortKey=o),o}),I(9,"option",3),C(10,"Nom"),w(),I(11,"option",4),C(12,"Attaque"),w(),I(13,"option",5),C(14,"Esquive"),w(),I(15,"option",6),C(16,"D\xE9g\xE2ts"),w(),I(17,"option",7),C(18,"PV"),w()()(),I(19,"label"),C(20," Sens : "),I(21,"select",2),nn("ngModelChange",function(o){return vn(r.sortDir,o)||(r.sortDir=o),o}),I(22,"option",8),C(23,"\u2191"),w(),I(24,"option",9),C(25,"\u2193"),w()()(),I(26,"a",10),C(27,"Nouvelle arme"),w()(),I(28,"table",11)(29,"thead")(30,"tr")(31,"th"),C(32,"Nom"),w(),I(33,"th"),C(34,"Att"),w(),I(35,"th"),C(36,"Esq"),w(),I(37,"th"),C(38,"D\xE9g"),w(),I(39,"th"),C(40,"PV"),w(),I(41,"th"),C(42,"\u03A3"),w(),I(43,"th"),C(44,"H\xE9ros \xE9quip\xE9s"),w(),Ae(45,"th"),w()(),I(46,"tbody"),gn(47,v4,20,10,"tr",null,y4),w()()),t&2&&(x(5),tn("ngModel",r.filterName),x(3),tn("ngModel",r.sortKey),x(13),tn("ngModel",r.sortDir),x(5),ie("routerLink",Sr(4,g4)),x(21),mn(r.filteredWeapons))},dependencies:[st,Gt,Da,ki,Fi,wn,yr,bn,Bo],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.75rem 1rem;align-items:flex-end;margin:1rem 0 1.1rem;padding:.75rem .9rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,#c9a66b2e,#080402f5);border:1px solid rgba(201,166,107,.6)}.toolbar[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;min-width:150px;font-size:.88rem;color:var(--text-soft)}.toolbar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .toolbar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;padding:.45rem 1.2rem;border-radius:999px;border:1px solid rgba(201,166,107,.75);background:radial-gradient(circle at top,#c9a66b59,#080402fa);color:#fdf3cf;text-transform:uppercase;letter-spacing:.14em;font-family:Cinzel,Georgia,serif;font-size:.78rem;text-decoration:none;white-space:nowrap;transition:background var(--transition-fast),transform var(--transition-fast),box-shadow var(--transition-fast),border-color var(--transition-fast)}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 16px 30px #000000f7,0 0 24px #c9a66b8c;border-color:#fff8dcf2}.list-table[_ngcontent-%COMP%]{margin-top:.7rem;border-radius:var(--radius-md);overflow:hidden;background:#050301f2;border:1px solid rgba(201,166,107,.6);box-shadow:0 18px 36px #000000f2}.list-table[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.9rem}.list-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.8rem;padding-inline:.9rem;background:radial-gradient(circle at top,#782525b3,#160808fa);border-color:#dc2626d9}.list-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{border-color:#f87171}@media(max-width:768px){.toolbar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.btn[_ngcontent-%COMP%]{width:100%}.list-table[_ngcontent-%COMP%]{font-size:.9rem;overflow-x:auto;display:block}}"]})};var _4=()=>["/weapons"],E4=(n,e)=>e.id;function I4(n,e){n&1&&(I(0,"div",3),C(1,"Nom obligatoire"),w())}function w4(n,e){if(n&1&&(I(0,"div",3),C(1),w()),n&2){let t=Re();x(),yn(" Chaque caract\xE9ristique doit \xEAtre comprise entre ",t.minValue," et ",t.maxValue,". ")}}function b4(n,e){n&1&&(I(0,"div",3),C(1,"La somme des caract\xE9ristiques doit \xEAtre \xE9gale \xE0 0."),w())}function D4(n,e){n&1&&(I(0,"p"),C(1,"Aucun h\xE9ro ne porte cette arme."),w())}function C4(n,e){if(n&1&&(I(0,"li"),C(1),w()),n&2){let t=e.$implicit;x(),yn("",t.name," (id ",t.id,")")}}function T4(n,e){if(n&1&&(I(0,"ul"),gn(1,C4,2,2,"li",null,E4),w()),n&2){let t=Re();x(),mn(t.heroesUsing)}}var Ku=class n{constructor(e,t,r,i,o){this.fb=e;this.route=t;this.router=r;this.heroService=i;this.weaponService=o;this.weaponForm=this.fb.group({id:[0],name:["",Fe.required],attack:[0,[Fe.required]],dodge:[0,[Fe.required]],damage:[0,[Fe.required]],hp:[0,[Fe.required]]},{validators:[this.weaponValidator()]})}weaponForm;heroesUsing=[];isNew=!1;sub;minValue=-5;maxValue=5;ngOnInit(){this.sub=this.route.paramMap.subscribe(e=>{let t=e.get("id");if(!t||t==="new"){this.isNew=!0;let r=this.weaponService.getNextId();this.weaponForm.patchValue({id:r}),this.heroesUsing=[]}else{let r=Number(t);this.isNew=!1,this.weaponService.getWeapon(r).subscribe(i=>{i&&this.weaponForm.patchValue({id:i.id,name:i.name,attack:i.attack,dodge:i.dodge,damage:i.damage,hp:i.hp})}),this.heroService.getHeroesByWeapon(r).subscribe(i=>this.heroesUsing=i)}})}ngOnDestroy(){this.sub?.unsubscribe()}totalPoints(){let e=this.weaponForm.value,t=e.attack??0,r=e.dodge??0,i=e.damage??0,o=e.hp??0;return t+r+i+o}remainingPoints(){return 0-this.totalPoints()}weaponValidator(){return e=>{let t=e.get("attack")?.value??0,r=e.get("dodge")?.value??0,i=e.get("damage")?.value??0,o=e.get("hp")?.value??0,s=[t,r,i,o],a=t+r+i+o,u=s.every(h=>h>=-5&&h<=5),l={};return u||(l.range=!0),a!==0&&(l.totalPoints={sum:a}),Object.keys(l).length?l:null}}save(){if(this.weaponForm.invalid){this.weaponForm.markAllAsTouched();return}let e=this.weaponForm.value,t=new ga(e.id??this.weaponService.getNextId(),e.name??"",e.attack??0,e.dodge??0,e.damage??0,e.hp??0);this.isNew?this.weaponService.addWeapon(t):this.weaponService.updateWeapon(t),this.router.navigate(["/weapons"])}cancel(){this.router.navigate(["/weapons"])}static \u0275fac=function(t){return new(t||n)(U(ba),U(kt),U(Ft),U(Kt),U(Qt))};static \u0275cmp=$e({type:n,selectors:[["app-weapon-edit"]],decls:44,vars:13,consts:[[1,"form",3,"ngSubmit","formGroup"],["formControlName","id","type","number","readonly",""],["formControlName","name"],[1,"error"],[1,"stats-grid"],["type","number","formControlName","attack"],["type","number","formControlName","dodge"],["type","number","formControlName","damage"],["type","number","formControlName","hp"],[1,"buttons"],["type","submit",3,"disabled"],["type","button",3,"click"],[3,"routerLink"]],template:function(t,r){if(t&1&&(I(0,"h2"),C(1),w(),I(2,"form",0),De("ngSubmit",function(){return r.save()}),I(3,"div")(4,"label"),C(5,"Id :"),w(),Ae(6,"input",1),w(),I(7,"div")(8,"label"),C(9,"Nom :"),w(),Ae(10,"input",2),We(11,I4,2,0,"div",3),w(),I(12,"fieldset")(13,"legend"),C(14),w(),I(15,"div",4)(16,"label"),C(17," Attaque "),Ae(18,"input",5),w(),I(19,"label"),C(20," Esquive "),Ae(21,"input",6),w(),I(22,"label"),C(23," D\xE9g\xE2ts "),Ae(24,"input",7),w(),I(25,"label"),C(26," Points de vie "),Ae(27,"input",8),w()(),I(28,"p"),C(29),w(),We(30,w4,2,2,"div",3),We(31,b4,2,0,"div",3),w(),I(32,"fieldset")(33,"legend"),C(34,"H\xE9ros \xE9quip\xE9s par cette arme"),w(),We(35,D4,2,0,"p")(36,T4,3,0,"ul"),w(),I(37,"div",9)(38,"button",10),C(39,"Enregistrer"),w(),I(40,"button",11),De("click",function(){return r.cancel()}),C(41,"Annuler"),w()()(),I(42,"a",12),C(43,"Retour \xE0 la liste"),w()),t&2){let i;x(),pe(r.isNew?"Nouvelle arme":"\xC9diter arme"),x(),ie("formGroup",r.weaponForm),x(9),Ke((i=r.weaponForm.get("name"))!=null&&i.invalid&&((i=r.weaponForm.get("name"))!=null&&i.touched)?11:-1),x(3),yn("Bonus / malus (entre ",r.minValue," et ",r.maxValue,")"),x(15),yn(" Somme des caract\xE9ristiques : ",r.totalPoints()," (doit \xEAtre = 0) \u2013 Restants : ",r.remainingPoints()," "),x(),Ke(r.weaponForm.errors!=null&&r.weaponForm.errors.range?30:-1),x(),Ke(r.weaponForm.errors!=null&&r.weaponForm.errors.totalPoints?31:-1),x(4),Ke(r.heroesUsing.length===0?35:36),x(3),ie("disabled",r.weaponForm.invalid),x(4),ie("routerLink",Sr(12,_4))}},dependencies:[st,Ca,wa,wn,Gu,bn,Ia,$o,Ho,Gt],styles:[".form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;max-width:620px;padding:1.6rem 1.7rem 1.8rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,rgba(201,166,107,.18),transparent 60%),var(--card-bg-soft);border:1px solid var(--border-subtle);box-shadow:0 22px 40px #000000e6;animation:fadeInSoft .28s ease-out}.form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,130px) minmax(0,1fr);gap:.45rem .8rem;align-items:center}.form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{margin-bottom:.3rem}.form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Cinzel,Georgia,serif;letter-spacing:.12em;text-transform:uppercase;font-size:.8rem;color:var(--text-soft)}.form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.form[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{opacity:.7;cursor:default}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:.6rem .8rem}.stats-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(0,75px) minmax(0,1fr);gap:.25rem .55rem;align-items:center}.error[_ngcontent-%COMP%]{grid-column:2 / -1;padding:.35rem .7rem;border-radius:999px;background:#6d1818eb;border:1px solid rgba(241,153,153,.9);color:#fee2e2;font-size:.85rem}.buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:.7rem;margin-top:1.1rem}.buttons[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{padding-inline:1.6rem}.buttons[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background:radial-gradient(circle at top,#75757542,#0c0c0cf5);border-color:#949494b3}.buttons[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{border-color:#e5e5e5f2}@media(max-width:640px){.form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], fieldset[_ngcontent-%COMP%]{grid-template-columns:1fr}.stats-grid[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr}.buttons[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:stretch}.buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};function S4(n,e){if(n&1&&(I(0,"option",5),C(1),w()),n&2){let t=e.$implicit;ie("ngValue",t.id),x(),Te(" ",t.name," ")}}function A4(n,e){n&1&&(I(0,"p",12),C(1," Arme \xE9quip\xE9e : "),I(2,"span"),C(3),w()()),n&2&&(x(3),pe(e.name))}function R4(n,e){n&1&&(I(0,"p",13),C(1,"Aucune arme \xE9quip\xE9e"),w())}function M4(n,e){if(n&1&&(We(0,A4,4,1,"p",12)(1,R4,2,0,"p",13),I(2,"div",14)(3,"div",15)(4,"span"),C(5,"Att"),w(),I(6,"span"),C(7),w()(),I(8,"div",15)(9,"span"),C(10,"Esq"),w(),I(11,"span"),C(12),w()(),I(13,"div",15)(14,"span"),C(15,"D\xE9g"),w(),I(16,"span"),C(17),w()(),I(18,"div",15)(19,"span"),C(20,"PV"),w(),I(21,"span"),C(22),w()()()),n&2){let t,r,i,o,s,a=e,u=Re();Ke((t=u.getWeaponFor(a))?0:1,t),x(7),Te(" ",a.attack+(((r=u.getWeaponFor(a))==null?null:r.attack)??0)," "),x(5),Te(" ",a.dodge+(((i=u.getWeaponFor(a))==null?null:i.dodge)??0)," "),x(5),Te(" ",a.damage+(((o=u.getWeaponFor(a))==null?null:o.damage)??0)," "),x(5),Te(" ",a.hp+(((s=u.getWeaponFor(a))==null?null:s.hp)??0)," ")}}function N4(n,e){if(n&1&&(I(0,"option",5),C(1),w()),n&2){let t=e.$implicit;ie("ngValue",t.id),x(),Te(" ",t.name," ")}}function x4(n,e){n&1&&(I(0,"p",12),C(1," Arme \xE9quip\xE9e : "),I(2,"span"),C(3),w()()),n&2&&(x(3),pe(e.name))}function P4(n,e){n&1&&(I(0,"p",13),C(1,"Aucune arme \xE9quip\xE9e"),w())}function O4(n,e){if(n&1&&(We(0,x4,4,1,"p",12)(1,P4,2,0,"p",13),I(2,"div",14)(3,"div",15)(4,"span"),C(5,"Att"),w(),I(6,"span"),C(7),w()(),I(8,"div",15)(9,"span"),C(10,"Esq"),w(),I(11,"span"),C(12),w()(),I(13,"div",15)(14,"span"),C(15,"D\xE9g"),w(),I(16,"span"),C(17),w()(),I(18,"div",15)(19,"span"),C(20,"PV"),w(),I(21,"span"),C(22),w()()()),n&2){let t,r,i,o,s,a=e,u=Re();Ke((t=u.getWeaponFor(a))?0:1,t),x(7),Te(" ",a.attack+(((r=u.getWeaponFor(a))==null?null:r.attack)??0)," "),x(5),Te(" ",a.dodge+(((i=u.getWeaponFor(a))==null?null:i.dodge)??0)," "),x(5),Te(" ",a.damage+(((o=u.getWeaponFor(a))==null?null:o.damage)??0)," "),x(5),Te(" ",a.hp+(((s=u.getWeaponFor(a))==null?null:s.hp)??0)," ")}}function k4(n,e){if(n&1&&(I(0,"p",16),C(1," Victoire de "),I(2,"span"),C(3),w()()),n&2){let t=Re(2);x(3),pe(t.winnerName)}}function F4(n,e){n&1&&(I(0,"p",16),C(1,"Le combat se termine sans vainqueur clair."),w())}function L4(n,e){if(n&1&&(I(0,"li"),C(1),w()),n&2){let t=e.$implicit;x(),pe(t)}}function V4(n,e){if(n&1&&(I(0,"section",11),We(1,k4,4,1,"p",16)(2,F4,2,0,"p",16),I(3,"div",17)(4,"h3"),C(5,"Journal du combat"),w(),I(6,"ul"),Pt(7,L4,2,1,"li",18),w()()()),n&2){let t=Re();x(),Ke(t.winnerName?1:t.logs.length>0?2:-1),x(6),ie("ngForOf",t.logs)}}var Sp=class n{constructor(e,t,r){this.heroService=e;this.weaponService=t;this.cdr=r}heroes=[];weapons=[];selectedAttackerId=null;selectedDefenderId=null;logs=[];winnerName=null;isSimulating=!1;ngOnInit(){this.heroService.getHeroes().subscribe(e=>{this.heroes=e,this.cdr.detectChanges()}),this.weaponService.getWeapons().subscribe(e=>{this.weapons=e,this.cdr.detectChanges()})}get attacker(){if(this.selectedAttackerId!=null)return this.heroes.find(e=>e.id===this.selectedAttackerId)}get defender(){if(this.selectedDefenderId!=null)return this.heroes.find(e=>e.id===this.selectedDefenderId)}getWeaponFor(e){if(!(!e||e.weaponId==null))return this.weapons.find(t=>t.id===e.weaponId)}computeTotals(e,t){let r=e.attack+(t?.attack??0),i=e.dodge+(t?.dodge??0),o=e.damage+(t?.damage??0),s=e.hp+(t?.hp??0);return{attack:r,dodge:i,damage:o,hp:s}}canLaunchFight(){return!!this.attacker&&!!this.defender&&this.attacker.id!==this.defender.id&&!this.isSimulating}simulateFight(){if(!this.canLaunchFight())return;let e=this.attacker,t=this.defender,r=this.getWeaponFor(e),i=this.getWeaponFor(t),o=this.computeTotals(e,r),s=this.computeTotals(t,i),a={hero:e,weapon:r,currentHp:o.hp},u={hero:t,weapon:i,currentHp:s.hp};this.logs=[],this.winnerName=null,this.isSimulating=!0;let l=[];l.push(`D\xE9but du combat : ${e.name} vs ${t.name}`),l.push(`${e.name} \u2013 Att ${o.attack}, Esq ${o.dodge}, D\xE9g ${o.damage}, PV ${o.hp}`),l.push(`${t.name} \u2013 Att ${s.attack}, Esq ${s.dodge}, D\xE9g ${s.damage}, PV ${s.hp}`);let h=!0,p=1,m=50;for(;a.currentHp>0&&u.currentHp>0&&p<=m;){let y=h?a:u,R=h?u:a,P=h?o:s,N=h?s:o,V=.5+(P.attack-N.dodge)*.03;V<.15&&(V=.15),V>.9&&(V=.9);let X=Math.random(),ce=Math.max(1,P.damage);if(X<=V?(R.currentHp-=ce,l.push(`Tour ${p} \u2013 ${y.hero.name} touche ${R.hero.name} (${ce} d\xE9g\xE2ts, PV restants : ${Math.max(0,R.currentHp)})`)):l.push(`Tour ${p} \u2013 ${y.hero.name} rate son attaque sur ${R.hero.name}`),R.currentHp<=0){l.push(`${R.hero.name} tombe au combat.`);break}h=!h,p++}a.currentHp<=0&&u.currentHp<=0?(l.push("\xC9galit\xE9 parfaite : les deux h\xE9ros sont \xE0 terre."),this.winnerName=null):a.currentHp>0&&u.currentHp<=0?(l.push(`Victoire de ${a.hero.name}.`),this.winnerName=a.hero.name):u.currentHp>0&&a.currentHp<=0?(l.push(`Victoire de ${u.hero.name}.`),this.winnerName=u.hero.name):(l.push("Combat interrompu (limite de tours atteinte)."),this.winnerName=a.currentHp>=u.currentHp?a.hero.name:u.hero.name),this.logs=l,this.isSimulating=!1,this.cdr.detectChanges()}resetFight(){this.logs=[],this.winnerName=null}static \u0275fac=function(t){return new(t||n)(U(Kt),U(Qt),U(Et))};static \u0275cmp=$e({type:n,selectors:[["app-fight"]],decls:35,vars:11,consts:[[1,"arena"],[1,"subtitle"],[1,"fighters"],[1,"fighter-card"],[3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"vs"],[1,"actions"],["type","button",3,"click","disabled"],["type","button",1,"ghost",3,"click","disabled"],[1,"result"],[1,"weapon-line"],[1,"weapon-line","none"],[1,"stats"],[1,"stat"],[1,"winner"],[1,"log"],[4,"ngFor","ngForOf"]],template:function(t,r){if(t&1&&(I(0,"section",0)(1,"h2"),C(2,"Ar\xE8ne"),w(),I(3,"p",1),C(4," Choisis deux h\xE9ros, puis lance un combat simul\xE9 tour par tour. "),w(),I(5,"div",2)(6,"div",3)(7,"h3"),C(8,"Attaquant"),w(),I(9,"label"),C(10," H\xE9ros "),I(11,"select",4),nn("ngModelChange",function(o){return vn(r.selectedAttackerId,o)||(r.selectedAttackerId=o),o}),I(12,"option",5),C(13,"\u2013 choisir \u2013"),w(),Pt(14,S4,2,2,"option",6),w()(),We(15,M4,23,5),w(),I(16,"div",7)(17,"span"),C(18,"VS"),w()(),I(19,"div",3)(20,"h3"),C(21,"D\xE9fenseur"),w(),I(22,"label"),C(23," H\xE9ros "),I(24,"select",4),nn("ngModelChange",function(o){return vn(r.selectedDefenderId,o)||(r.selectedDefenderId=o),o}),I(25,"option",5),C(26,"\u2013 choisir \u2013"),w(),Pt(27,N4,2,2,"option",6),w()(),We(28,O4,23,5),w()(),I(29,"div",8)(30,"button",9),De("click",function(){return r.simulateFight()}),C(31," Lancer le combat "),w(),I(32,"button",10),De("click",function(){return r.resetFight()}),C(33," R\xE9initialiser "),w()(),We(34,V4,8,2,"section",11),w()),t&2){let i,o;x(11),tn("ngModel",r.selectedAttackerId),x(),ie("ngValue",null),x(2),ie("ngForOf",r.heroes),x(),Ke((i=r.attacker)?15:-1,i),x(9),tn("ngModel",r.selectedDefenderId),x(),ie("ngValue",null),x(2),ie("ngForOf",r.heroes),x(),Ke((o=r.defender)?28:-1,o),x(2),ie("disabled",!r.canLaunchFight()),x(2),ie("disabled",r.logs.length===0),x(2),Ke(r.winnerName!==null||r.logs.length>0?34:-1)}},dependencies:[st,Es,Da,ki,Fi,yr,bn,Bo],styles:['.arena[_ngcontent-%COMP%]{margin-top:.6rem;padding:1.6rem 1.4rem 1.8rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,rgba(201,166,107,.16),transparent 60%),var(--card-bg-soft);border:1px solid var(--border-subtle);box-shadow:0 20px 40px #000000e6;animation:fadeInSoft .32s ease-out}.arena[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:.4rem}.subtitle[_ngcontent-%COMP%]{margin:0;color:var(--text-muted);font-style:italic;font-size:.98rem}.fighters[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.3rem;margin-top:1.6rem;align-items:stretch}.fighter-card[_ngcontent-%COMP%]{position:relative;padding:1.1rem 1rem 1.2rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,rgba(201,166,107,.25),transparent 55%),linear-gradient(145deg,#1a120b,#0c0704);border:1px solid rgba(201,166,107,.6);box-shadow:0 18px 30px #000000f2,inset 0 0 18px #000000d9}.fighter-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:10px;border-radius:16px;border:1px solid rgba(201,166,107,.25);pointer-events:none}.fighter-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.6rem;font-size:1.05rem;color:#fdf3cf}.fighter-card[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:.95rem;color:var(--text-soft);margin-bottom:.4rem}.fighter-card[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;margin-top:.2rem}.weapon-line[_ngcontent-%COMP%]{margin-top:.7rem;padding:.45rem .7rem;border-radius:999px;background:#0f0905e6;border:1px dashed rgba(201,166,107,.7);font-size:.9rem;color:var(--text-soft)}.weapon-line[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--accent)}.stats[_ngcontent-%COMP%]{margin-top:.9rem;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.45rem .6rem}.stat[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:.35rem .55rem;border-radius:999px;background:#0a0603f2;border:1px solid rgba(201,166,107,.4);font-size:.86rem}.stat[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{font-family:Cinzel,Georgia,serif;letter-spacing:.12em;text-transform:uppercase;color:var(--text-muted)}.stat[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-weight:600;color:#fdf3cf}.vs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.vs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;border:1px solid rgba(201,166,107,.7);display:flex;align-items:center;justify-content:center;font-family:Cinzel,Georgia,serif;letter-spacing:.16em;text-transform:uppercase;font-size:.9rem;color:#fdf3cf;background:radial-gradient(circle at center,#c9a66b4d,#0a0603fa);box-shadow:0 0 22px #c9a66b80,0 18px 30px #000000e6;animation:pulseAccent 2.4s infinite}.actions[_ngcontent-%COMP%]{margin-top:1.6rem;display:flex;flex-wrap:wrap;gap:.8rem 1.2rem;align-items:center}.actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%], .actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{padding-inline:1.6rem}.actions[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--text-soft);font-size:.9rem}.result[_ngcontent-%COMP%]{margin-top:1.6rem;padding-top:1.2rem;border-top:1px solid rgba(201,166,107,.45)}.result[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:.5rem}.winner[_ngcontent-%COMP%]{font-size:1rem;color:#fdf3cf;background:#c9a66b2e;border-radius:999px;padding:.5rem .9rem;display:inline-flex;align-items:center;gap:.4rem;border:1px solid rgba(201,166,107,.7);box-shadow:0 0 18px #c9a66b66}.log[_ngcontent-%COMP%]{margin-top:1.1rem;padding:.8rem .9rem;border-radius:var(--radius-md);background:#080402e6;border:1px solid rgba(201,166,107,.35);max-height:260px;overflow:auto}.log[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.5rem}.log[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;font-size:.9rem}.log[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:.25rem}@media(max-width:768px){.arena[_ngcontent-%COMP%]{padding-inline:1rem}.vs[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:64px;height:64px;font-size:.8rem}}']})};var Li=class n{constructor(e){this.router=e;$I(ju,t=>{this.userSubject.next(t)})}userSubject=new Pe(void 0);user$=this.userSubject.asObservable();get currentUser(){let e=this.userSubject.value;return e||null}login(e,t){return HI(ju,e,t)}register(e,t){return BI(ju,e,t)}async logout(){await qI(ju),await this.router.navigate(["/login"])}static \u0275fac=function(t){return new(t||n)(J(Ft))};static \u0275prov=q({token:n,factory:n.\u0275fac,providedIn:"root"})};function U4(n,e){n&1&&(I(0,"h2"),C(1,"Connexion"),w())}function B4(n,e){n&1&&(I(0,"h2"),C(1,"Cr\xE9er un compte"),w())}function H4(n,e){n&1&&(I(0,"div",8),C(1," Adresse email invalide (ex : nom@domaine.com). "),w())}function $4(n,e){n&1&&(I(0,"div",8),C(1," Mot de passe obligatoire (min. 6 caract\xE8res). "),w())}function q4(n,e){if(n&1&&(I(0,"div",8),C(1),w()),n&2){let t=Re();x(),Te(" ",t.error," ")}}var Ap=class n{constructor(e,t,r,i){this.fb=e;this.authService=t;this.router=r;this.form=this.fb.group({email:["",[Fe.required,Fe.email]],password:["",[Fe.required,Fe.minLength(6)]]});let o=i.snapshot.queryParamMap.get("returnUrl");o&&(this.returnUrl=o),this.authService.user$.pipe(Ht(s=>s!==void 0),Jt(1)).subscribe(s=>{s&&this.router.navigateByUrl("/dashboard")})}form;error="";isRegisterMode=!1;returnUrl="/dashboard";async submit(){if(this.error="",this.form.invalid){this.form.markAllAsTouched();return}let{email:e,password:t}=this.form.value;try{this.isRegisterMode?await this.authService.register(e,t):await this.authService.login(e,t),await this.router.navigateByUrl(this.returnUrl)}catch(r){this.error=this.mapFirebaseError(r)}}toggleMode(){this.isRegisterMode=!this.isRegisterMode,this.error=""}mapFirebaseError(e){switch(e?.code??""){case"auth/invalid-credential":case"auth/wrong-password":case"auth/user-not-found":return"Email ou mot de passe incorrect.";case"auth/weak-password":return"Mot de passe trop faible (min. 6 caract\xE8res).";case"auth/email-already-in-use":return"Un compte existe d\xE9j\xE0 avec cet email.";default:return"Une erreur d'authentification est survenue."}}static \u0275fac=function(t){return new(t||n)(U(ba),U(Li),U(Ft),U(kt))};static \u0275cmp=$e({type:n,selectors:[["app-login"]],decls:17,vars:8,consts:[[1,"login"],[4,"ngIf"],[3,"ngSubmit","formGroup"],["type","email","formControlName","email","autocomplete","email"],["class","error",4,"ngIf"],["type","password","formControlName","password"],["type","submit"],["type","button",1,"link",3,"click"],[1,"error"]],template:function(t,r){if(t&1&&(I(0,"div",0),Pt(1,U4,2,0,"h2",1)(2,B4,2,0,"h2",1),I(3,"form",2),De("ngSubmit",function(){return r.submit()}),I(4,"label"),C(5," Email "),Ae(6,"input",3),w(),Pt(7,H4,2,0,"div",4),I(8,"label"),C(9," Mot de passe "),Ae(10,"input",5),w(),Pt(11,$4,2,0,"div",4)(12,q4,2,1,"div",4),I(13,"button",6),C(14),w(),I(15,"button",7),De("click",function(){return r.toggleMode()}),C(16),w()()()),t&2){let i,o;x(),ie("ngIf",!r.isRegisterMode),x(),ie("ngIf",r.isRegisterMode),x(),ie("formGroup",r.form),x(4),ie("ngIf",((i=r.form.get("email"))==null?null:i.invalid)&&(((i=r.form.get("email"))==null?null:i.touched)||((i=r.form.get("email"))==null?null:i.dirty))),x(4),ie("ngIf",((o=r.form.get("password"))==null?null:o.invalid)&&((o=r.form.get("password"))==null?null:o.touched)),x(),ie("ngIf",r.error),x(2),Te(" ",r.isRegisterMode?"Cr\xE9er un compte":"Se connecter"," "),x(2),Te(" ",r.isRegisterMode?"D\xE9j\xE0 un compte ? Se connecter":"Pas de compte ? S'inscrire"," ")}},dependencies:[st,yo,Ca,wa,wn,bn,Ia,$o,Ho],styles:['[_nghost-%COMP%]{display:block;margin-top:1.5rem}.auth[_ngcontent-%COMP%]{max-width:460px;margin:0 auto;padding:1.8rem 2rem 2.1rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,rgba(201,166,107,.22),transparent 60%),var(--card-bg-soft);border:1px solid var(--border-subtle);box-shadow:0 22px 42px #000000f2;position:relative;overflow:hidden;animation:floatIn .32s ease-out}.auth[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:10px;border-radius:18px;border:1px solid rgba(201,166,107,.35);pointer-events:none}.auth[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .35rem;text-align:center;font-size:1.5rem;letter-spacing:.18em;text-transform:uppercase;color:var(--accent);text-shadow:0 0 12px rgba(0,0,0,.9),0 0 20px rgba(226,195,133,.4)}.auth-subtitle[_ngcontent-%COMP%]{margin:0 0 1.4rem;text-align:center;color:var(--text-muted);font-style:italic;font-size:.95rem}.auth-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.auth-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.3rem}.auth-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Cinzel,Georgia,serif;letter-spacing:.12em;text-transform:uppercase;font-size:.8rem;color:var(--text-soft)}.auth-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.auth-inline[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:.75rem;font-size:.9rem;color:var(--text-soft)}.auth-inline-left[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.4rem}.auth-inline-left[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:auto;accent-color:var(--accent)}.auth-error[_ngcontent-%COMP%]{padding:.45rem .75rem;border-radius:999px;background:#6d1818eb;border:1px solid rgba(241,153,153,.9);color:#fee2e2;font-size:.9rem}.auth-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.8rem;margin-top:.6rem;justify-content:flex-end}.auth-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{padding-inline:1.8rem}.auth-actions[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]{background:radial-gradient(circle at top,#75757542,#0c0c0cf5);border-color:#949494b3}.auth-actions[_ngcontent-%COMP%]   .secondary[_ngcontent-%COMP%]:hover{border-color:#e5e5e5f2}.auth-footer[_ngcontent-%COMP%]{margin-top:1.3rem;padding-top:.8rem;border-top:1px solid rgba(201,166,107,.35);display:flex;flex-wrap:wrap;gap:.5rem;font-size:.9rem;color:var(--text-soft);justify-content:space-between}.auth-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.9rem}@media(max-width:640px){.auth[_ngcontent-%COMP%]{padding-inline:1.4rem}.auth-actions[_ngcontent-%COMP%]{flex-direction:column-reverse;align-items:stretch}.auth-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;justify-content:center}.auth-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}']})};var $r=(n,e)=>{let t=L(Li),r=L(Ft);return t.user$.pipe(Ht(i=>i!==void 0),Jt(1),ye(i=>i?!0:r.createUrlTree(["/login"],{queryParams:{returnUrl:e.url}})))};var KN=[{path:"login",component:Ap},{path:"",redirectTo:"/dashboard",pathMatch:"full"},{path:"dashboard",component:hp,canActivate:[$r]},{path:"heroes",component:Cp,canActivate:[$r]},{path:"heroes/new",component:Wu,canActivate:[$r]},{path:"heroes/:id",component:Wu,canActivate:[$r]},{path:"weapons",component:Tp,canActivate:[$r]},{path:"weapons/new",component:Ku,canActivate:[$r]},{path:"weapons/:id",component:Ku,canActivate:[$r]},{path:"fight",component:Sp,canActivate:[$r]},{path:"**",redirectTo:"/dashboard"}];var QN={providers:[Mv(KN)]};function z4(n,e){if(n&1&&(I(0,"li"),C(1),w()),n&2){let t=e.$implicit;x(),Te(" ",t," ")}}function G4(n,e){if(n&1){let t=Cr();I(0,"div",1)(1,"h3"),C(2,"Messages"),w(),I(3,"button",2),De("click",function(){Qn(t);let i=Re();return Yn(i.messageService.clear())}),C(4,"Vider"),w(),I(5,"ul"),Pt(6,z4,2,1,"li",3),w()()}if(n&2){let t=Re();x(6),ie("ngForOf",t.messageService.messages())}}var Rp=class n{constructor(e){this.messageService=e}static \u0275fac=function(t){return new(t||n)(U(Pi))};static \u0275cmp=$e({type:n,selectors:[["app-messages"]],decls:1,vars:1,consts:[["class","messages",4,"ngIf"],[1,"messages"],["type","button",3,"click"],[4,"ngFor","ngForOf"]],template:function(t,r){t&1&&Pt(0,G4,7,1,"div",0),t&2&&ie("ngIf",r.messageService.messages().length)},dependencies:[yo,Es],styles:[".messages[_ngcontent-%COMP%]{margin-top:1.6rem;padding:.9rem 1rem 1.1rem;border-radius:var(--radius-md);background:radial-gradient(circle at top,rgba(201,166,107,.2),transparent 60%),#080402f2;border:1px solid rgba(201,166,107,.55);box-shadow:0 18px 32px #000000e6;animation:slideUpToast .26s ease-out}.messages[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.4rem}.messages[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:.6rem}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;font-size:.9rem;color:var(--text-soft)}.messages[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{margin-top:.25rem}"]})};function W4(n,e){if(n&1){let t=Cr();I(0,"div",7)(1,"span"),C(2),w(),I(3,"button",8),De("click",function(){Qn(t);let i=Re();return Yn(i.auth.logout())}),C(4,"Se d\xE9connecter"),w()()}if(n&2){let t=e.ngIf;x(2),Te("Connect\xE9 en tant que ",t.email)}}var Mp=class n{title="Ar\xE8nes du Mordor";auth=L(Li);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=$e({type:n,selectors:[["app-root"]],decls:16,vars:4,consts:[[1,"container"],[1,"main-nav"],["routerLink","/dashboard"],["routerLink","/heroes"],["routerLink","/weapons"],["routerLink","/fight"],["class","user-info",4,"ngIf"],[1,"user-info"],["type","button",3,"click"]],template:function(t,r){t&1&&(I(0,"div",0)(1,"h1"),C(2),w(),I(3,"nav",1)(4,"a",2),C(5,"Dashboard"),w(),I(6,"a",3),C(7,"H\xE9ros"),w(),I(8,"a",4),C(9,"\xC9quipements"),w(),I(10,"a",5),C(11,"Ar\xE8ne"),w(),Pt(12,W4,5,1,"div",6),jy(13,"async"),w(),Ae(14,"router-outlet")(15,"app-messages"),w()),t&2&&(x(2),pe(r.title),x(10),ie("ngIf",Uy(13,2,r.auth.user$)))},dependencies:[st,yo,nu,Gt,Rp,Zy],styles:['.container[_ngcontent-%COMP%]{max-width:1100px;margin:3rem auto 4rem;padding:2.4rem 2.7rem 2.7rem;border-radius:var(--radius-lg);background:radial-gradient(circle at top,rgba(226,195,133,.12),transparent 65%),var(--shell-bg);border:1px solid var(--border-strong);box-shadow:var(--shadow-soft);-webkit-backdrop-filter:blur(var(--blur-strong));backdrop-filter:blur(var(--blur-strong));position:relative;overflow:hidden;animation:floatIn .38s ease-out}.container[_ngcontent-%COMP%]:before, .container[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:18px;border-radius:20px;border:1px solid rgba(201,166,107,.35);pointer-events:none}.container[_ngcontent-%COMP%]:after{inset:8px;border-radius:26px;border-style:dashed;opacity:.4;border-color:#c9a66b47}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.8rem;font-size:2.5rem;letter-spacing:.2em;text-transform:uppercase;color:var(--accent);text-shadow:0 0 14px rgba(0,0,0,.9),0 0 22px rgba(226,195,133,.45)}.main-nav[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.4rem;margin:1.5rem 0 1.2rem;padding:.7rem 0;border-top:1px solid rgba(201,166,107,.45);border-bottom:1px solid rgba(201,166,107,.45);position:relative}.main-nav[_ngcontent-%COMP%]:before{content:"";position:absolute;left:50%;top:-.5rem;transform:translate(-50%);width:120px;height:120px;border-radius:50%;border:1px solid rgba(201,166,107,.4);box-shadow:0 0 22px #e2c38559,inset 0 0 18px #000000e6;opacity:.3;pointer-events:none}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;padding:.35rem .9rem;border-radius:999px;font-family:Cinzel,Georgia,serif;font-size:.88rem;letter-spacing:.18em;text-transform:uppercase;color:var(--text-soft);text-decoration:none;border:1px solid transparent;background:radial-gradient(circle at top,rgba(201,166,107,.16),transparent 65%);transition:color var(--transition-fast),background var(--transition-fast),border-color var(--transition-fast),transform var(--transition-fast),box-shadow var(--transition-fast)}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;border-radius:inherit;border:1px solid transparent;box-shadow:0 0 #c9a66b80;opacity:0;transition:opacity var(--transition-fast),box-shadow var(--transition-fast)}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#f9e3ad;border-color:#c9a66bb3;transform:translateY(-1px);box-shadow:0 0 16px #c9a66b59}.main-nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{opacity:1;box-shadow:0 0 18px 1px #c9a66b8c}.main-nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#fdf3cf;border-color:var(--border-strong);background:radial-gradient(circle at top,#c9a66b59,#0a0603fa);box-shadow:0 0 14px #c9a66b8c,0 0 40px #000000f2}router-outlet[_ngcontent-%COMP%]{display:block;margin-top:1.4rem}app-messages[_ngcontent-%COMP%]{display:block;margin-top:2.5rem}.user-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem}.user-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:4px;border:none;cursor:pointer}']})};av(Mp,QN).catch(n=>console.error(n));
